<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-2018/k8s-security-11tips-ii" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">11個保護你 Kubernetes 集群的技巧與觀念(下) | hwchiu learning note</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://hwchiu.com/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://hwchiu.com/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://hwchiu.com/docs/2018/k8s-security-11tips-ii"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="11個保護你 Kubernetes 集群的技巧與觀念(下) | hwchiu learning note"><meta data-rh="true" name="description" content="在管理 Kubernetes 集群方面，大部分的玩家及管理者一開始最在意的一定會是自己的服務能不能夠順利運行起來，同時能不能藉由 kubernetes 的諸多特性，如 service/configmap/deployment/daemonset 等各式各樣的資源來加強自身的服務能力。然而對於一個真正運行產品的集群來說是完全不夠的，除了服務的功能以及穩定外，還有諸多相關的議題都需要一併考慮並且處理。在此議題下特別重要的就是 Security 的處理， Security 處理的不當，可能會造成使用者的資料被竊取，更嚴重甚至整個集權的管理權限都被外人取得。因此這次特別分享一篇 &quot;11 Ways Not to Get Hacked&quot; 的文章，針對裡面提出的 11 個保護好你 kubernetes 集群的方向進行研究，並且配上自己的心得與整理。"><meta data-rh="true" property="og:description" content="在管理 Kubernetes 集群方面，大部分的玩家及管理者一開始最在意的一定會是自己的服務能不能夠順利運行起來，同時能不能藉由 kubernetes 的諸多特性，如 service/configmap/deployment/daemonset 等各式各樣的資源來加強自身的服務能力。然而對於一個真正運行產品的集群來說是完全不夠的，除了服務的功能以及穩定外，還有諸多相關的議題都需要一併考慮並且處理。在此議題下特別重要的就是 Security 的處理， Security 處理的不當，可能會造成使用者的資料被竊取，更嚴重甚至整個集權的管理權限都被外人取得。因此這次特別分享一篇 &quot;11 Ways Not to Get Hacked&quot; 的文章，針對裡面提出的 11 個保護好你 kubernetes 集群的方向進行研究，並且配上自己的心得與整理。"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://hwchiu.com/docs/2018/k8s-security-11tips-ii"><link data-rh="true" rel="alternate" href="https://hwchiu.com/docs/2018/k8s-security-11tips-ii" hreflang="en"><link data-rh="true" rel="alternate" href="https://hwchiu.com/docs/2018/k8s-security-11tips-ii" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="hwchiu learning note RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="hwchiu learning note Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XCGL7X3W07"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-XCGL7X3W07",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.a4f4719e.css">
<link rel="preload" href="/assets/js/runtime~main.55e5fb77.js" as="script">
<link rel="preload" href="/assets/js/main.9dab66f8.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Hwchiu" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="Hwchiu" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">HWCHIU 學習筆記</b></a><a class="navbar__item navbar__link" href="/about">我是誰</a><a class="navbar__item navbar__link" href="/">短篇筆記</a><a class="navbar__item navbar__link" href="/tags">短篇筆記-分類</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/category/2023">長篇技術文</a><a class="navbar__item navbar__link" href="/docs/tags">長篇技術文-分類</a><a class="navbar__item navbar__link" href="/course">線上課程</a><a class="navbar__item navbar__link" href="/public_sharing">演講紀錄</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/2023">2023</a><button aria-label="Toggle the collapsible sidebar category &#x27;2023&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/2022">2022</a><button aria-label="Toggle the collapsible sidebar category &#x27;2022&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/2021">2021</a><button aria-label="Toggle the collapsible sidebar category &#x27;2021&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/2020">2020</a><button aria-label="Toggle the collapsible sidebar category &#x27;2020&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/2019">2019</a><button aria-label="Toggle the collapsible sidebar category &#x27;2019&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/2018">2018</a><button aria-label="Toggle the collapsible sidebar category &#x27;2018&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2018/cert-manager">Automatically Renew Your Certificated in kubernetes by Cert-Manager</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2018/cni-compare">常見 CNI (Container Network Interface) Plugin 介紹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2018/cni-questions">CNI 常見問題整理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2018/gpu-gke">Install GPU in GKE(Google Kubernetes Engine)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2018/introduce-cni-i">[Container Network Interface] Bridge Network In Docker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2018/introduce-cni-ii">[Container Network Interface] CNI Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2018/introduce-cni-iii">[Container Network Interface] Implement Your CNI In Golang</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2018/k8s-security-11tips-i">11個保護你 Kubernetes 集群的技巧與觀念(上)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/2018/k8s-security-11tips-ii">11個保護你 Kubernetes 集群的技巧與觀念(下)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2018/kubernetes-dns-ii">[Kubernetes] DNS Setting When DnsPolicy Is Default</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2018/kubernetes-dns-iii">[Kubernetes] DNS Setting with Dockerd(原始碼分析上)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2018/kubernetes-dns-iiii">[Kubernetes] DNS Setting with Dockerd(原始碼分析下)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2018/kubernetes-dns">[Kubernetes] DNS setting in your Pod</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2018/kubernetes-fedora">Install the kubernetes as single node in Fedora 28</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2018/kubernetes-service-i">[Kubernetes] What Is Service?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2018/kubernetes-service-ii">[Kubernetes] How to Implement Kubernetes Service - ClusterIP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2018/kubernetes-service-iii">[Kubernetes] How to Implement Kubernetes Service - NodePort</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2018/kubernetes-service-iiii">[Kubernetes] How to Implement Kubernetes Service - SessionAffinity</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2018/kubernetes-storage-i">Kubernetes X Storage (I)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2018/kubernetes-storage-ii">NFS 於 Kubernetes 內的各種應用</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2018/mgo-aggregate">[Golang] aggregate in mongo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2018/netfilter-eiptables-i">[netfilter] Introduction to ebtables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2018/netfilter-eiptables-ii">[netfilter] Introduction to iptables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2018/netfilter-eiptables-iii">[netfilter] Dig Into Docker Bridge Network By iptables/ebtables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2018/paper-tensorflow-with-rdma">[論文導讀] - Towards Zero Copy Dataflows using RDMA</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2018/tools-ncdu">NCurses Disk Usage(ncdu)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2018/travisci-k8s">使用 Travis CI 為你的 Kubernetes 應用程式打造自動化測試</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/2018/travisci-step-job-stage">[DevOps] Travis CI - Step/Job/Stage</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/2017">2017</a><button aria-label="Toggle the collapsible sidebar category &#x27;2017&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/2016">2016</a><button aria-label="Toggle the collapsible sidebar category &#x27;2016&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/2015">2015</a><button aria-label="Toggle the collapsible sidebar category &#x27;2015&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/2014">2014</a><button aria-label="Toggle the collapsible sidebar category &#x27;2014&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/2013">2013</a><button aria-label="Toggle the collapsible sidebar category &#x27;2013&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/2018"><span itemprop="name">2018</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">11個保護你 Kubernetes 集群的技巧與觀念(下)</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>11個保護你 Kubernetes 集群的技巧與觀念(下)</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="preface">Preface<a href="#preface" class="hash-link" aria-label="Direct link to Preface" title="Direct link to Preface">​</a></h2><p>本篇文章的原文為 <a href="https://kubernetes.io/blog/2018/07/18/11-ways-not-to-get-hacked/#11-run-a-service-mesh" target="_blank" rel="noopener noreferrer">11 Ways Not to Get Hacked</a></p><p>本文作者將這 11 個技巧與觀念分成三大部分來
分別是</p><ol><li>The Control Plane</li><li>Workloads</li><li>The Future</li></ol><p>本篇文章延續 <a href="https://www.hwchiu.com/k8s-security-11tips-i.html#more" target="_blank" rel="noopener noreferrer">11個保護你 Kubernetes 集群的技巧與觀念(上)</a></p><p>繼續探討原文作者後半部分的概念</p><p>在上篇文章中，我們專注於 <code>The Control Plane</code> 這邊相關的安全管理，而本篇文章我們則會專注於後續的兩個方向，分別是 <code>Workloads</code> 以及 <code>The Future</code>。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="workloads">Workloads<a href="#workloads" class="hash-link" aria-label="Direct link to Workloads" title="Direct link to Workloads">​</a></h2><p>相對於 <code>The Control Plane</code> 著重於整個集群架構上的安全問題， <code>Workloads</code> 則是著重於運行於 <code>kubernetes</code> 內的各種工作服務，如 <code>Pods</code>,<code>Deployments</code>, <code>Jobs</code> 等
雖然這些工作服務在部署階段是受到 <code>kubernetes</code> 經過檢查確認合法才會往下執行的，但是由於這些工作服務都會直接面向使用者，若這些工作容器內本身的權限過高且遭受到非預期的攻擊時，就會衍生出其他的安全性問題。</p><p>因此作者認為，針對這些容器相關的部署，其權限能夠愈低愈好，針對其用途開啟特定權限，不能為了方便偷懶就將全部的權限開啟。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-linux-security-features-and-podsecuritypolicies">Use Linux Security Features and PodSecurityPolicies<a href="#use-linux-security-features-and-podsecuritypolicies" class="hash-link" aria-label="Direct link to Use Linux Security Features and PodSecurityPolicies" title="Direct link to Use Linux Security Features and PodSecurityPolicies">​</a></h3><p>針對 <code>Linuux</code> 相關的容器來說，<code>Linux Kernel</code> 其實提供了不少安全控管的機制，譬如</p><ol><li>Linux Capability</li><li>AppArmor</li><li>SELinux</li><li>seccomp</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="linux-capability">Linux Capability<a href="#linux-capability" class="hash-link" aria-label="Direct link to Linux Capability" title="Direct link to Linux Capability">​</a></h4><p><a href="http://man7.org/linux/man-pages/man7/capabilities.7.html" target="_blank" rel="noopener noreferrer">Linux Capability</a> 是針對 Thread 為單位的權限控管，部分跟系統底層的操作都需要特定的 <code>capability</code> 才能夠操作，譬如擁有 <code>NET_ADMIN</code> 能力的則可以透過相關指令去修改系統上的網路設定(Routing/Interface), 而擁有 <code>NET_RAW</code> 的則有能力可以去聽取 <code>Raw Socket</code> 的封包。
在 <code>Kubernetes</code> 內也可以透過 <code>SecurityContext</code> 對每個 <code>Container</code> 去進行相關的權限設定.
類似用法如下</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pods/security/security</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">4.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> security</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">demo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> sec</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gcr.io/google</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">samples/node</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">hello</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">securityContext</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">capabilities</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">add</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;NET_ADMIN&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;SYS_TIME&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="apparmor">AppArmor<a href="#apparmor" class="hash-link" aria-label="Direct link to AppArmor" title="Direct link to AppArmor">​</a></h4><p><a href="https://kubernetes.io/docs/tutorials/clusters/apparmor/" target="_blank" rel="noopener noreferrer">AppArmor</a> 則是一種基於 <code>Process</code> 程序為單位去限制其存取檔案及操作的一種機制。
針對每個 <code>Process</code> 可以去描述只能存取哪些檔案，藉此降低該程序被攻擊時所造成的傷害.</p><p>對於 <code>Kubernetes</code>來說，自從 <code>1.4.0</code> 開始就有支援 <code>AppArmor</code> 相關的功能，可以事先在每個節點上安裝 <code>AppArmor</code> 並且透過 <code>Profile</code> 的方式去設定 <code>AppArmor</code> 的權限，然後每個 <code>Pod</code> 透過 <code>Annotation</code> 的方式去掛載特定的 <code>AppArmor</code> 來限制該容器的權限。
詳細的範例可以參考官網的範例<a href="https://kubernetes.io/docs/tutorials/clusters/apparmor/" target="_blank" rel="noopener noreferrer">Kubernetes AppArmor</a></p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hello</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">apparmor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Tell Kubernetes to apply the AppArmor profile &quot;k8s-apparmor-example-deny-write&quot;.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Note that this is ignored if the Kubernetes node is not running version 1.4 or greater.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">container.apparmor.security.beta.kubernetes.io/hello</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> localhost/k8s</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">apparmor</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">example</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deny</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">write</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> busybox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;sh&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;-c&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;echo &#x27;Hello AppArmor!&#x27; &amp;&amp; sleep 1h&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="selinux">SELinux<a href="#selinux" class="hash-link" aria-label="Direct link to SELinux" title="Direct link to SELinux">​</a></h4><p>Security-Enhanced Linux (SELinux) 主旨在於提供更強安全性的 Linux 系統，藉由取代原先的 <code>自主式存取控制 (Discretionary Access Control, DAC)</code> 為 <code>委任式存取控制 (Mandatory Access Control, MAC) 的方法</code> 來針對特定的應用程式與特定的使用者達成更細部的權限管理，可達成即使是 <code>root</code> 身份在執行特定檔案/指令時也會被降權成非<code>root</code>權限。</p><p>對應於 <code>Kubernetes</code> 來說，首先要先在節點上面開啟 <code>SELinux</code> 相關的功能，並且正確設定完畢。
接下來對於要採用該 <code>SELinux</code> 的 <code>Pod</code> 中去設定 <code>SecurityContext</code>，並且透過 <code>seLinuxOptions</code> 的方式來設定相關的參數
整體的參數結構可以參考 <a href="https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.11/#selinuxoptions-v1-core" target="_blank" rel="noopener noreferrer">Kubernetes API Reference</a>而使用範例可參考如下</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">securityContext</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">seLinuxOptions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">level</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;s0:c123,c456&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="seccomp">Seccomp<a href="#seccomp" class="hash-link" aria-label="Direct link to Seccomp" title="Direct link to Seccomp">​</a></h4><p>seccomp-bpf 是一套以 <code>process</code> 程序為單位去限制其能夠呼叫 <code>Linux Kernel System Call</code> 的機制。
一般的應用程式大部分可能都只會用到 <code>Read</code>,<code>Write</code> 等基本功能，再來可能會牽扯到 <code>Fork/Clone</code> 這類型，更甚至會牽扯到網路相關的網卡綁定。</p><p>因此透過 <code>seccomp</code> 的功能去限制能夠執行的 <code>System Call</code> 也能夠大幅的降低當應用程式被攻擊時所造成的傷害。</p><p>對應於 <code>kubernetes</code> 來說，該功能目前還是屬於 <code>Alpha</code> 階段，目前的使用方式大概是</p><ol><li>在對應的節點上放置相關的 <code>seccomp</code> 的檔案，用來描述相關的設定</li><li>在運行的 <code>Pod</code> 的檔案內，透過 <code>Annotation</code> 的方式將該 <code>Pod</code> 與對應的 <code>seccomp</code> 設定檔連結來達到限制的功用。
詳細的操作可以參考<a href="https://kubernetes.io/docs/concepts/policy/pod-security-policy" target="_blank" rel="noopener noreferrer">Kubernetes Pod-Security-Policy</a></li></ol><p>除了上述提到跟 <code>Linux Kernel</code> 提供的安全機制外，<code>Kubernetes</code> v1.11 本身也提供了一個新的機制 <code>Pod Securirt Policy</code>(Beta).</p><p>該機制提供了一種<code>Cluster-Wide</code>的安全性設定，能夠將相關的安全性設定設定成一份全域的設定檔案，透過 <code>RBAC</code> 以及 <code>ServiceAccount</code> 的綁定，就可以讓所有的 <code>Pod</code> 自動套用這些安全性設定，減少了每個單獨設定的繁瑣程序。
相像的文件可以參考<a href="https://kubernetes.io/docs/concepts/policy/pod-security-policy" target="_blank" rel="noopener noreferrer">Kubernetes Pod-Security-Policy</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="statically-analyse-yaml">Statically Analyse YAML<a href="#statically-analyse-yaml" class="hash-link" aria-label="Direct link to Statically Analyse YAML" title="Direct link to Statically Analyse YAML">​</a></h3><p>相對於前面提到這種<code>RunTime</code>時期的安全性檢查，這邊要介紹的則是一種相輔相成的概念，<code>Statiscally Analyse YAML</code>，針對部署服務的 <code>Yaml</code> 設定檔案去分析，評估該 <code>Yaml</code> 內的設定是否足夠安全。</p><p>作者認為敏感機密的資訊不應該被放在任何的 <code>Yaml</code> 內容之中，若採用 <code>ConfigMap</code> 以及 <code>Secret</code> 等方式來存放任何機密資訊的話，也必須要將這些資料透過一些工具來進行加密，譬如 <a href="https://github.com/coreos/vault-operator" target="_blank" rel="noopener noreferrer">Valut(with CoreOS&#x27;s operator</a>, <a href="https://github.com/AGWA/git-crypt" target="_blank" rel="noopener noreferrer">git-crypt</a>, <a href="https://github.com/bitnami-labs/sealed-secrets" target="_blank" rel="noopener noreferrer">sealed secrets</a> 以及 <a href="https://cloud.google.com/kms/" target="_blank" rel="noopener noreferrer">cloud procider KMS</a></p><p>此外，這邊也提出了另外一套我覺得滿有趣的工具 <a href="https://github.com/stefanprodan/kubectl-kubesec" target="_blank" rel="noopener noreferrer">kubectl-kubesec</a>
該工具是一個 kubelet 的 plugin, 能夠針對部署資源的 Yaml 檔案將行掃描，根據安全性相關的設定給予評分，讓管理者能夠知道盡可能地將安全性相關的權限給濃縮到最小，減少被惡意攻擊時能夠造成的傷害。
舉例來說針對 <code>kubernetes-dashboard</code> 的部署，得到下列結果。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubernetes-dashboard kubesec.io score 7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Advise</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. containers[] .securityContext .runAsNonRoot == true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Force the running image to run as a non-root user to ensure least privilege</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. containers[] .securityContext .capabilities .drop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Reducing kernel capabilities available to a container limits its attack surface</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. containers[] .securityContext .readOnlyRootFilesystem == true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">An immutable root filesystem can prevent malicious binaries being added to PATH and increase attack cost</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4. containers[] .securityContext .runAsUser &gt; 10000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Run as a high-UID user to avoid conflicts with the host&#x27;s user table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5. containers[] .securityContext .capabilities .drop | index(&quot;ALL&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Drop all capabilities and add only those required to reduce syscall attack surface</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其建議大概如下</p><ol><li>不要用 <code>Root</code>去運行，應該修改 Container 改成 <code>non-root</code> 就可以執行</li><li>Linux Capabilityes 應該要移除掉沒有用到的部分</li><li>針對 <code>/</code> Root File System 應該只能夠唯獨就好</li><li>執行 User 的 UID 應該要超過 10000，可以避免該 UID 與本機端的 Host 衝突(主要是因為 User Namespace 還沒有完全實作於 <code>k8s</code> container 中)</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="run-containers-as-a-non-root-user">Run Containers as a Non-Root User<a href="#run-containers-as-a-non-root-user" class="hash-link" aria-label="Direct link to Run Containers as a Non-Root User" title="Direct link to Run Containers as a Non-Root User">​</a></h3><p>作者說道，大部分使用 <code>Root</code> 去運行的 <code>Container</code> 應用程式其實根本都不需要 <code>Root</code> 這麼大的權限，以 <code>Root</code> 身份去執行擁有的權限已經超過的該應用程式真正需要的權限，這樣的設定會讓任何惡意的攻擊者在成功突入後有更大的權限去對系統造成更大的傷害。</p><p>首先，目前的 Linux 在針對檔案權限的部分預設還是採用 <code>自主式存取控制 (Discretionary Access Control, DAC)</code> 這種依據檔案的 <code>User/Group UID/GID</code> 對應的方式來判別是否有權限進行讀寫。</p><p>同時，在 <code>Kubernetes</code> 的環境下，創建各式各樣的 <code>Container</code> 的同時並沒有啟動<code>User namespace</code> 的隔離，這意味者容器內使用者的ID (UID) 實際上是可以對應到外面節點上的使用者資料集中。</p><p>以實際的案例來說明上述的情況就是若以 <code>Root</code> 的身份去運行一個容器於 <code>kubernetes</code> 集群之中，在對應的工作節點上可以觀察到實際上也是用一個<code>Root</code>的身份去運行該容器的應用程式。
以下面的範例來說，我們在 <code>kubernetes</code> 節點上可以觀察到 <code>coredns</code> 這個 <code>pod</code> 實際上是用 <code>root</code> 身份在節點上去運行對應的應用程式。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">$ps</span><span class="token plain"> axuw </span><span class="token operator" style="color:#393A34">|</span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> dns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vagrant   </span><span class="token number" style="color:#36acaa">4656</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">12916</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">936</span><span class="token plain"> pts/3    S+   07:38   </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:00 </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> --color</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">auto dns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root      </span><span class="token number" style="color:#36acaa">7886</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">0.2</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">0.5</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">45224</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">21924</span><span class="token plain"> ?        Ssl  Jul27   </span><span class="token number" style="color:#36acaa">5</span><span class="token plain">:56 /coredns -conf /etc/coredns/Corefile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root      </span><span class="token number" style="color:#36acaa">8011</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">0.2</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">0.5</span><span class="token plain">  </span><span class="token number" style="color:#36acaa">45224</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22180</span><span class="token plain"> ?        Ssl  Jul27   </span><span class="token number" style="color:#36acaa">6</span><span class="token plain">:04 /coredns -conf /etc/coredns/Corefile</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>雖然目前已經有很多的技術被提出來避免 <code>Container</code> 內的應用程式可以突破限制進而影響外部宿主機上面的資源，但是作者認為能夠避免使用 <code>Root</code> 去執行還是避免使用，畢竟安全性這種東西沒有完美的一天。</p><p>此外，大部分的容器應用程式都會使用 <code>Root</code> 的身份執行第一個應用程式，也就是 <code>PID=1</code> 的應用程序。如果該應用程式被攻擊者掌控了也就意味者攻擊者獲得了 <code>Root</code>的權限，因此攻擊者就能夠執行更進一步的操作。</p><p>文中特別提及一篇文章 <a href="https://engineering.bitnami.com/articles/running-non-root-containers-on-openshift.html" target="_blank" rel="noopener noreferrer">Running Non-Root Containers On Openshift</a>, 說到 <code>Bitnami</code> 將他們用到的 Container 從 <code>Root</code> 轉移到 <code>Non-Root</code> 的過程以及方法，並且說明為什麼要轉移到 <code>Non-Root</code> 的執行環境。</p><p>最後，作者在此提到了 <code>kubernetes</code> v1.11 的新功能 (PodSecuurityPolicy),
使用了一個簡單的 <code>Yaml</code>  來描述如何限制所有的 Pod 都必須要以 <code>Non-Root</code> 的身份來執行</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Required to prevent escalations to root.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">allowPrivilegeEscalation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">runAsUser</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Require the container to run without root privileges.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">rule</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;MustRunAsNonRoot&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>最後作者提到，到 <code>User Namespace</code> 隔離的功能完成之前，使用 <code>Non-Root</code> 身份去運行容器依然是一個必要且不可以避免的選擇，為了整個集群以及容器的安全性，還是需要多花時間進行轉換。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-network-policies">Use Network Policies<a href="#use-network-policies" class="hash-link" aria-label="Direct link to Use Network Policies" title="Direct link to Use Network Policies">​</a></h3><p>講完了跟容器部署的安全性之後，接下來要探討的是<code>Pod</code>之間互相存取的安全性問題
在預設的情況下，<code>kubernetes</code> 集群內的<code>Pod</code>彼此都可以互相透過網路存取，即使是不同 <code>namespace</code> 的容易也可以。</p><p>如果想要限制<code>Pod</code>間的網路存取，這邊可以引入 <code>kubernetes</code> 提供的功能 <code>Network Policy</code>, 透過 <code>Network Policy</code>, 管理者可以限制<code>Pod</code>間的存取規則，除了單純的 <code>Pod</code> 之外，還可以限制連接埠,<code>Namespace</code> 以及相關的網路協定 (TCP/UDP).</p><p>但是因為 <code>Network Policy</code> 實際上並不是 <code>kubernetes</code> 自行實作的內容，這部分要仰賴 <code>kubernetes</code> 集群使用的 CNI(Container Network Interface).
如果想要嚐鮮的人可以考慮使用看看 <code>Calico</code>, <code>Weave</code> 等有支援 <code>Network Policy</code> 的 <code>CNI</code>。</p><p>就如同之前所提供的概念一樣，針對安全性的部分都是盡可能的縮小權限，非必要的就不要開啟。
套用在 <code>Network Policy</code> 這邊則是非必要的連線都不允許通過，所以一開始可以先講所有的連線全部都阻擋起來，再根據需要的連線一條一條的規則打開。
這樣的做法聽起來有效，然而卻非常的複雜與繁瑣，因此這邊又介紹另外一個有趣的工具
<a href="https://github.com/controlplaneio/netassert" target="_blank" rel="noopener noreferrer">netassert</a>,一套基於 <code>nmap</code>的工具，可以根據設定去測試當前的封包走向是否運作，藉此減少撰寫 <code>NetworkPolicy</code> 時要不停的打流量來測試當前的 <code>Network Policy</code>是否如設定般運作。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="scan-images-and-run-ids">Scan Images and Run IDS<a href="#scan-images-and-run-ids" class="hash-link" aria-label="Direct link to Scan Images and Run IDS" title="Direct link to Scan Images and Run IDS">​</a></h3><p>最後一個要探討的安全部分則是針對 <code>Image</code> 本身進行安全性的探討。
在 <code>kubernetes</code> 的流程中，當 <code>Pod</code> 本身的 <code>yaml</code> 送進到 <code>kubernetes</code> 集群中後，會受到 <code>Admission Controllers</code>  一系列的檢查，去確保這次資源的部屬是合法的。
這中間的檢查，有一個非常有趣的就是 <code>webhook</code>. 透過 <code>webhook</code>, 我們可以透過第三方的應用程式去檢查當前的 <code>Image</code> 安全與否，若不安全就阻擋下來，讓該 <code>Pod</code> 沒有機會被部署到 <code>kubernetes</code> 集群內。</p><p>關於 <code>webhook</code> 的使用方法，可以參考官方文件的說明 <a href="https://kubernetes.io/docs/reference/access-authn-authz/webhook/" target="_blank" rel="noopener noreferrer">kuubernetes webhook</a>.</p><p><del>至於檢查 <code>Image</code> 這個行為，我們暫時稱作 IDS(Intrusion Detection System), 這邊作者提供了兩套相關的工具來提供這類型的服務，分別是 <a href="https://github.com/coreos/clair" target="_blank" rel="noopener noreferrer">Clair</a> 以及 <a href="https://github.com/aquasecurity/microscanner" target="_blank" rel="noopener noreferrer">Micro Scanner</a>.</del></p><p>感謝網友<code>SCLin</code>指正，上述的說法有誤，<a href="https://github.com/coreos/clair" target="_blank" rel="noopener noreferrer">Clair</a> 以及 <a href="https://github.com/aquasecurity/microscanner" target="_blank" rel="noopener noreferrer">Micro Scanner</a> 這兩個服務都是包在 Image 階段執行 Vulnerability assessment 以及 static code analysis 的工具。</p><p>而真正符合 IDS(Intrustion Detection System) 的工具則是<a href="https://github.com/draios/falco" target="_blank" rel="noopener noreferrer">Sysdig&#x27;s Falco</a>這個 Project.
該 Project 的介紹就是 <code>Behavioral Activity Monitoring</code>, 該 IDS 工具能夠偵測下列的行為</p><ul><li>A shell is run inside a container</li><li>A container is running in privileged mode, or is mounting a sensitive path like /proc from the host.</li><li>A server process spawns a child process of an unexpected type</li><li>Unexpected read of a sensitive file (like /etc/shadow)</li><li>A non-device file is written to /dev</li><li>A standard system binary (like ls) makes an outbound network connection</li></ul><p>除了上述工具外，作者也提到另外一個服務的概念, <a href="https://grafeas.io/" target="_blank" rel="noopener noreferrer">grafeas</a>, 該服務會維護一個資料庫，該資料庫內會以每個 Image 的 Hash tag 作為索引資料，來記住對應的 Image 是否有任何安全性的問題。
所以可以藉由此工具來掃描當前所屬的 Image 是否內部繼承了任何有問題的 Image 來判斷是否有任何安全性問題。</p><p>至於 <code>Zero Day</code> 這種類型的安全性問題也有相關的工具可以幫忙處理，如<a href="https://www.twistlock.com/" target="_blank" rel="noopener noreferrer">twistlock</a>,<a href="https://www.aquasec.com/" target="_blank" rel="noopener noreferrer">aquasec</a> 以及 <a href="https://sysdig.com/product/secure/" target="_blank" rel="noopener noreferrer">Sysdig Secure</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-future">The Future<a href="#the-future" class="hash-link" aria-label="Direct link to The Future" title="Direct link to The Future">​</a></h2><p>最後，在學習了 <code>Control-Plane</code> 以及 <code>Workload</code> 這種兩類型相關的安全性防護後，作者認為接下來的趨勢則是 <code>Service Mesh</code>.</p><p><code>Service Mesh</code> 簡單來說就是在不修改所有已經存在的微服務容器前提下，透過一些第三方的應用程式讓你在不同容器中間建立一條加密的連線，將這些服務串起來。</p><p>此外這些容器的連線中也有所謂的 <code>Zero Trust</code>連線，藉由 <code>TLS</code> 相關的加密處理安全性問題，減少了需要 <code>Network Policy</code> 額外的封包處理。</p><p>基本上現在最火紅的 <code>Service Mesh</code> 服務就是 <code>Istio</code>，這部分的概念與用法非常龐大，短短一篇文章沒有辦法訴說完畢，之後若有時間可以再好好的寫一篇文章來介紹 <code>Istio 的概念與用法</code>。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h2><p>總算將這一篇安全性相關的文章給唸完了，裡面的內容其實很短，但是這 11 個重點其實每一個都可以獨立寫成一篇文章來仔細探討。</p><p>作者將整個安全性分成三個部分，總共 11 點來探討，這 11 點除了介紹概念之外，也都提供了不少相關 kubernetes 的用法或是額外的工具來協助各式各樣的安全性問題。</p><p>最後，我認為安全性真的很重要，如果今天你要提供一個<code>kubernetes</code>平台供外部使用者使用的話，在最後進行到 <code>Production</code> 前一定要花時間注意當前集群內的安全性問題，存 <code>Control-Plane</code> 先確保基礎架設的安全，接下來從 <code>Workloads</code> 方面去限制相關資源部署的權限問題，使用最小的權限來執行所需要的應用程式，降低問題發生時的傷害。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/kubernetes">Kubernetes</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/security">Security</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> by <b>HungWei Chiu</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/2018/k8s-security-11tips-i"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">11個保護你 Kubernetes 集群的技巧與觀念(上)</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/2018/kubernetes-dns-ii"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">[Kubernetes] DNS Setting When DnsPolicy Is Default</div></a></nav><hr><br></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#preface" class="table-of-contents__link toc-highlight">Preface</a></li><li><a href="#workloads" class="table-of-contents__link toc-highlight">Workloads</a><ul><li><a href="#use-linux-security-features-and-podsecuritypolicies" class="table-of-contents__link toc-highlight">Use Linux Security Features and PodSecurityPolicies</a></li><li><a href="#statically-analyse-yaml" class="table-of-contents__link toc-highlight">Statically Analyse YAML</a></li><li><a href="#run-containers-as-a-non-root-user" class="table-of-contents__link toc-highlight">Run Containers as a Non-Root User</a></li><li><a href="#use-network-policies" class="table-of-contents__link toc-highlight">Use Network Policies</a></li><li><a href="#scan-images-and-run-ids" class="table-of-contents__link toc-highlight">Scan Images and Run IDS</a></li></ul></li><li><a href="#the-future" class="table-of-contents__link toc-highlight">The Future</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">其他資源</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://hwchiu.medium.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">英文部落格<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.facebook.com/technologynoteniu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook Page(矽谷牛耕田筆記)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/hw_chiu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/in/hung-wei-chiu-52561494/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Cloud Native Taiwan User Group(CNTUG)</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://cloudnative.tw/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Official Site<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@cloudnativetaiwanusergroup" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.facebook.com/groups/298183320685010" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://community.cncf.io/cloud-native-taiwan-user-group/" target="_blank" rel="noopener noreferrer" class="footer__link-item">CNCF Page<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/cntug" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 hwchiu. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.55e5fb77.js"></script>
<script src="/assets/js/main.9dab66f8.js"></script>
</body>
</html>
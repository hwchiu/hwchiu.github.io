"use strict";(self.webpackChunkhwchiu=self.webpackChunkhwchiu||[]).push([[63493],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>C});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},m=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},d="mdxType",k={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,p=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),d=s(n),u=o,C=d["".concat(p,".").concat(u)]||d[u]||k[u]||i;return n?a.createElement(C,r(r({ref:t},m),{},{components:n})):a.createElement(C,r({ref:t},m))}));function C(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=u;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[d]="string"==typeof e?e:o,r[1]=l;for(var s=2;s<i;s++)r[s]=n[s];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},56215:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>r,default:()=>k,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var a=n(87462),o=(n(67294),n(3905));const i={title:"Kubernetes X Storage (I)",date:new Date("2018-11-10T12:47:55.000Z"),tags:["Storage","Kubernetes"],description:"Kubernetes \u7684\u67b6\u69cb\u4e2d\uff0c\u5c0d\u65bc Network/Storage/Device/Container \u90fd\u6709\u9ad8\u5ea6\u7684\u62bd\u8c61\u5316\uff0c\u900f\u904e\u9019\u4e9b\u62bd\u8c61\u5316\u8b93 Kubernetes \u80fd\u5920\u66f4\u5c08\u5fc3\u7684\u767c\u5c55\u81ea\u8eab\u5e73\u53f0\u8207\u4ecb\u9762\uff0c\u8b93\u66f4\u591a\u7684\u5ee0\u5546\u8207\u7b2c\u4e09\u65b9\u5c08\u6848\u5c08\u5fc3\u958b\u767c\u767c\u5c55\u81ea\u5df1\u7684\u7279\u8272\u4e26\u4e14\u900f\u904e\u5171\u901a\u4ecb\u9762\u8207 Kubernetes \u5354\u540c\u5408\u4f5c\u3002\u65bc\u5132\u5b58\u7cfb\u7d71\u65b9\u9762\uff0c\u6700\u5ee3\u70ba\u4eba\u77e5\u7684\u5c31\u662f PersistentVolume(PV), PersistentVolumeClaim(PVC) \u4ee5\u53ca StorageClass, \u9019\u4e09\u8005\u5230\u5e95\u5728 Kubernetes \u53e2\u96c6\u4e2d\u626e\u6f14\u4ec0\u9ebc\u6a23\u7684\u89d2\u8272\uff0c\u5f7c\u6b64\u5982\u4f55\u4e92\u76f8\u5408\u4f5c\u4ee5\u53ca\u5f7c\u6b64\u5404\u81ea\u6709\u4ec0\u9ebc\u6a23\u7684\u9650\u5236\u8207\u61c9\u7528\uff0c\u90fd\u6703\u5728\u672c\u6587\u4e2d\u8ddf\u5927\u5bb6\u8a73\u7d30\u4ecb\u7d39\uff0c\u5e0c\u671b\u80fd\u5920\u900f\u904e\u9019\u7bc7\u6587\u7ae0\u8b93\u5927\u5bb6\u66f4\u77ad\u89e3 PV/PVC/SC \u7684\u6982\u5ff5"},r="Preface",l={unversionedId:"techPost/2018/kubernetes-storage-i",id:"techPost/2018/kubernetes-storage-i",title:"Kubernetes X Storage (I)",description:"Kubernetes \u7684\u67b6\u69cb\u4e2d\uff0c\u5c0d\u65bc Network/Storage/Device/Container \u90fd\u6709\u9ad8\u5ea6\u7684\u62bd\u8c61\u5316\uff0c\u900f\u904e\u9019\u4e9b\u62bd\u8c61\u5316\u8b93 Kubernetes \u80fd\u5920\u66f4\u5c08\u5fc3\u7684\u767c\u5c55\u81ea\u8eab\u5e73\u53f0\u8207\u4ecb\u9762\uff0c\u8b93\u66f4\u591a\u7684\u5ee0\u5546\u8207\u7b2c\u4e09\u65b9\u5c08\u6848\u5c08\u5fc3\u958b\u767c\u767c\u5c55\u81ea\u5df1\u7684\u7279\u8272\u4e26\u4e14\u900f\u904e\u5171\u901a\u4ecb\u9762\u8207 Kubernetes \u5354\u540c\u5408\u4f5c\u3002\u65bc\u5132\u5b58\u7cfb\u7d71\u65b9\u9762\uff0c\u6700\u5ee3\u70ba\u4eba\u77e5\u7684\u5c31\u662f PersistentVolume(PV), PersistentVolumeClaim(PVC) \u4ee5\u53ca StorageClass, \u9019\u4e09\u8005\u5230\u5e95\u5728 Kubernetes \u53e2\u96c6\u4e2d\u626e\u6f14\u4ec0\u9ebc\u6a23\u7684\u89d2\u8272\uff0c\u5f7c\u6b64\u5982\u4f55\u4e92\u76f8\u5408\u4f5c\u4ee5\u53ca\u5f7c\u6b64\u5404\u81ea\u6709\u4ec0\u9ebc\u6a23\u7684\u9650\u5236\u8207\u61c9\u7528\uff0c\u90fd\u6703\u5728\u672c\u6587\u4e2d\u8ddf\u5927\u5bb6\u8a73\u7d30\u4ecb\u7d39\uff0c\u5e0c\u671b\u80fd\u5920\u900f\u904e\u9019\u7bc7\u6587\u7ae0\u8b93\u5927\u5bb6\u66f4\u77ad\u89e3 PV/PVC/SC \u7684\u6982\u5ff5",source:"@site/docs/techPost/2018/kubernetes-storage-i.md",sourceDirName:"techPost/2018",slug:"/techPost/2018/kubernetes-storage-i",permalink:"/docs/techPost/2018/kubernetes-storage-i",draft:!1,tags:[{label:"Storage",permalink:"/docs/tags/storage"},{label:"Kubernetes",permalink:"/docs/tags/kubernetes"}],version:"current",frontMatter:{title:"Kubernetes X Storage (I)",date:"2018-11-10T12:47:55.000Z",tags:["Storage","Kubernetes"],description:"Kubernetes \u7684\u67b6\u69cb\u4e2d\uff0c\u5c0d\u65bc Network/Storage/Device/Container \u90fd\u6709\u9ad8\u5ea6\u7684\u62bd\u8c61\u5316\uff0c\u900f\u904e\u9019\u4e9b\u62bd\u8c61\u5316\u8b93 Kubernetes \u80fd\u5920\u66f4\u5c08\u5fc3\u7684\u767c\u5c55\u81ea\u8eab\u5e73\u53f0\u8207\u4ecb\u9762\uff0c\u8b93\u66f4\u591a\u7684\u5ee0\u5546\u8207\u7b2c\u4e09\u65b9\u5c08\u6848\u5c08\u5fc3\u958b\u767c\u767c\u5c55\u81ea\u5df1\u7684\u7279\u8272\u4e26\u4e14\u900f\u904e\u5171\u901a\u4ecb\u9762\u8207 Kubernetes \u5354\u540c\u5408\u4f5c\u3002\u65bc\u5132\u5b58\u7cfb\u7d71\u65b9\u9762\uff0c\u6700\u5ee3\u70ba\u4eba\u77e5\u7684\u5c31\u662f PersistentVolume(PV), PersistentVolumeClaim(PVC) \u4ee5\u53ca StorageClass, \u9019\u4e09\u8005\u5230\u5e95\u5728 Kubernetes \u53e2\u96c6\u4e2d\u626e\u6f14\u4ec0\u9ebc\u6a23\u7684\u89d2\u8272\uff0c\u5f7c\u6b64\u5982\u4f55\u4e92\u76f8\u5408\u4f5c\u4ee5\u53ca\u5f7c\u6b64\u5404\u81ea\u6709\u4ec0\u9ebc\u6a23\u7684\u9650\u5236\u8207\u61c9\u7528\uff0c\u90fd\u6703\u5728\u672c\u6587\u4e2d\u8ddf\u5927\u5bb6\u8a73\u7d30\u4ecb\u7d39\uff0c\u5e0c\u671b\u80fd\u5920\u900f\u904e\u9019\u7bc7\u6587\u7ae0\u8b93\u5927\u5bb6\u66f4\u77ad\u89e3 PV/PVC/SC \u7684\u6982\u5ff5"},sidebar:"techPost",previous:{title:"[Kubernetes] How to Implement Kubernetes Service - SessionAffinity",permalink:"/docs/techPost/2018/kubernetes-service-iiii"},next:{title:"NFS \u65bc Kubernetes \u5167\u7684\u5404\u7a2e\u61c9\u7528",permalink:"/docs/techPost/2018/kubernetes-storage-ii"}},p={},s=[{value:"PersistentVolume(PV)",id:"persistentvolumepv",level:2},{value:"VolumeMode",id:"volumemode",level:3},{value:"Capacity",id:"capacity",level:3},{value:"AccessMode",id:"accessmode",level:3},{value:"Reclaim Policy",id:"reclaim-policy",level:3},{value:"Class",id:"class",level:3},{value:"Claim",id:"claim",level:3},{value:"Mount Options",id:"mount-options",level:3},{value:"Others",id:"others",level:3},{value:"PersistentVolumeClaim(PVC)",id:"persistentvolumeclaimpvc",level:2},{value:"Resourecs",id:"resourecs",level:3},{value:"Binding",id:"binding",level:3},{value:"PV/PVC",id:"pvpvc",level:2},{value:"StorageClass",id:"storageclass",level:2},{value:"Provisioner",id:"provisioner",level:3},{value:"Parameters",id:"parameters",level:3},{value:"Binding",id:"binding-1",level:3}],m={toc:s},d="wrapper";function k(e){let{components:t,...n}=e;return(0,o.kt)(d,(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"preface"},"Preface"),(0,o.kt)("p",null,"\u4e4b\u524d\u8ac7\u7684\u5f88\u591a\u95dc\u65bc\u7db2\u8def\u76f8\u95dc\u7684\u90e8\u5206\uff0c\u9019\u6b21\u8981\u4f86\u8ac7\u8ac7 Storage \u5132\u5b58\u9019\u4e00\u584a\u518d\u5bb9\u5668\u4e16\u754c\u4e2d\uff0c\u4e5f\u5c31\u662f Kubernetes \u53e2\u96c6\u7684\u67b6\u69cb\u4e2d\uff0c\u9019\u4e9b Storage \u626e\u6f14\u8005\u4ec0\u9ebc\u6a23\u7684\u5730\u4f4d\uff0c\u4ee5\u53ca\u53e2\u96c6\u7684\u7ba1\u7406\u8005\u4ee5\u53ca\u5bb9\u5668\u7684\u90e8\u5c6c\u8005\u53ef\u4ee5\u5982\u4f55\u6574\u5408\u81ea\u5df1\u7684\u5bb9\u5668\u7cfb\u7d71\u8207\u5c0d\u61c9\u7684 Storage \u5132\u5b58\u7cfb\u7d71\u3002"),(0,o.kt)("p",null,"\u6211\u5011\u90fd\u77e5\u9053\uff0c Container \u672c\u8eab\u7684\u7279\u9ede\u5c31\u662f\u79fb\u9664\u5feb\u91cd\u555f\u4e5f\u5feb\uff0c\u7279\u5225\u662f\u642d\u914d Kubernetes Deployment/Replicaset \u7b49\u8cc7\u6e90\u8abf\u5ea6\u53ef\u4ee5\u78ba\u4fdd\u5bb9\u5668\u80fd\u6b63\u78ba\u904b\u884c\u3002\n\u7136\u800c\u90e8\u5206\u7684\u5bb9\u5668\u61c9\u7528\u5834\u666f\u4e0b\u6703\u6709\u6a94\u6848\u76f8\u95dc\u7684\u61c9\u7528\uff0c\u6b64\u6642\u82e5\u5bb9\u5668\u91cd\u555f\u662f\u5426\u80fd\u5920\u78ba\u4fdd\u8a72\u6a94\u6848\u8cc7\u6599\u4e00\u81f4\u5c31\u662f\u4e00\u500b\u5f88\u5927\u7684\u554f\u984c\u3002"),(0,o.kt)("p",null,"\u8209\u4f8b\u4f86\u8aaa\uff0c\u4eca\u5929\u6709\u4e00\u500b MongoDB \u7684\u5bb9\u5668\u904b\u884c\u65bc Kubernetes \u4e4b\u4e2d\uff0c\u8a72 MongoDB \u7684\u5bb9\u5668\u6703\u900f\u904e\u5bb9\u5668\u5167\u7684\u6a94\u6848\u7cfb\u7d71\u5275\u5efa\u4e00\u500b\u8cc7\u6599\u593e\u4f86\u7dad\u8b77\u8a72\u8cc7\u6599\u5eab\u7684\u6240\u6709\u8cc7\u8a0a\u3002"),(0,o.kt)("p",null,"\u4eca\u5929\u82e5\u9047\u5230\u4e86\u4e00\u4e9b\u60c5\u5883\uff0c\u8b6c\u5982\u6a5f\u5668\u640d\u6bc0\uff0cRolling Upgrade \u6216\u662f\u5176\u4ed6\u7684\u60c5\u5f62\u5c0e\u81f4\u8a72 MongoDB \u7684 Pod \u9700\u8981\u91cd\u555f\u3002\u5728\u6b64\u60c5\u6cc1\u4e0b\uff0c\u65b0\u8d77\u4f86\u7684 MongoDB \u662f\u5426\u80fd\u5920\u7e7c\u7e8c\u4f7f\u7528\u4e4b\u524d\u7684\u8cc7\u6599? \u6291\u6216\u662f\u6bcf\u6b21\u90fd\u9700\u8981\u91cd\u65b0\u7dad\u8b77\u7576\u524d\u5bb9\u5668\u6240\u9700\u8981\u7684\u8cc7\u6599?"),(0,o.kt)("p",null,"\u9019\u500b\u8b70\u984c\u5c31\u662f\u6240\u8b02\u7684 Persistent Storage, \u6240\u8b02\u7684\u6301\u4e45\u5316\u5132\u5b58\u7cfb\u7d71\uff0c\u518d\u4e0a\u8ff0\u7684\u7bc4\u4f8b\u4e2d\u6211\u76f8\u4fe1\u5927\u90e8\u5206\u7684\u4eba\u90fd\u6703\u9700\u8981\u80fd\u5920\u8b93\u76f8\u95dc\u7684\u5bb9\u5668\u4f7f\u7528\u76f8\u540c\u7684\u8cc7\u6599\u4f86\u9032\u884c\u5b58\u53d6\uff0c\u56e0\u6b64\u63a5\u4e0b\u4f86\u5c31\u6703\u8ddf\u5927\u5bb6\u5206\u4eab\u4e00\u4e0b\u518d Kubernetes \u7684\u67b6\u69cb\u4e2d\uff0c\u9019\u65b9\u9762\u76f8\u95dc\u7684\u6982\u5ff5\uff0c\u7279\u5225\u662f ",(0,o.kt)("inlineCode",{parentName:"p"},"PersistentVolume"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"PersistentVolumeClame")," \u4ee5\u53ca ",(0,o.kt)("inlineCode",{parentName:"p"},"StorageClass")," \u9019\u4e09\u500b\u5e38\u898b\u7684\u7528\u6cd5\u3002"),(0,o.kt)("h1",{id:"overview"},"Overview"),(0,o.kt)("p",null,"\u9996\u5148\uff0c\u6211\u5011\u5148\u7528\u4e0b\u5217\u7684\u5716\u793a\u4f86\u770b\u4e00\u4e0b\u6574\u9ad4\u7684\u67b6\u69cb\uff0c\u9019\u500b\u67b6\u69cb\u5305\u542b\u4e86\u5f9e\u6700\u4e0a\u5c64 Pod \u4ee5\u53ca\u5230\u6700\u5e95\u5c64\u7684 Storage Provider."),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://i.imgur.com/btUPrUK.png",alt:"Imgur"})),(0,o.kt)("p",null,"\u57fa\u672c\u4e0a\uff0c\u6211\u5011\u5148\u5ffd\u7565 ",(0,o.kt)("inlineCode",{parentName:"p"},"StorageClass"),"\uff0c\u53ea\u9700\u8981\u6709 ",(0,o.kt)("inlineCode",{parentName:"p"},"PersistentVolume")," \u4ee5\u53ca ",(0,o.kt)("inlineCode",{parentName:"p"},"PersistentVolumeClaim")," \u5c31\u53ef\u4ee5\u6eff\u8db3\u6211\u5011\u7684\u9700\u6c42\uff0c\u800c ",(0,o.kt)("inlineCode",{parentName:"p"},"StorageClass")," \u53ea\u662f\u8b93\u9019\u4e00\u5207\u8b8a\u5f97\u66f4\u52a0\u7c21\u55ae\u8207\u65b9\u4fbf\u3002"),(0,o.kt)("p",null,"\u8a2d\u60f3\u4e00\u4e0b\uff0c\u5982\u679c\u4eca\u5929\u4f60\u662f\u4e00\u500b ",(0,o.kt)("inlineCode",{parentName:"p"},"Kubernetes")," \u67b6\u69cb\u7684\u8a2d\u8a08\u8005\uff0c\u70ba\u4e86\u89e3\u6c7a\u9019\u500b\u554f\u984c\uff0c\u4f60\u6703\u600e\u9ebc\u53bb\u8a2d\u8a08\u600e\u9ebc\u5132\u5b58\u76f8\u95dc\u7684\u6574\u9ad4\u67b6\u69cb?\n\u8a72\u67b6\u69cb\u4e2d\uff0c\u53ef\u80fd\u6703\u5e0c\u671b"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"\u53ef\u4ee5\u652f\u63f4\u4e0d\u540c\u7684\u5132\u5b58\u65b9\u5f0f\uff0c\u8b6c\u5982 Block Devie, FileSystem, \u540c\u6642 FileSystem \u53c8\u53ef\u4ee5\u6709\u4e0d\u540c\u7684\u652f\u63f4\uff0c\u8b6c\u5982 NFS,Ceph,GlusterFS\u3002\u540c\u6642\u4e5f\u5e0c\u671b\u80fd\u5920\u652f\u63f4 Public Cloud"),(0,o.kt)("li",{parentName:"ol"},"\u5bb9\u5668(Pod)\u53ef\u4ee5\u53bb\u5b58\u53d6\u8a72\u5132\u5b58\u7cfb\u7d71\uff0c\u900f\u904e\u67d0\u7a2e\u6620\u5c04\u65b9\u5f0f\uff0c\u5e0c\u671b\u53ef\u4ee5\u5728\u76f8\u540c\u7684",(0,o.kt)("inlineCode",{parentName:"li"},"key"),"\u7684\u60c5\u6cc1\u4e0b\u62ff\u5230\u76f8\u540c\u7684\u8cc7\u6599\u3002\u9019\u6a23\u5c31\u53ef\u4ee5\u78ba\u4fdd\u6211\u5011\u7684\u5bb9\u5668 (Pod) \u53ef\u4ee5\u518d\u91cd\u555f\u5f8c\u7e7c\u7e8c\u5b58\u53d6\u76f8\u540c\u7684\u8cc7\u6599\uff0c\u540c\u6642\u4e0d\u540c\u7684 Pod \u4e5f\u53ef\u4ee5\u6709\u6a5f\u6703\u5b58\u53d6\u5230\u76f8\u540c\u7684\u8cc7\u6599\uff0c\u53ea\u8981\u5927\u5bb6\u90fd\u4f7f\u7528\u76f8\u540c\u7684 ",(0,o.kt)("inlineCode",{parentName:"li"},"Key")),(0,o.kt)("li",{parentName:"ol"},"\u53ef\u4ee5\u6839\u64da\u4e0d\u540c\u7684\u9700\u6c42\u4f86\u4f7f\u7528\u5132\u5b58\u7a7a\u9593\uff0c\u8b6c\u5982\u7a7a\u9593\u5927\u5c0f\uff0c\u5b58\u53d6\u6a21\u5f0f\uff0c\u6548\u80fd\u9ad8\u4f4e\uff0c\u5feb\u7167\u7b49\u773e\u591a\u7279\u6027")),(0,o.kt)("p",null,"\u9996\u5148\u70ba\u4e86\u6eff\u8db3 ",(0,o.kt)("strong",{parentName:"p"},"(1)")," \u7684\u9700\u6c42\uff0c\u6703\u9700\u8981\u6709\u4e00\u5c64\u62bd\u8c61\u5c64\u4f86\u8655\u7406\uff0c\u5176\u80cc\u5f8c\u929c\u63a5\u5404\u7a2e\u5132\u5b58\u7cfb\u7d71\u7684\u5be6\u4f5c\uff0c\u4e26\u4e14\u63d0\u4f9b\u76f8\u95dc\u7684\u5132\u5b58\u4f7f\u7528\u65b9\u6cd5\u4f9b\u4e0a\u5c64\u4f7f\u7528\n\u540c\u6642\uff0c\u70ba\u4e86\u8b93\u6700\u4e0a\u5c64\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"Pod")," \u518d\u4f7f\u7528\u4e0a\u53ef\u4ee5\u4e0d\u9700\u8981\u8003\u616e\u5e95\u5c64\u5132\u5b58\u7cfb\u7d71\u7684\u7d30\u7bc0\uff0c\u9019\u908a\u6703\u5fc5\u9808\u8981\u4f7f\u7528\u66f4\u7c21\u55ae\u4e14\u7d71\u4e00\u7684\u683c\u5f0f\u4f86\u63cf\u8ff0\u8a72\u5132\u5b58\u7cfb\u7d71\uff0c\u56e0\u6b64\u9019\u908a\u4e5f\u9700\u8981\u4e00\u500b\u62bd\u8c61\u5c64\u7684\u8655\u7406"),(0,o.kt)("p",null,"\u5c07\u9019\u5169\u500b\u6982\u5ff5\u7d50\u5408\u8d77\u4f86\uff0c\u5176\u5be6\u5c31\u662f\u6240\u8b02\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"PersistentVolume")," \u4ee5\u53ca ",(0,o.kt)("inlineCode",{parentName:"p"},"PersistentVolumeClaim")," \u9019\u5169\u500b\u4ee3\u8868\u6027\u7684\u8cc7\u6e90\u3002"),(0,o.kt)("h2",{id:"persistentvolumepv"},"PersistentVolume(PV)"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"PersistentVolume(PV)")," \u4ee3\u8868\u7684\u5c31\u662f\u80cc\u5f8c\u5132\u5b58\u7cfb\u7d71\u7684\u53e2\u96c6\u8cc7\u6e90\uff0c\u56e0\u6b64\u5728\u6bcf\u500b ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u7684\u63cf\u8ff0\u4e2d\u90fd\u8981\u53bb\u63cf\u8ff0\u8a72 ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u6700\u5f8c\u8981\u929c\u63a5\u7684\u5132\u5b58\u7cfb\u7d71\u7684\u76f8\u95dc\u8cc7\u8a0a\uff0c\u8b6c\u5982\u5982\u679c\u662f ",(0,o.kt)("inlineCode",{parentName:"p"},"NFS")," \u7684\u8a71\uff0c\u5c31\u9700\u8981\u53bb\u63cf\u8ff0\u76f8\u95dc\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"Server IP")," \u4ee5\u53ca ",(0,o.kt)("inlineCode",{parentName:"p"},"ExportPath")," \u7b49 ",(0,o.kt)("inlineCode",{parentName:"p"},"NFS")," \u76f8\u95dc\u7684\u8cc7\u8a0a\u3002"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u4f5c\u70ba\u4e00\u500b\u8207\u5132\u5b58\u7cfb\u7d71\u929c\u63a5\u7684\u62bd\u8c61\u5c64\uff0c\u9664\u4e86\u5305\u542b\u5132\u5b58\u76f8\u95dc\u7684\u53c3\u6578\u5916\uff0c\u4e5f\u8981\u63d0\u4f9b\u4e00\u4e9b\u76f8\u540c\u7684\u53c3\u6578\u4f9b\u4e0a\u5c64\u4f7f\u7528\u3002 ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u7684\u5be6\u73fe\u5247\u8981\u6839\u64da\u9019\u4e9b\u53c3\u6578\u5617\u8a66\u53bb\u8ddf\u5f8c\u7aef\u7684\u5132\u5b58\u7cfb\u7d71\u8981\u6c42\u914d\u7f6e\u7b26\u5408\u76f8\u95dc\u9700\u6c42\u7684\u5132\u5b58\u7a7a\u9593\u4f9b\u5bb9\u5668\u4f7f\u7528\u3002"),(0,o.kt)("p",null,"\u63a5\u4e0b\u4f86\u770b\u4e00\u4e0b\u5c0d\u65bc\u4e00\u500b\u4ee3\u8868\u5132\u5b58\u7cfb\u7d71\u65bc\u53e2\u96c6\u5167\u8cc7\u6e90\u7684\u4ee3\u8868\uff0c\u5176\u672c\u8eab\u6709\u54ea\u4e9b\u76f8\u95dc\u7684\u53c3\u6578\u53ef\u4ee5\u4f7f\u7528"),(0,o.kt)("h3",{id:"volumemode"},"VolumeMode"),(0,o.kt)("p",null,"\u9996\u5148\u662f\u4e00\u500b\u6211\u89ba\u5f97\u5927\u5bb6\u6bd4\u8f03\u5c11\u6ce8\u610f\u4e5f\u6bd4\u8f03\u4e0d\u6703\u53bb\u4f7f\u7528\u7684\u53c3\u6578\uff0c\u6240\u8b02\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"VolumeMode")," \u4ee3\u8868\u7684\u662f\u5230\u5e95\u662f ",(0,o.kt)("inlineCode",{parentName:"p"},"FileSystem")," \u9084\u662f ",(0,o.kt)("inlineCode",{parentName:"p"},"Block Device"),".\n\u4e00\u822c\u6211\u5011\u5728\u4f7f\u7528\u7684\u90fd\u662f\u5df2\u7d93\u683c\u5f0f\u5316\u6210\u70ba ",(0,o.kt)("inlineCode",{parentName:"p"},"FileSystem")," \u7684\u985e\u578b\uff0c\u8b6c\u5982 ",(0,o.kt)("inlineCode",{parentName:"p"},"ext4"),",",(0,o.kt)("inlineCode",{parentName:"p"},"btrfs"),",",(0,o.kt)("inlineCode",{parentName:"p"},"zfs"),". \u7136\u800c\u6709\u4e9b\u61c9\u7528\u6703\u60f3\u8981\u76f4\u63a5\u4f7f\u7528 ",(0,o.kt)("inlineCode",{parentName:"p"},"BlockDevice")," \u4f86\u4f7f\u7528\uff0c\u8b6c\u5982\u4f7f\u7528 ",(0,o.kt)("inlineCode",{parentName:"p"},"/dev/sda5")," \u4e4b\u985e\u7684\u65b9\u5f0f\u3002\n\u9810\u8a2d\u7684\u60c5\u6cc1\u4e0b\u90fd\u9084\u662f ",(0,o.kt)("inlineCode",{parentName:"p"},"FileSystem"),"\uff0c\u56e0\u6b64\u6c92\u6709\u7279\u5225\u9700\u6c42\u7684\u8a71\u9019\u500b\u53c3\u6578\u4e0d\u592a\u9700\u8981\u8655\u7406\u3002"),(0,o.kt)("h3",{id:"capacity"},"Capacity"),(0,o.kt)("p",null,"\u7406\u60f3\u7684\u72c0\u6cc1\u4e0b\uff0c\u70ba\u4e86\u6709\u6548\u5730\u63a7\u5236\u8207\u7ba1\u7406\u5132\u5b58\u7a7a\u9593\uff0c\u80fd\u5920\u4e8b\u5148\u898f\u5283\u6240\u9700\u7684\u5bb9\u91cf\u5927\u5c0f\u4e26\u4e14\u8acb\u6c42\u76f8\u5c0d\u61c9\u7684\u5132\u5b58\u7a7a\u9593\u4f86\u4f7f\u7528\u662f\u500b\u6bd4\u8f03\u597d\u7684\u61c9\u7528\u65b9\u5f0f\u3002\n\u65bc\u6b64\u524d\u63d0\u4e0b\uff0c ",(0,o.kt)("inlineCode",{parentName:"p"},"Kubernetes")," \u63d0\u4f9b\u4e86\u900f\u904e ",(0,o.kt)("inlineCode",{parentName:"p"},"Capacity")," \u7684\u65b9\u5f0f\u4f86\u8868\u660e\u9019\u500b ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u5e0c\u671b\u5132\u5b58\u5f8c\u7aef\u6240\u63d0\u4f9b\u7684\u5132\u5b58\u7a7a\u9593\u81f3\u5c11\u8981\u6eff\u8db3\u9019\u5c0d\u61c9\u7684\u5927\u5c0f."),(0,o.kt)("p",null,"\u4ee5\u76ee\u524d\u898f\u5283\u7684\u85cd\u5716\u4f86\u8aaa\uff0c\u9664\u4e86\u55ae\u7d14\u7684\u5132\u5b58\u7a7a\u9593\u5927\u5c0f\u5916\uff0c\u672a\u4f86\u4e5f\u5e0c\u671b\u80fd\u5920\u898f\u5283\u4ee5\u6548\u80fd\u70ba\u8003\u616e\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"IOPS (Input/Otput Per Secsion)"),", \u8a73\u7d30\u7684\u53ef\u4ee5\u53c3\u95b1\n",(0,o.kt)("a",{parentName:"p",href:"https://git.k8s.io/community/contributors/design-proposals/scheduling/resources.md"},"Kubernetes Resource Model")),(0,o.kt)("p",null,"\u6b64\u5916\uff0c\u8981\u7279\u5225\u6ce8\u610f\u7684\u662f\uff0c\u4e26\u4e0d\u662f\u6240\u6709\u7684\u5132\u5b58\u7a7a\u9593\u90fd\u80fd\u5920\u4f9d\u7167\u9019\u500b\u9700\u6c42\u4f86\u6eff\u8db3\u5c0d\u61c9\u7684\u689d\u4ef6\uff0c\u8b6c\u5982\u4ee5 ",(0,o.kt)("inlineCode",{parentName:"p"},"NFS")," \u672c\u8eab\u5176\u5be6\u5c31\u4e0d\u652f\u63f4\u9019\u500b\u9078\u9805\u3002(\u4e0d\u652f\u63f4\u7684\u610f\u601d\u662f\u53ef\u4ee5\u8a2d\u5b9a\uff0c\u4f46\u662f\u5be6\u4f5c\u4e0a\u4e0d\u6703\u63a1\u7528)"),(0,o.kt)("h3",{id:"accessmode"},"AccessMode"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"AccessMode")," \u5247\u662f\u8a2d\u5b9a\u4f7f\u7528\u7aef\u53ef\u4ee5\u5982\u4f55\u4f7f\u7528\u9019\u500b\u5132\u5b58\u7a7a\u9593\uff0c\u4e3b\u8981\u9762\u5411\u7684\u5c0d\u8c61\u662f ",(0,o.kt)("inlineCode",{parentName:"p"},"\u8b80\u5beb")," \u7684\u8a2d\u5b9a\uff0c\u4ee5\u53ca\u662f\u5426\u53ef\u4ee5\u540c\u6642\u591a\u500b\u7bc0\u9ede\u9032\u884c",(0,o.kt)("inlineCode",{parentName:"p"},"\u8b80\u5beb"),"\u3002"),(0,o.kt)("p",null,"\u8a2d\u5b9a\u5206\u6210\u4e09\u7a2e"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"ReadWriteOnce\n\u8acb\u6c42\u5230\u7684\u8a72\u584a\u7a7a\u9593\u53ea\u80fd\u540c\u6642\u7d66\u4e00\u500b\u7bc0\u9ede\u4f7f\u7528\uff0c\u7bc0\u9ede\u4e0a\u7684\u5404\u7a2e\u5bb9\u5668\u4f7f\u7528\u53ef\u4ee5\u540c\u6642\n\u9032\u884c",(0,o.kt)("inlineCode",{parentName:"li"},"\u8b80\u53d6"),"\u6216\u662f",(0,o.kt)("inlineCode",{parentName:"li"},"\u5beb\u5165"),"\u7684\u52d5\u4f5c\u3002"),(0,o.kt)("li",{parentName:"ol"},"ReadOnlyMany\n\u8acb\u6c42\u5230\u7684\u8a72\u584a\u7a7a\u9593\u53ef\u4ee5\u540c\u6642\u7d66\u591a\u500b\u7bc0\u9ede\u4f7f\u7528\uff0c\u4f46\u662f\u7bc0\u9ede\u4e0a\u7684\u5404\u7a2e\u5bb9\u5668\u4f7f\u7528\u90fd\u53ea\u80fd\u57fa\u65bc",(0,o.kt)("inlineCode",{parentName:"li"},"\u8b80\u53d6"),"\u9019\u7a2e\u6c92\u6709\u5beb\u5165\u7684\u64cd\u4f5c\u3002"),(0,o.kt)("li",{parentName:"ol"},"ReadWrtieMany\n\u8acb\u6c42\u5230\u7684\u8a72\u584a\u7a7a\u9593\u53ef\u4ee5\u540c\u6642\u7d66\u591a\u500b\u7bc0\u9ede\u4f7f\u7528\uff0c\u4e14\u5927\u5bb6\u8981\u9032\u884c\u8b80\u53d6\u6216\u662f\u5beb\u5165\u7b49\u52d5\u4f5c\u90fd\u662f\u6c92\u6709\u554f\u984c\u7684\u3002")),(0,o.kt)("p",null,"\u9019\u908a\u6bd4\u8f03\u6709\u8da3\u7684\u662f\u6240\u6709\u7684\u540c\u6b65\u55ae\u4f4d\u90fd\u662f\u57fa\u65bc",(0,o.kt)("inlineCode",{parentName:"p"},"\u7bc0\u9ede"),"\u800c\u975e\u57fa\u65bc",(0,o.kt)("inlineCode",{parentName:"p"},"\u5bb9\u5668"),"\uff0c\u6211\u500b\u4eba\u7684\u7406\u89e3\u662f\u56e0\u70ba ",(0,o.kt)("inlineCode",{parentName:"p"},"Kubernetes")," \u5e95\u5c64\u7684\u5be6\u4f5c\u6703\u662f\u5728\u7bc0\u9ede\u4e0a\u6839\u64da\u9700\u6c42\u7522\u751f\u4e00\u500b\u5c0d\u61c9\u7684\u5132\u5b58\u7a7a\u9593\uff0c\u63a5\u8005\u8a72\u5132\u5b58\u7a7a\u9593\u5247\u662f\u6703\u900f\u904e\u5bb9\u5668\u672c\u8eab\u7684\u6620\u5c04\u65b9\u5f0f\uff0c\u639b\u8f09\u5230\u591a\u500b\u5bb9\u5668\u5167\u53bb\u9032\u884c\u5beb\u5165\u5b58\u53d6\u3002"),(0,o.kt)("p",null,"\u6b64\u5916\uff0c\u5982\u679c\u4f7f\u7528\u60c5\u5883\u662f\u5982 ",(0,o.kt)("inlineCode",{parentName:"p"},"ReadWriteMany")," \u6240\u6558\u8ff0\uff0c\u8a72\u5132\u5b58\u7a7a\u9593\u53ef\u4ee5\u518d\u591a\u500b\u7bc0\u9ede\u4e0a\u540c\u6642\u9032\u884c\u8b80\u5beb\uff0c\u8981\u5982\u4f55\u78ba\u4fdd\u6a94\u6848\u5167\u5bb9\u7684\u4e00\u81f4\u6027?\n\u9019\u908a\u7684\u5247\u662f\u5c0d\u61c9\u7684\u5132\u5b58\u7cfb\u7d71\u80cc\u5f8c\u8981\u81ea\u5df1\u8ca0\u8cac\u8655\u7406\uff0c",(0,o.kt)("inlineCode",{parentName:"p"},"Kubernetes")," \u672c\u8eab\u4e0d\u6d89\u53ca\u4efb\u4f55\u5132\u5b58\u7cfb\u7d71\u7684\u5be6\u73fe\u8207\u4fdd\u8b77\u3002\n\u56e0\u6b64\u80fd\u5920\u652f\u63f4 ",(0,o.kt)("inlineCode",{parentName:"p"},"ReadWriteMany")," \u7684\u5132\u5b58\u7a7a\u9593\u5176\u5be6\u4e26\u4e0d\u591a\uff0c\u5982 ",(0,o.kt)("inlineCode",{parentName:"p"},"NFS")," \u6216\u662f\u4e00\u4e9b\u5206\u6563\u5f0f\u6a94\u6848\u7cfb\u7d71 ",(0,o.kt)("inlineCode",{parentName:"p"},"Ceph/GlusterFS"),"."),(0,o.kt)("h3",{id:"reclaim-policy"},"Reclaim Policy"),(0,o.kt)("p",null,"\u5c0d\u65bc ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u4f86\u8aaa\uff0c",(0,o.kt)("inlineCode",{parentName:"p"},"Reclaim Policy")," \u7684\u542b\u7fa9\u5247\u662f\u7576\u4f7f\u7528\u81ea\u5df1\u7684",(0,o.kt)("inlineCode",{parentName:"p"},"PVC"),"\u88ab\u522a\u9664\u6642\uff0c\u9019\u500b",(0,o.kt)("inlineCode",{parentName:"p"},"PV"),"\u8981\u5982\u4f55\u53bb\u8655\u7406\u8981\u4f86\u7684\u5132\u5b58\u7a7a\u9593\u3002"),(0,o.kt)("p",null,"\u8209\u4f8b\u4f86\u8aaa\uff0c\u5047\u5982\u6211\u5e0c\u671b\u9019\u584a\u5132\u5b58\u7a7a\u9593\u7684\u8cc7\u6599\u53ef\u4ee5\u91cd\u8907\u88ab\u5229\u7528\uff0c\u6211\u5e0c\u671b\u9019\u4e9b\u8cc7\u6599\u7684\u522a\u6e1b\u90fd\u662f\u7531\u7ba1\u7406\u54e1\u6216\u662f\u4f7f\u7528\u8005\u81ea\u884c\u8655\u7406\uff0c\u5247\u6211\u5011\u61c9\u8a72\u8981\u5c07\u8a72 ",(0,o.kt)("inlineCode",{parentName:"p"},"Policy")," \u8a2d\u5b9a\u6210 ",(0,o.kt)("inlineCode",{parentName:"p"},"Retain"),"."),(0,o.kt)("p",null,"\u7136\u800c\u5176\u4ed6\u7684\u60c5\u6cc1\u4e0b\uff0c\u53ef\u80fd\u6703\u5e0c\u671b\u7576 ",(0,o.kt)("inlineCode",{parentName:"p"},"PVC")," \u88ab\u79fb\u9664\u5f8c\uff0c\u5c31\u5c07\u5c0d\u61c9\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u4e00\u4f75\u522a\u9664\uff0c\u76f4\u63a5\u5c07\u8a72\u5132\u5b58\u7a7a\u9593\u79fb\u9664\uff0c\u56e0\u70ba\u6c92\u6709\u9700\u8981\u91cd\u8907\u5229\u7528\u7684\u60c5\u5883\u3002\n\u90a3\u5c31\u53ef\u4ee5\u5c07\u8a72 ",(0,o.kt)("inlineCode",{parentName:"p"},"Policy")," \u5ba3\u544a\u70ba ",(0,o.kt)("inlineCode",{parentName:"p"},"Delete")),(0,o.kt)("p",null,"\u4f7f\u7528\u4e0a\u9084\u662f\u6839\u64da\u4f7f\u7528\u60c5\u5883\u4f86\u8a2d\u5b9a\uff0c\u6c92\u6709\u4e00\u5b9a\u7684\u5c0d\u932f\u8207\u6700\u597d\u7684\u9078\u64c7"),(0,o.kt)("h3",{id:"class"},"Class"),(0,o.kt)("p",null,"Class \u985e\u4f3c\u6a19\u7c64\u7684\u6982\u5ff5\uff0c\u9019\u908a\u5148\u8ac7\u7c21\u55ae\u7684\u6982\u5ff5\uff0c\u53ef\u4ee5\u900f\u904e\u5c0d ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u8a2d\u5b9a\u8a72 ",(0,o.kt)("inlineCode",{parentName:"p"},"Class"),"(\u5be6\u969b\u4e0a\u5728 Yaml \u4e2d\u53eb\u505a ",(0,o.kt)("inlineCode",{parentName:"p"},"StorageClassName"),"\uff09\u4f86\u9650\u5236\u53ea\u6709\u542b\u6709\u76f8\u540c\u6a19\u7c64\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"PVC")," \u53ef\u4ee5\u4f7f\u7528\u3002"),(0,o.kt)("p",null,"\u8b6c\u5982\u6211\u5011\u53ef\u4ee5\u91dd\u5c0d\u9019\u4e9b ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u8a2d\u5b9a\u4e0d\u540c\u7684\u6a19\u7c64\uff0c\u6709\u53ef\u80fd\u662f ",(0,o.kt)("inlineCode",{parentName:"p"},"SSD")," \u6216\u662f\u6162\u901f\u7684",(0,o.kt)("inlineCode",{parentName:"p"},"HDD"),", \u7136\u5f8c\u6700\u4e0a\u5c64\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"PVC")," \u53ef\u4ee5\u518d\u6839\u64da\u9700\u6c42\u8207\u6a19\u7c64\u4f86\u5f9e\u7279\u5b9a\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u4e2d\u9078\u51fa\u4e00\u500b\u7b26\u5408\u898f\u5247\u7684\u5132\u5b58\u7a7a\u9593\u4f9b\u4e0a\u5c64\u4f7f\u7528\u3002"),(0,o.kt)("p",null,"\u5be6\u969b\u4e0a ",(0,o.kt)("inlineCode",{parentName:"p"},"Class")," \u5c0d\u65bc ",(0,o.kt)("inlineCode",{parentName:"p"},"StorageClass")," \u90a3\u908a\u9084\u6709\u5225\u7684\u7528\u9014\uff0c\u9019\u500b\u90e8\u5206\u7b49\u5230\u5f8c\u9762\u518d\u4f86\u8a73\u8ac7\u3002"),(0,o.kt)("h3",{id:"claim"},"Claim"),(0,o.kt)("p",null,"\u9019\u662f\u4e00\u500b\u5728\u5b98\u65b9\u6587\u4ef6\u4e2d\u6c92\u6709\u63d0\u5230\u7684\u53c3\u6578\uff0c\u4f46\u662f\u67d0\u4e9b\u60c5\u6cc1\u4e0b\u9084\u6eff\u597d\u7528\u7684\uff0c\u53ef\u4ee5\u900f\u904e\u8a72\u53c3\u6578\u53bb\u63cf\u8ff0\u6211\u53ea\u6709\u7279\u5b9a\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"PVC")," \u80fd\u5920\u4f7f\u7528\u8a72 ",(0,o.kt)("inlineCode",{parentName:"p"},"PV"),", \u9019\u90e8\u5206\u5be6\u969b\u4e0a\u662f\u900f\u904e ",(0,o.kt)("inlineCode",{parentName:"p"},"PVC")," \u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"namespace")," \u4ee5\u53ca ",(0,o.kt)("inlineCode",{parentName:"p"},"meta name")," \u4f86\u9032\u884c\u4e00\u500b\u6620\u5c04\uff0c\u4e26\u4e14\u900f\u904e\u9019\u500b\u65b9\u5f0f\u53ef\u4ee5\u5c07\u7279\u5b9a\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u8207 ",(0,o.kt)("inlineCode",{parentName:"p"},"PVC")," \u7d66\u7d81\u5b9a\u3002"),(0,o.kt)("p",null,"\u8a73\u7d30\u7684\u7528\u6cd5\u53ef\u4ee5\u53c3\u95b1 ",(0,o.kt)("a",{parentName:"p",href:"https://stackoverflow.com/questions/34282704/can-a-pvc-be-bound-to-a-specific-pv"},"can-a-pvc-be-bound-to-a-specific-pv")),(0,o.kt)("h3",{id:"mount-options"},"Mount Options"),(0,o.kt)("p",null,"\u4e0a\u8ff0\u7684\u6240\u6709\u9078\u9805\u90fd\u6bd4\u8f03\u504f\u5411\u5132\u5b58\u7a7a\u9593\u7684\u80fd\u529b\u8207\u7279\u6027\uff0c\u800c\u9019\u500b ",(0,o.kt)("inlineCode",{parentName:"p"},"Mount Options")," \u5247\u662f\u63cf\u8ff0\u7576 ",(0,o.kt)("inlineCode",{parentName:"p"},"Kubernetes")," \u53e2\u96c6\u4e2d\u7684\u7bc0\u9ede\u60f3\u8981\u639b\u8f09\u9019\u500b\u76ee\u6a19\u7684\u5132\u5b58\u7a7a\u9593\u6642\uff0c\u662f\u5426\u6709\u4e00\u4e9b\u984d\u5916\u7684\u53c3\u6578\u53ef\u4ee5\u5339\u914d\u8207\u4f7f\u7528."),(0,o.kt)("p",null,"\u95dc\u65bc ",(0,o.kt)("inlineCode",{parentName:"p"},"Mount Options")," \u7684\u8a0e\u8ad6\u8207\u69cb\u60f3\uff0c\u53ef\u4ee5\u76f4\u63a5\u53c3\u95b1 ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/enhancements/issues/168"},"Support Volume Mount Options #168\n")),(0,o.kt)("h3",{id:"others"},"Others"),(0,o.kt)("p",null,"\u770b\u4e86\u9019\u9ebc\u591a\u53c3\u6578\uff0c\u90a3\u5230\u5e95\u8981\u5982\u4f55\u53bb\u63cf\u8ff0\u80cc\u5f8c\u7684\u5132\u5b58\u7a7a\u9593\u8a2d\u5b9a?\n\u5be6\u969b\u4e0a\u5728 ",(0,o.kt)("inlineCode",{parentName:"p"},"Yaml")," \u4e2d\u4e26\u6c92\u6709\u4e00\u500b\u56fa\u5b9a\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"key")," \u53bb\u63cf\u8ff0\u5230\u5e95\u8a72\u5982\u4f55\u4f7f\u7528\u80cc\u5f8c\u7684\u5132\u5b58\u7a7a\u9593\u3002\u53cd\u800c\u662f\u6bcf\u500b\u5132\u5b58\u8a2d\u5b9a\u90fd\u6703\u6709\u4e00\u500b\u5c6c\u65bc\u81ea\u5df1\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"key"),"\uff0c\u7136\u5f8c\u518d\u8a72 ",(0,o.kt)("inlineCode",{parentName:"p"},"key")," \u5e95\u4e0b\u53bb\u63cf\u8ff0\u5c0d\u61c9\u7684\u8cc7\u6e90\u8207\u53c3\u6578\u3002"),(0,o.kt)("p",null,"\u8209\u4f8b\u4f86\u8aaa\u4f7f\u7528 ",(0,o.kt)("inlineCode",{parentName:"p"},"NFS")," \u8ddf\u4f7f\u7528 ",(0,o.kt)("inlineCode",{parentName:"p"},"GlusterFS")," \u5247\u6703\u5b8c\u5168\u4e0d\u540c\uff0c\u53ef\u4ee5\u53c3\u8003\u4e0b\u5217\u5169\u500b ",(0,o.kt)("inlineCode",{parentName:"p"},"Yaml")," \u6a94\u6848"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml="},"apiVersion: v1\nkind: PersistentVolume\nmetadata:\n  name: pv0003\nspec:\n  capacity:\n    storage: 5Gi\n  volumeMode: Filesystem\n  accessModes:\n    - ReadWriteOnce\n  persistentVolumeReclaimPolicy: Recycle\n  storageClassName: slow\n  mountOptions:\n    - hard\n    - nfsvers=4.1\n  nfs:\n    path: /tmp\n    server: 172.17.0.2\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml="},'apiVersion: v1\nkind: PersistentVolume\nmetadata:\n  name: gluster-default-volume\n  annotations:\n    pv.beta.kubernetes.io/gid: "590"\nspec:\n  capacity:\n    storage: 2Gi\n  accessModes:\n    - ReadWriteMany\n  glusterfs:\n    endpoints: glusterfs-cluster\n    path: myVol1\n    readOnly: false\n  persistentVolumeReclaimPolicy: Retain\n')),(0,o.kt)("p",null,"\u9019\u908a\u7684\u539f\u56e0\u4e3b\u8981\u662f\u56e0\u70ba ",(0,o.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u5f8c\u7aef\u7684\u5be6\u73fe(",(0,o.kt)("inlineCode",{parentName:"p"},"golang"),") \u5728\u9032\u884c\u7269\u4ef6\u7684\u89e3\u6790\u7684\u6642\u5019\uff0c\u662f\u63a1\u7528\u4e0b\u5217\u7684\u7d50\u69cb, \u6709\u8208\u8da3\u7684\u4eba\u53ef\u4ee5\u7814\u7a76\u4e00\u4e0b\u5176\u80cc\u5f8c\u5be6\u73fe\u539f\u7406\u7684\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-golang="},'type PersistentVolumeSource struct {\n    // GCEPersistentDisk represents a GCE Disk resource that is attached to a\n    // kubelet\'s host machine and then exposed to the pod. Provisioned by an admin.\n    // More info: https://kubernetes.io/docs/concepts/storage/volumes#gcepersistentdisk\n    // +optional\n    GCEPersistentDisk *GCEPersistentDiskVolumeSource `json:"gcePersistentDisk,omitempty" protobuf:"bytes,1,opt,name=gcePersistentDisk"`\n    // AWSElasticBlockStore represents an AWS Disk resource that is attached to a\n    // kubelet\'s host machine and then exposed to the pod.\n    // More info: https://kubernetes.io/docs/concepts/storage/volumes#awselasticblockstore\n    // +optional\n    AWSElasticBlockStore *AWSElasticBlockStoreVolumeSource `json:"awsElasticBlockStore,omitempty" protobuf:"bytes,2,opt,name=awsElasticBlockStore"`\n    // HostPath represents a directory on the host.\n    // Provisioned by a developer or tester.\n    // This is useful for single-node development and testing only!\n    // On-host storage is not supported in any way and WILL NOT WORK in a multi-node cluster.\n    // More info: https://kubernetes.io/docs/concepts/storage/volumes#hostpath\n    // +optional\n    HostPath *HostPathVolumeSource `json:"hostPath,omitempty" protobuf:"bytes,3,opt,name=hostPath"`\n    // Glusterfs represents a Glusterfs volume that is attached to a host and\n    // exposed to the pod. Provisioned by an admin.\n    // More info: https://releases.k8s.io/HEAD/examples/volumes/glusterfs/README.md\n    // +optional\n    Glusterfs *GlusterfsPersistentVolumeSource `json:"glusterfs,omitempty" protobuf:"bytes,4,opt,name=glusterfs"`\n    // NFS represents an NFS mount on the host. Provisioned by an admin.\n    // More info: https://kubernetes.io/docs/concepts/storage/volumes#nfs\n    // +optional\n    NFS *NFSVolumeSource `json:"nfs,omitempty" protobuf:"bytes,5,opt,name=nfs"`\n    // RBD represents a Rados Block Device mount on the host that shares a pod\'s lifetime.\n    // More info: https://releases.k8s.io/HEAD/examples/volumes/rbd/README.md\n    // +optional\n    RBD *RBDPersistentVolumeSource `json:"rbd,omitempty" protobuf:"bytes,6,opt,name=rbd"`\n    // ISCSI represents an ISCSI Disk resource that is attached to a\n    // kubelet\'s host machine and then exposed to the pod. Provisioned by an admin.\n    // +optional\n    ISCSI *ISCSIPersistentVolumeSource `json:"iscsi,omitempty" protobuf:"bytes,7,opt,name=iscsi"`\n    // Cinder represents a cinder volume attached and mounted on kubelets host machine\n    // More info: https://releases.k8s.io/HEAD/examples/mysql-cinder-pd/README.md\n    // +optional\n    Cinder *CinderPersistentVolumeSource `json:"cinder,omitempty" protobuf:"bytes,8,opt,name=cinder"`\n    // CephFS represents a Ceph FS mount on the host that shares a pod\'s lifetime\n    // +optional\n    CephFS *CephFSPersistentVolumeSource `json:"cephfs,omitempty" protobuf:"bytes,9,opt,name=cephfs"`\n    // FC represents a Fibre Channel resource that is attached to a kubelet\'s host machine and then exposed to the pod.\n    // +optional\n    FC *FCVolumeSource `json:"fc,omitempty" protobuf:"bytes,10,opt,name=fc"`\n    // Flocker represents a Flocker volume attached to a kubelet\'s host machine and exposed to the pod for its usage. This depends on the Flocker control service being running\n    // +optional\n    Flocker *FlockerVolumeSource `json:"flocker,omitempty" protobuf:"bytes,11,opt,name=flocker"`\n    // FlexVolume represents a generic volume resource that is\n    // provisioned/attached using an exec based plugin.\n    // +optional\n    FlexVolume *FlexPersistentVolumeSource `json:"flexVolume,omitempty" protobuf:"bytes,12,opt,name=flexVolume"`\n    // AzureFile represents an Azure File Service mount on the host and bind mount to the pod.\n    // +optional\n    AzureFile *AzureFilePersistentVolumeSource `json:"azureFile,omitempty" protobuf:"bytes,13,opt,name=azureFile"`\n    // VsphereVolume represents a vSphere volume attached and mounted on kubelets host machine\n    // +optional\n    VsphereVolume *VsphereVirtualDiskVolumeSource `json:"vsphereVolume,omitempty" protobuf:"bytes,14,opt,name=vsphereVolume"`\n    // Quobyte represents a Quobyte mount on the host that shares a pod\'s lifetime\n    // +optional\n    Quobyte *QuobyteVolumeSource `json:"quobyte,omitempty" protobuf:"bytes,15,opt,name=quobyte"`\n    // AzureDisk represents an Azure Data Disk mount on the host and bind mount to the pod.\n    // +optional\n    AzureDisk *AzureDiskVolumeSource `json:"azureDisk,omitempty" protobuf:"bytes,16,opt,name=azureDisk"`\n    // PhotonPersistentDisk represents a PhotonController persistent disk attached and mounted on kubelets host machine\n    PhotonPersistentDisk *PhotonPersistentDiskVolumeSource `json:"photonPersistentDisk,omitempty" protobuf:"bytes,17,opt,name=photonPersistentDisk"`\n    // PortworxVolume represents a portworx volume attached and mounted on kubelets host machine\n    // +optional\n    PortworxVolume *PortworxVolumeSource `json:"portworxVolume,omitempty" protobuf:"bytes,18,opt,name=portworxVolume"`\n    // ScaleIO represents a ScaleIO persistent volume attached and mounted on Kubernetes nodes.\n    // +optional\n    ScaleIO *ScaleIOPersistentVolumeSource `json:"scaleIO,omitempty" protobuf:"bytes,19,opt,name=scaleIO"`\n    // Local represents directly-attached storage with node affinity\n    // +optional\n    Local *LocalVolumeSource `json:"local,omitempty" protobuf:"bytes,20,opt,name=local"`\n    // StorageOS represents a StorageOS volume that is attached to the kubelet\'s host machine and mounted into the pod\n    // More info: https://releases.k8s.io/HEAD/examples/volumes/storageos/README.md\n    // +optional\n    StorageOS *StorageOSPersistentVolumeSource `json:"storageos,omitempty" protobuf:"bytes,21,opt,name=storageos"`\n    // CSI represents storage that handled by an external CSI driver (Beta feature).\n    // +optional\n    CSI *CSIPersistentVolumeSource `json:"csi,omitempty" protobuf:"bytes,22,opt,name=csi"`\n}\n')),(0,o.kt)("h2",{id:"persistentvolumeclaimpvc"},"PersistentVolumeClaim(PVC)"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"PersistentVolume")," \u662f\u8207\u5f8c\u7aef\u5132\u5b58\u7a7a\u9593\u9023\u63a5\u7684\u53e2\u96c6\u8cc7\u6e90\uff0c\u800c ",(0,o.kt)("inlineCode",{parentName:"p"},"PersistentVolumeClaim(PVC)")," \u5247\u662f\u929c\u63a5 ",(0,o.kt)("inlineCode",{parentName:"p"},"Pod")," \u8207 ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u7684\u4e2d\u4ecb\u62bd\u8c61\u5c64\uff0c\u53ef\u4ee5\u8aaa\u662f\u5bb9\u5668\u672c\u8eab\u5c0d\u65bc\u5132\u5b58\u9700\u6c42\u7684\u8cc7\u6e90\u8acb\u6c42\u3002"),(0,o.kt)("p",null,"\u4f7f\u7528\u4e0a\uff0c",(0,o.kt)("inlineCode",{parentName:"p"},"Pod")," \u672c\u8eab\u6703\u53bb\u63cf\u8ff0\u60f3\u8981\u4f7f\u7528\u54ea\u500b ",(0,o.kt)("inlineCode",{parentName:"p"},"PVC"),"\uff0c\u4e26\u4e14\u5e0c\u671b\u628a\u8a72 ",(0,o.kt)("inlineCode",{parentName:"p"},"PVC")," \u639b\u8f09\u5230 ",(0,o.kt)("inlineCode",{parentName:"p"},"Pod")," \u5167\u4f7f\u7528\u3002\n\u800c ",(0,o.kt)("inlineCode",{parentName:"p"},"PVC")," \u672c\u8eab\u5247\u662f\u6703\u6839\u64da\u81ea\u8eab\u7684\u9700\u6c42\uff0c\u53bb",(0,o.kt)("strong",{parentName:"p"},"\u627e\u5c0b\u662f\u5426\u6709\u7b26\u5408\u7684PV"),"\u53ef\u4ee5\u4f7f\u7528\uff0c\u4e26\u4e14\u5c07\u5176\u8a72 ",(0,o.kt)("inlineCode",{parentName:"p"},"PVC")," \u8207\u5c0d\u61c9\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u9032\u884c\u4e00\u500b ",(0,o.kt)("inlineCode",{parentName:"p"},"Binding")," \u7684\u52d5\u4f5c\u3002"),(0,o.kt)("h3",{id:"resourecs"},"Resourecs"),(0,o.kt)("p",null,"\u5982\u540c\u4e0a\u9762\u6240\u8ff0\uff0c ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u6240\u63cf\u8ff0\u7684\u662f\u53e2\u96c6\u8cc7\u6e90\uff0c\u800c",(0,o.kt)("inlineCode",{parentName:"p"},"PVC"),"\u63cf\u8ff0\u7684\u5247\u662f\u8cc7\u6e90\u8acb\u6c42\uff0c\u5728\u53c3\u6578\u65b9\u9762\u57fa\u672c\u4e0a ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u8ddf ",(0,o.kt)("inlineCode",{parentName:"p"},"PVC")," \u90fd\u6703\u6709\u76f8\u540c\u7684\u63cf\u8ff0\u3002\u4e0d\u8ad6\u662f ",(0,o.kt)("inlineCode",{parentName:"p"},"Capacity"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"AccessMode"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"VolumeMode"),"."),(0,o.kt)("p",null,"\u56e0\u6b64 ",(0,o.kt)("inlineCode",{parentName:"p"},"PVC")," \u53ea\u6703\u53bb\u627e\u5c0b\u80fd\u5920\u7b26\u5408\u5176\u689d\u4ef6\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u4f86\u9032\u884c\u6311\u9078\u7684\u52d5\u4f5c\u3002"),(0,o.kt)("h3",{id:"binding"},"Binding"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Binding")," \u9019\u908a\u62c9\u51fa\u4f86\u7279\u5225\u89e3\u91cb\u4e00\u4e0b\uff0c\u5be6\u969b\u4e0a ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u8207 ",(0,o.kt)("inlineCode",{parentName:"p"},"PVC")," \u7684\u6982\u5ff5\n",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u4ee3\u8868\u7684\u662f\u5f9e\u5f8c\u7aef\u5132\u5b58\u8a2d\u5099\u6839\u64da\u8cc7\u6e90\u9700\u6c42\u6240\u53d6\u5f97\u7684\u5132\u5b58\u7a7a\u9593\u3002\n",(0,o.kt)("inlineCode",{parentName:"p"},"PVC")," \u5247\u662f\u5c0d\u65bc\u5e0c\u671b\u5f9e",(0,o.kt)("inlineCode",{parentName:"p"},"\u773e\u591a\u7684PV"),"\u4e2d\u9078\u51fa\u4e00\u500b\u7b26\u5408\u9700\u6c42\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"PV"),"\u4f86\u4f7f\u7528\uff0c\u9019\u500b\u6311\u9078\u7684\u904e\u7a0b\u5c31\u7a31\u70ba ",(0,o.kt)("inlineCode",{parentName:"p"},"Binding"),"."),(0,o.kt)("p",null,"\u8209\u4f8b\u4f86\u8aaa\uff0c\u4eca\u5929\u7cfb\u7d71\u4e2d\u5275\u5efa\u4e86\u4e09\u500b ",(0,o.kt)("inlineCode",{parentName:"p"},"PV"),", \u6bcf\u500b ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u90fd\u5ba3\u7a31\u81ea\u5df1\u6709 ",(0,o.kt)("inlineCode",{parentName:"p"},"50Gb")," \u7684\u7a7a\u9593\u53ef\u4ee5\u4f7f\u7528\u3002\u9019\u6642\u5019\u6709\u500b ",(0,o.kt)("inlineCode",{parentName:"p"},"PVC")," \u7684\u689d\u4ef6\u662f\u5e0c\u671b\u627e\u5230\u4e00\u500b\u81f3\u5c11\u6709 ",(0,o.kt)("inlineCode",{parentName:"p"},"20Gb")," \u7a7a\u9593\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u4f86\u4f7f\u7528\u3002\n\u90a3\u5be6\u969b\u4e0a\u9019\u4e09\u500b ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u90fd\u53ef\u4ee5\u88ab\u4f7f\u7528\uff0c\u81f3\u65bc\u6700\u5f8c\u662f\u54ea\u500b",(0,o.kt)("inlineCode",{parentName:"p"},"PV"),"\u88ab\u9078\u5230\uff0c\u6211\u9019\u908a\u6c92\u770b\u5230\u592a\u591a\u8a73\u7d30\u4e14\u53ef\u8b49\u5be6\u7684\u8aaa\u6cd5\uff0c\u4e4b\u5f8c\u82e5\u6709\u770b\u5230\u6703\u518d\u88dc\u5145\u3002"),(0,o.kt)("p",null,"\u5982\u679c\u4eca\u5929\u6709\u7279\u5225\u7684\u9700\u6c42\uff0c\u5e0c\u671b\u7279\u5b9a\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"PVC")," \u53ef\u4ee5\u6311\u9078\u5230\u7279\u5b9a\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"PV"),", \u9019\u908a\u53ef\u4ee5\u900f\u904e\u524d\u8ff0\u8b1b\u904e\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"Claim")," \u53c3\u6578\u4f86\u9054\u6210\uff0c\u53ea\u8981\u65bc ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u7684\u8a2d\u5b9a\u4e2d\u53bb\u63cf\u8ff0\u5c0d\u61c9 ",(0,o.kt)("inlineCode",{parentName:"p"},"Claim")," \u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"namespace/name"),", \u4e26\u4e14\u8207\u76ee\u6a19\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"PVC")," \u4e2d\u53bb\u4f7f\u7528\u9019\u4e9b\u6578\u503c\uff0c\u5c31\u53ef\u4ee5\u78ba\u4fdd\u8a72 ",(0,o.kt)("inlineCode",{parentName:"p"},"PVC")," \u4e00\u5b9a\u6703\u7528\u5230\u8a72 ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u4e86\u3002"),(0,o.kt)("h2",{id:"pvpvc"},"PV/PVC"),(0,o.kt)("p",null,"\u6211\u5011\u91cd\u65b0\u518d\u6aa2\u8996\u4e00\u6b21\u525b\u525b\u770b\u904e\u7684\u5716\u8868\n",(0,o.kt)("img",{parentName:"p",src:"https://i.imgur.com/btUPrUK.png",alt:"Imgur"})),(0,o.kt)("p",null,"\u900f\u904e\u524d\u8ff0\u5c0d\u65bc ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u8207 ",(0,o.kt)("inlineCode",{parentName:"p"},"PVC")," \u6982\u5ff5\u7684\u95e1\u8ff0\uff0c\u6211\u5011\u73fe\u5728\u53ef\u4ee5\u77e5\u9053"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Pod \u88e1\u9762\u6703\u63cf\u8ff0 ",(0,o.kt)("inlineCode",{parentName:"li"},"Volume"),", \u800c ",(0,o.kt)("inlineCode",{parentName:"li"},"Volume")," \u5247\u662f\u6703\u63cf\u8ff0\u5c0d\u61c9\u7684 ",(0,o.kt)("inlineCode",{parentName:"li"},"PVC")," \u540d\u7a31"),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"PVC")," \u5be6\u969b\u4e0a\u6703\u6839\u64da\u81ea\u5df1\u7684\u8cc7\u6e90\u53bb\u7cfb\u7d71\u4e2d\u627e\u5230\u7b26\u5408\u9700\u6c42\u7684\u53e2\u96c6\u5132\u5b58\u8cc7\u6e90",(0,o.kt)("inlineCode",{parentName:"li"},"PV"),", \u4e26\u4e14\u5c07\u9019\u5169\u8005\u7d66 ",(0,o.kt)("inlineCode",{parentName:"li"},"Binding")," \u8d77\u4f86"),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"PV")," \u5247\u662f\u6703\u8ca0\u8cac\u8ddf\u5c0d\u61c9\u7684\u5f8c\u7aef\u5132\u5b58\u8a2d\u5099\u9032\u884c\u9023\u63a5\uff0c\u8a73\u7d30\u7684\u63cf\u8ff0\u8981\u5982\u4f55\u4f7f\u7528\u5f8c\u7aef\u5132\u5b58\u8cc7\u6e90")),(0,o.kt)("p",null,"\u5c07\u9019\u500b\u5de5\u4f5c\u6d41\u7a0b\u7528\u5be6\u969b\u4e0a\u64cd\u4f5c\u7684\u7528\u6cd5\u4f86\u770b\uff0c\u7cfb\u7d71\u7ba1\u7406\u54e1\u8207\u53e2\u96c6\u4f7f\u7528\u8005\u8981\u5982\u4f55\u5354\u540c\u5408\u4f5c\u4f86\u4f7f\u7528\u5462?\n\u8209\u4e00\u500b\u7c21\u55ae\u7684\u7bc4\u4f8b\u4f86\u8aaa"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"\u9996\u5148\uff0c\u7cfb\u7d71\u7ba1\u7406\u54e1\u5fc5\u9808\u8981\u5148\u6839\u64da\u7cfb\u7d71\u60c5\u5883\u8207\u67b6\u69cb\u5275\u5efa\u597d\u76f8\u5c0d\u61c9\u7684 ",(0,o.kt)("inlineCode",{parentName:"li"},"PV")),(0,o.kt)("li",{parentName:"ol"},"\u4f7f\u7528\u8005\u6839\u64da\u81ea\u5df1\u7684\u9700\u6c42\uff0c\u53bb\u7cfb\u7d71\u4e0a\u5275\u5efa\u5c0d\u61c9\u7684 ",(0,o.kt)("inlineCode",{parentName:"li"},"PVC"),", \u4e26\u4e14\u671f\u671b\u8a72 ",(0,o.kt)("inlineCode",{parentName:"li"},"PVC")," \u80fd\u5920\u627e\u5230\u7b26\u5408\u9700\u6c42\u7684 ",(0,o.kt)("inlineCode",{parentName:"li"},"PV")," \u4f86\u4f7f\u7528"),(0,o.kt)("li",{parentName:"ol"},"\u6700\u5f8c\u4f7f\u7528\u8005\u90e8\u7f72\u76f8\u95dc\u7684 ",(0,o.kt)("inlineCode",{parentName:"li"},"Pod")," \u65bc\u5bb9\u5668\u4e2d\u6642\uff0c\u5c31\u80fd\u5920\u5c07\u8a72 ",(0,o.kt)("inlineCode",{parentName:"li"},"PVC")," \u7d66\u639b\u8f09\u5230\u5bb9\u5668\u4e2d\u4f7f\u7528")),(0,o.kt)("p",null,"\u9019\u500b\u6d41\u7a0b\u4e2d\u807d\u8d77\u4f86\u9806\u66a2\u4f46\u662f\u5be6\u969b\u4e0a\u537b\u6709\u4e00\u500b\u7528\u8d77\u4f86\u4e0d\u5920\u65b9\u4fbf\u7684\u5730\u65b9\uff0c\u5c31\u5728\u65bc\u7cfb\u7d71\u7ba1\u7406\u54e1\u5fc5\u9808\u8981\u5148\u5275\u7acb\u76f8\u95dc\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u4f86\u4f7f\u7528\uff0c\u800c\u4e14\u5c0d\u65bc\u7cfb\u7d71\u7ba1\u7406\u54e1\u4f86\u8aaa\uff0c\u4ed6\u53ef\u80fd\u4e26\u4e0d\u77e5\u9053\u4f7f\u7528\u8005\u8981\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"PVC")," \u8cc7\u6e90\u5230\u5e95\u662f\u4ec0\u9ebc\uff0c\u56e0\u6b64\u4e26\u6c92\u6709\u5f88\u597d\u7684\u898f\u5283\u525b\u525b\u597d\u7684\u7a7a\u9593\u4f86\u4f7f\u7528\u3002"),(0,o.kt)("p",null,"\u6211\u5011\u5c07\u9019\u7a2e\u9700\u8981\u7cfb\u7d71\u7ba1\u7406\u54e1\u4e8b\u5148\u8a2d\u5b9a ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u4e14\u8b93 ",(0,o.kt)("inlineCode",{parentName:"p"},"PVC")," \u6839\u64da\u9700\u6c42\u81ea\u5df1\u53bb\u5c0b\u627e ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u7684\u985e\u578b\u7a31\u70ba ",(0,o.kt)("inlineCode",{parentName:"p"},"Static"),"\u3002"),(0,o.kt)("p",null,"\u800c\u76f8\u5c0d\u65bc ",(0,o.kt)("inlineCode",{parentName:"p"},"Static"),"\uff0c\u5c31\u6703\u6709\u6240\u8b02\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"Dynamic")," \u7684\u6982\u5ff5\u51fa\u73fe\uff0c\u56e0\u6b64\u63a5\u4e0b\u4f86\u5c31\u662f\u8981\u4f86\u4ecb\u7d39 ",(0,o.kt)("inlineCode",{parentName:"p"},"StorageClass")," \u7684\u4f7f\u7528\u4e86\u3002"),(0,o.kt)("h2",{id:"storageclass"},"StorageClass"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Dynamic")," \u7684\u6982\u5ff5\u6700\u5927\u7684\u512a\u52e2\u5c31\u662f\uff0c\u7cfb\u7d71\u7ba1\u7406\u54e1\u4e0d\u9700\u8981\u4e8b\u5148\u8a2d\u5b9a ",(0,o.kt)("inlineCode",{parentName:"p"},"PV"),", \u800c ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u7684\u5275\u5efa\u90fd\u662f\u6839\u64da\u9700\u6c42\u5275\u9020\u51fa\u4f86\u7684\uff0c\u9019\u6709\u5169\u500b\u597d\u8655"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"\u7cfb\u7d71\u7ba1\u7406\u54e1\u4e0d\u9700\u8981\u4e8b\u5148\u8a2d\u5b9a\u76f8\u95dc\u7684 ",(0,o.kt)("inlineCode",{parentName:"li"},"PV")),(0,o.kt)("li",{parentName:"ol"},"\u5275\u5efa\u51fa\u4f86\u7684 ",(0,o.kt)("inlineCode",{parentName:"li"},"PV")," \u90fd\u80fd\u5920\u5b8c\u5168\u7b26\u5408 ",(0,o.kt)("inlineCode",{parentName:"li"},"PVC")," \u771f\u6b63\u7684\u8cc7\u6e90\u9700\u6c42\uff0c\u4e0d\u6703\u6709\u6d6a\u8cbb\u7684\u60c5\u5f62")),(0,o.kt)("p",null,"\u70ba\u4e86\u6eff\u8db3\u9019\u500b\u60f3\u6cd5\uff0c\u65bc\u662f\u6211\u5011\u8981\u4f86\u4f7f\u7528 ",(0,o.kt)("inlineCode",{parentName:"p"},"StorageClass")," \u4e86\uff0c\u5c0d\u65bc ",(0,o.kt)("inlineCode",{parentName:"p"},"StorageClass")," \u4f86\u8aaa\uff0c\u6211\u5011\u5148\u4f86\u89c0\u770b\u4e00\u4e0b\u6574\u9ad4\u7684\u4f7f\u7528\u6d41\u7a0b\u3002"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"\u7cfb\u7d71\u7ba1\u7406\u54e1\u6839\u64da\u9700\u6c42\u8207\u67b6\u69cb\uff0c\u5275\u5efa\u5c0d\u61c9\u7684 ",(0,o.kt)("inlineCode",{parentName:"li"},"StorageClas")," \u7269\u4ef6\uff0c\u8a72\u7269\u4ef6\u4e5f\u9700\u8981\u63cf\u8ff0\u5f8c\u7aef\u7684\u5132\u5b58\u7a7a\u9593\uff0c\u4f46\u662f\u4e0d\u9700\u8981\u63cf\u8ff0\u76f8\u5c0d\u61c9\u7684\u8cc7\u6e90\u5927\u5c0f"),(0,o.kt)("li",{parentName:"ol"},"\u4f7f\u7528\u8005\u63a5\u4e0b\u4f86\u6839\u64da\u9700\u6c42\u5275\u5efa ",(0,o.kt)("inlineCode",{parentName:"li"},"PVC"),", \u800c\u9019\u4e9b ",(0,o.kt)("inlineCode",{parentName:"li"},"PVC"),"\u5167\u63cf\u8ff0\u6211\u8981\u4f7f\u7528\u7279\u5b9a\u7684 ",(0,o.kt)("inlineCode",{parentName:"li"},"StorageClass")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"kubernetes")," \u89c0\u5bdf\u5230\u6709 ",(0,o.kt)("inlineCode",{parentName:"li"},"PVC")," \u60f3\u8981\u4f7f\u7528 ",(0,o.kt)("inlineCode",{parentName:"li"},"StorageClass")," \u4e14\u767c\u73fe\u8a72 ",(0,o.kt)("inlineCode",{parentName:"li"},"StorageClass")," \u7269\u4ef6\u5b58\u5728\uff0c\u5c31\u6703\u900f\u904e ",(0,o.kt)("inlineCode",{parentName:"li"},"StorageClass")," \u7684\u5c6c\u6027\u4ee5\u53ca ",(0,o.kt)("inlineCode",{parentName:"li"},"PVC")," \u7684\u9700\u6c42\u5275\u9020\u4e00\u500b\u5b8c\u5168\u7b26\u5408\u8a72 ",(0,o.kt)("inlineCode",{parentName:"li"},"PVC")," \u9700\u6c42\u7684 ",(0,o.kt)("inlineCode",{parentName:"li"},"PV")),(0,o.kt)("li",{parentName:"ol"},"\u6700\u5f8c\u8a72 ",(0,o.kt)("inlineCode",{parentName:"li"},"PVC")," \u8207\u8a72 ",(0,o.kt)("inlineCode",{parentName:"li"},"PV")," \u5c31\u53ef\u4ee5\u7d81\u5b9a\u4e26\u4e14\u4f9b ",(0,o.kt)("inlineCode",{parentName:"li"},"Pod")," \u4f7f\u7528")),(0,o.kt)("p",null,"\u63a5\u4e0b\u4f86\u7d30\u770b\u4e00\u4e0b ",(0,o.kt)("inlineCode",{parentName:"p"},"StorageClass")," \u7684\u53c3\u6578\u4ee5\u53ca\u4e00\u4e9b\u6982\u5ff5"),(0,o.kt)("h3",{id:"provisioner"},"Provisioner"),(0,o.kt)("p",null,"\u7531\u65bc\u73fe\u5728 ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u7684\u5275\u5efa\u662f\u81ea\u52d5\u7684\uff0c\u4f46\u662f\u56e0\u70ba ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u672c\u8eab\u5c31\u8ddf\u5f8c\u7aef\u7684\u5132\u5b58\u7a7a\u9593\u6709\u76f4\u63a5\u7684\u9023\u63a5\u95dc\u4fc2\uff0c\u56e0\u6b64\u6211\u5011\u5728 ",(0,o.kt)("inlineCode",{parentName:"p"},"StorageClass")," \u4e5f\u8981\u6709\u80fd\u529b\u53bb\u63cf\u8ff0\u5f8c\u7aef\u7684\u5132\u5b58\u7a7a\u9593\u8cc7\u8a0a\u3002"),(0,o.kt)("p",null,"\u6240\u4ee5\u5be6\u969b\u4e0a\u5728\u4f7f\u7528\u7684\u6642\u5019\u5fc5\u9808\u8981\u5728\u8a72 ",(0,o.kt)("inlineCode",{parentName:"p"},"StorageClass")," \u7684",(0,o.kt)("inlineCode",{parentName:"p"},"Yaml")," \u4e2d\u900f\u904e ",(0,o.kt)("inlineCode",{parentName:"p"},"Provisioner")," \u53bb\u63cf\u8ff0\u8a72 ",(0,o.kt)("inlineCode",{parentName:"p"},"StorageClass")," \u80cc\u5f8c\u4f7f\u7528\u7684\u5132\u5b58\u7cfb\u7d71\u662f\u54ea\u4e00\u5957\u89e3\u6c7a\u65b9\u6848\u3002"),(0,o.kt)("p",null,"\u7136\u800c\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4e26\u4e0d\u662f\u6240\u6709 ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u76ee\u524d\u652f\u63f4\u7684\u5132\u5b58\u7cfb\u7d71\u90fd\u6709\u5c0d\u61c9\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"StorageClass Provisioner")," \u652f\u63f4\u3002"),(0,o.kt)("p",null,"\u652f\u63f4\u7684\u90e8\u5206\u9664\u4e86\u5b98\u65b9\u81ea\u5df1\u5df2\u7d93\u5408\u4f75\u5230\u4e3b\u7dda\u4ee5\u5916\uff0c\u4e5f\u6709\u7b2c\u4e09\u65b9\u7684\u89e3\u6c7a\u65b9\u6848\u518d\u64f4\u5145\u76f8\u95dc\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"StorageClass Provisioner"),"."),(0,o.kt)("p",null,"\u8a73\u7d30\u7684\u652f\u63f4\u5217\u8868\u53ef\u4ee5\u53c3\u8003 ",(0,o.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/concepts/storage/storage-classes/#provisioner"},"Kubernetes StorageClass Provisioner")),(0,o.kt)("h3",{id:"parameters"},"Parameters"),(0,o.kt)("p",null,"\u524d\u9762\u90fd\u6709\u770b\u5230 ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u5167\u5c0d\u65bc\u6bcf\u500b\u5132\u5b58\u6b04\u4f4d\u90fd\u6709\u81ea\u5df1\u7684\u4e00\u500b\u7d50\u69cb\u53bb\u63cf\u8ff0\u76f8\u95dc\u7684\u53c3\u6578\uff0c\u800c\u5728 ",(0,o.kt)("inlineCode",{parentName:"p"},"StorageClass")," \u5167\u5be6\u969b\u4e0a\u4e26\u6c92\u6709\u9019\u7a2e\u683c\u5f0f\u4f86\u4f7f\u7528\uff0c\u7136\u800c\u4e0d\u540c\u7684\u5132\u5b58\u7cfb\u7d71\u53ef\u80fd\u4e5f\u8981\u6709\u4e0d\u540c\u7684\u76f8\u95dc\u53c3\u6578\u4f86\u4f7f\u7528\uff0c\u56e0\u6b64\u5728 ",(0,o.kt)("inlineCode",{parentName:"p"},"StorageClass")," \u9019\u908a\u5247\u662f\u63a1\u7528\u4e86\u4e00\u500b\u56fa\u5b9a\u7684\u683c\u5f0f ",(0,o.kt)("inlineCode",{parentName:"p"},"Parameters")," \uff0c\u88e1\u9762\u5247\u662f\u5404\u5f0f\u5404\u6a23\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"key:value")," \u7684\u5f62\u5f0f\uff0c ",(0,o.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u6703\u5c07\u9019\u4e9b\u8cc7\u8a0a\u5168\u90e8\u50b3\u9001\u5230 ",(0,o.kt)("inlineCode",{parentName:"p"},"Provisioner"),"\uff0c\u8b93 ",(0,o.kt)("inlineCode",{parentName:"p"},"Provisioner")," \u81ea\u884c\u89e3\u8b80\u4f86\u8655\u7406\u3002"),(0,o.kt)("p",null,"\u4ee5\u4e0b\u662f\u4e00\u500b ",(0,o.kt)("inlineCode",{parentName:"p"},"StorageClass")," \u7684\u7bc4\u4f8b"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml="},'kind: StorageClass\napiVersion: storage.k8s.io/v1\nmetadata:\n  name: gluster-vol-default\nprovisioner: kubernetes.io/glusterfs\nparameters:\n  resturl: "http://192.168.10.100:8080"\n  restuser: ""\n  secretNamespace: ""\n  secretName: ""\nallowVolumeExpansion: true\n')),(0,o.kt)("h3",{id:"binding-1"},"Binding"),(0,o.kt)("p",null,"\u4e4b\u524d\u6709\u63d0\u5230\u904e\uff0c",(0,o.kt)("inlineCode",{parentName:"p"},"PVC")," \u5728\u627e\u5c0b ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u7684\u6642\u5019\u6703\u5c0b\u627e\u8cc7\u6e90\u7b26\u5408\u7684\u4f86\u4f7f\u7528\uff0c\u4f46\u662f\u5982\u679c\u4f7f\u7528\u7684\u662f\u900f\u904e ",(0,o.kt)("inlineCode",{parentName:"p"},"StorageClass")," \u4f86\u5e6b\u4f60\u5275\u5efa\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u7684\u8a71\uff0c\u5be6\u969b\u4e0a\u7cfb\u7d71\u6703\u5e6b\u5fd9\u518d ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u7684\u63cf\u8ff0\u4e2d\u4f7f\u7528 ",(0,o.kt)("inlineCode",{parentName:"p"},"Claim")," \u7684\u6b04\u4f4d\uff0c\u78ba\u4fdd\u4f60\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"PVC")," \u8207\u5275\u5efa\u51fa\u4f86\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u53ef\u4ee5\u5b8c\u5168\u5730\u7b26\u5408\uff0c\u4e14\u4e5f\u53ea\u6703\u4f7f\u7528\u9019\u500b ",(0,o.kt)("inlineCode",{parentName:"p"},"PV"),"."),(0,o.kt)("p",null,"\u6b64\u5916\uff0c\u900f\u904e ",(0,o.kt)("inlineCode",{parentName:"p"},"StorageClass")," \u6240\u5275\u5efa\u51fa\u4f86\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"PV"),"\uff0c\u5176 ",(0,o.kt)("inlineCode",{parentName:"p"},"StorageClassName")," \u7684\u6b04\u4f4d\u5c31\u6703\u81ea\u52d5\u88ab\u6355\u4e0a\u8a72 ",(0,o.kt)("inlineCode",{parentName:"p"},"StorageClass")," \u7684\u540d\u7a31\uff0c\u5c0d\u65bc\u8cc7\u8a0a\u7684\u88dc\u5145\u4e5f\u66f4\u52a0\u5b8c\u6574\u3002"),(0,o.kt)("p",null,"\u6240\u4ee5\u5c31 ",(0,o.kt)("inlineCode",{parentName:"p"},"PV/PVC")," \u88e1\u9762\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"StorageClass")," \u7684\u7528\u6cd5\uff0c\u82e5\u7cfb\u7d71\u4e0a\u6c92\u6709 ",(0,o.kt)("inlineCode",{parentName:"p"},"StorageClass")," \u7684\u8cc7\u6e90\u7684\u8a71\uff0c\u53ef\u4ee5\u55ae\u7d14\u7528\u4f86\u9650\u5236 ",(0,o.kt)("inlineCode",{parentName:"p"},"PVC")," \u8207 ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u5c0b\u627e\u7684\u7bc4\u570d\u3002\u82e5\u6709 ",(0,o.kt)("inlineCode",{parentName:"p"},"StorageClass")," \u7684\u8a71\uff0c\u5c31\u53ef\u4ee5\u8b93 ",(0,o.kt)("inlineCode",{parentName:"p"},"StorageClass")," \u4f86\u5e6b\u5fd9\u5275\u5efa\u8207\u7dad\u8b77\u76f8\u95dc\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"PV"),"."),(0,o.kt)("h1",{id:""}),(0,o.kt)("p",null,"\u6700\u5f8c\uff0c\u91cd\u65b0\u6aa2\u8996\u4e00\u6b21\u6700\u521d\u7684\u90a3\u5f35\u5716\u7247\n",(0,o.kt)("img",{parentName:"p",src:"https://i.imgur.com/btUPrUK.png",alt:"Imgur"})),(0,o.kt)("p",null,"\u5de6\u908a\u662f\u6700\u57fa\u672c\u7684\u7528\u6cd5\uff0c\u81ea\u884c\u5275\u5efa ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u8207 ",(0,o.kt)("inlineCode",{parentName:"p"},"PVC"),", \u4e26\u4e14\u5c07\u6240\u9700\u8981\u7684\u8cc7\u6e90\u8207\u53c3\u6578\u90fd\u586b\u5beb\u5b8c\u7562\u5f8c\uff0c\u7531\u5bb9\u5668\u672c\u8eab\u53bb\u9078\u64c7\u8981\u4f7f\u7528\u54ea\u500b ",(0,o.kt)("inlineCode",{parentName:"p"},"PVC"),"."),(0,o.kt)("p",null,"\u53f3\u908a\u5247\u662f\u5957\u7528\u4e0a ",(0,o.kt)("inlineCode",{parentName:"p"},"Storage Class")," \u9019\u7a2e\u52d5\u614b\u5275\u5efa ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u7684\u7528\u6cd5\uff0c\u5c07 ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u7684\u5275\u9020\u8207\u7dad\u8b77 ",(0,o.kt)("strong",{parentName:"p"},"(PV\u7684\u522a\u9664\u4e5f\u662f\u4f9d\u8cf4 Reclaim Policy)")," \u8b93 ",(0,o.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u672c\u8eab\u5e6b\u5fd9\u7dad\u8b77\u3002 \u800c\u5275\u5efa\u51fa\u4f86\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"PV")," \u6240\u64c1\u6709\u7684\u7cfb\u7d71\u8cc7\u6e90\u4ee5\u53ca\u5b58\u53d6\u6a21\u5f0f\u7b49\u90fd\u6703\u8ddf ",(0,o.kt)("inlineCode",{parentName:"p"},"PVC")," \u5b8c\u5168\u4e00\u81f4\uff0c\u78ba\u4fdd\u4e0d\u6703\u6709\u984d\u5916\u7684\u7cfb\u7d71\u8cc7\u6e90\u6d6a\u8cbb\u3002"),(0,o.kt)("p",null,"\u4e0b\u4e00\u5f35\u6703\u8ddf\u5927\u5bb6\u5206\u4eab\u4e00\u4e0b ",(0,o.kt)("inlineCode",{parentName:"p"},"NFS")," \u9019\u500b\u5132\u5b58\u8a2d\u5099\u5230\u5e95\u5728 ",(0,o.kt)("inlineCode",{parentName:"p"},"Kubernetes")," \u88e1\u9762\u53ef\u4ee5\u600e\u9ebc\u4f7f\u7528\uff0c\u9664\u4e86\u5f9e\u6700\u57fa\u672c\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"PV/PVC")," \u4e00\u822c\u5e38\u898b\u7684\u7528\u6cd5\u5916\uff0c\u4e5f\u6703\u8ddf\u5927\u5bb6\u5206\u4eab\u4e00\u4e0b\u5982\u4f55\u4f7f\u7528\u7b2c\u4e09\u65b9\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"NFS Provisioner")," \u4f86\u900f\u904e ",(0,o.kt)("inlineCode",{parentName:"p"},"StorageClass")," \u4f7f\u7528 ",(0,o.kt)("inlineCode",{parentName:"p"},"NFS")," \u505a\u70ba\u5bb9\u5668\u7684\u5132\u5b58\u7a7a\u9593"))}k.isMDXComponent=!0}}]);
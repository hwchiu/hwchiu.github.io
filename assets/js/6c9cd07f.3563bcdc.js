"use strict";(self.webpackChunkhwchiu=self.webpackChunkhwchiu||[]).push([[72305],{3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>y});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},l=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},p="mdxType",f={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),p=u(n),m=a,y=p["".concat(s,".").concat(m)]||p[m]||f[m]||o;return n?r.createElement(y,i(i({ref:t},l),{},{components:n})):r.createElement(y,i({ref:t},l))}));function y(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=m;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c[p]="string"==typeof e?e:a,i[1]=c;for(var u=2;u<o;u++)i[u]=n[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},54551:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>f,frontMatter:()=>o,metadata:()=>c,toc:()=>u});var r=n(87462),a=(n(67294),n(3905));const o={title:"\u95b1\u8b80\u7b46\u8a18: \u300cmacOS \u7684 fsync \u5be6\u4f5c\u5176\u5be6\u8ddf\u5927\u5bb6\u60f3\u50cf\u7684\u5b8c\u5168\u4e0d\u540c \u300d",authors:"hwchiu",tags:["Reading"],description:"\u300cmacOS \u7684 fsync \u5be6\u4f5c\u5176\u5be6\u8ddf\u5927\u5bb6\u60f3\u50cf\u7684\u5b8c\u5168\u4e0d\u540c \u300d",date:new Date("2022-02-21T00:05:08.000Z")},i=void 0,c={permalink:"/2022/02/21/reading-notes-19",source:"@site/blog/2022-02-21-reading-notes-19.md",title:"\u95b1\u8b80\u7b46\u8a18: \u300cmacOS \u7684 fsync \u5be6\u4f5c\u5176\u5be6\u8ddf\u5927\u5bb6\u60f3\u50cf\u7684\u5b8c\u5168\u4e0d\u540c \u300d",description:"\u300cmacOS \u7684 fsync \u5be6\u4f5c\u5176\u5be6\u8ddf\u5927\u5bb6\u60f3\u50cf\u7684\u5b8c\u5168\u4e0d\u540c \u300d",date:"2022-02-21T00:05:08.000Z",formattedDate:"February 21, 2022",tags:[{label:"Reading",permalink:"/tags/reading"}],readingTime:1.025,hasTruncateMarker:!1,authors:[{name:"HungWei Chiu",title:"Blogger",url:"https://github.com/hwchiu",imageURL:"https://github.com/hwchiu.png",key:"hwchiu"}],frontMatter:{title:"\u95b1\u8b80\u7b46\u8a18: \u300cmacOS \u7684 fsync \u5be6\u4f5c\u5176\u5be6\u8ddf\u5927\u5bb6\u60f3\u50cf\u7684\u5b8c\u5168\u4e0d\u540c \u300d",authors:"hwchiu",tags:["Reading"],description:"\u300cmacOS \u7684 fsync \u5be6\u4f5c\u5176\u5be6\u8ddf\u5927\u5bb6\u60f3\u50cf\u7684\u5b8c\u5168\u4e0d\u540c \u300d",date:"2022-02-21T00:05:08.000Z"},prevItem:{title:"\u95b1\u8b80\u7b46\u8a18: \u300cPaypal \u5982\u4f55\u8abf\u6574 Kubernetes \u8b93\u5176\u898f\u6a21\u9054\u5230\u56db\u5343\u7bc0\u9ede\uff0c20\u842c\u500b Pod\u300d",permalink:"/2022/02/23/reading-notes-20"},nextItem:{title:"\u95b1\u8b80\u7b46\u8a18: \u300c \u53d6\u4ee3 Docker Desktop \u7684\u9ad8\u6548\u7387\u958b\u767c\u74b0\u5883\u300d",permalink:"/2022/02/18/reading-notes-18"}},s={authorsImageUrls:[void 0]},u=[],l={toc:u},p="wrapper";function f(e){let{components:t,...n}=e;return(0,a.kt)(p,(0,r.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"\u6a19\u984c: \u300cmacOS \u7684 fsync \u5be6\u4f5c\u5176\u5be6\u8ddf\u5927\u5bb6\u60f3\u50cf\u7684\u5b8c\u5168\u4e0d\u540c \u300d\n\u985e\u5225: others\n\u9023\u7d50: ",(0,a.kt)("a",{parentName:"p",href:"https://mobile.twitter.com/marcan42/status/1494213855387734019?t=TyXUEg-2LcbNiKkv0JVOsg&s=09"},"https://mobile.twitter.com/marcan42/status/1494213855387734019?t=TyXUEg-2LcbNiKkv0JVOsg&s=09")),(0,a.kt)("p",null,"\u4ee5\u4e0b\u7bc0\u9304\u81ea\u8a72\u7559\u8a00\u4e32\n\u300cAs it turns out, macOS cheats. On Linux, fsync() will both flush writes to the drive, and ask it to flush its write cache to stable storage."),(0,a.kt)("p",null,"But on macOS, fsync() only flushes writes to the drive. Instead, they provide an F_FULLSYNC operation to do what fsync() does on Linux.\u300d"),(0,a.kt)("p",null,"\u7c21\u55ae\u4f86\u8aaa\u5c31\u662f Linux \u7684 fsync \u6703\u57f7\u884c\u5169\u6b21\u52d5\u4f5c\uff0c\u6700\u7d42\u8b93\u7576\u6b21\u4fee\u6539\u7d66\u5beb\u56de\u5230\u5e95\u5c64\u5132\u5b58\u8a2d\u5099\uff0c\u800c macOS \u7684\u7248\u672c\u537b\u4e0d\u6703\u771f\u7684\u78ba\u8a8d\u5beb\u56de\u786c\u789f\uff0c\u6240\u4ee5\u9019\u500b\u5c0e\u81f4\u5f88\u591a\u4ef0\u8cf4 fsync \u7684\u61c9\u7528\u7a0b\u5f0f\u5c31\u6703\u6709\u4e00\u4e9b\u4e0d\u9810\u671f\u7684\u884c\u70ba\uff0c\u9019\u4e5f\u662f\u70ba\u4ec0\u9ebc\u9996\u7bc7\u767c\u6587\u7684\u5167\u5bb9\n\u300cWell, this is unfortunate. It turns out Apple's custom NVMe drives are amazingly fast - if you don't care about data integrity."),(0,a.kt)("p",null,"If you do, they drop down to HDD performance. Thread.\u300d"))}f.isMDXComponent=!0}}]);
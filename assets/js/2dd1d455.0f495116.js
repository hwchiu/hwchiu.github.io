"use strict";(self.webpackChunkhwchiu=self.webpackChunkhwchiu||[]).push([[97443],{3905:(e,n,o)=>{o.d(n,{Zo:()=>k,kt:()=>h});var t=o(67294);function r(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function l(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,t)}return o}function a(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?l(Object(o),!0).forEach((function(n){r(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function i(e,n){if(null==e)return{};var o,t,r=function(e,n){if(null==e)return{};var o,t,r={},l=Object.keys(e);for(t=0;t<l.length;t++)o=l[t],n.indexOf(o)>=0||(r[o]=e[o]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)o=l[t],n.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var d=t.createContext({}),u=function(e){var n=t.useContext(d),o=n;return e&&(o="function"==typeof e?e(n):a(a({},n),e)),o},k=function(e){var n=u(e.components);return t.createElement(d.Provider,{value:n},e.children)},c="mdxType",p={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},s=t.forwardRef((function(e,n){var o=e.components,r=e.mdxType,l=e.originalType,d=e.parentName,k=i(e,["components","mdxType","originalType","parentName"]),c=u(o),s=r,h=c["".concat(d,".").concat(s)]||c[s]||p[s]||l;return o?t.createElement(h,a(a({ref:n},k),{},{components:o})):t.createElement(h,a({ref:n},k))}));function h(e,n){var o=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=o.length,a=new Array(l);a[0]=s;var i={};for(var d in n)hasOwnProperty.call(n,d)&&(i[d]=n[d]);i.originalType=e,i[c]="string"==typeof e?e:r,a[1]=i;for(var u=2;u<l;u++)a[u]=o[u];return t.createElement.apply(null,a)}return t.createElement.apply(null,o)}s.displayName="MDXCreateElement"},6603:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>p,frontMatter:()=>l,metadata:()=>i,toc:()=>u});var t=o(87462),r=(o(67294),o(3905));const l={title:"\u5982\u4f55\u900f\u904e Kubemark \u4f86\u6a21\u64ec\u591a\u7bc0\u9ede\u7684 Kubernetes Cluster",authors:"hwchiu",tags:["Linux","Kubernetes","Testing"],description:"\u8a18\u9304\u4e00\u4e0b\u5982\u4f55\u4f7f\u7528 Kubemark \u4f86\u6a21\u64ec\u591a\u7bc0\u9ede\u53e2\u96c6",image:"./assets/S19oQGj2A.png"},a="Preface",i={unversionedId:"2024/kubemark",id:"2024/kubemark",title:"\u5982\u4f55\u900f\u904e Kubemark \u4f86\u6a21\u64ec\u591a\u7bc0\u9ede\u7684 Kubernetes Cluster",description:"\u8a18\u9304\u4e00\u4e0b\u5982\u4f55\u4f7f\u7528 Kubemark \u4f86\u6a21\u64ec\u591a\u7bc0\u9ede\u53e2\u96c6",source:"@site/docs/2024/kubemark.md",sourceDirName:"2024",slug:"/2024/kubemark",permalink:"/docs/2024/kubemark",draft:!1,tags:[{label:"Linux",permalink:"/docs/tags/linux"},{label:"Kubernetes",permalink:"/docs/tags/kubernetes"},{label:"Testing",permalink:"/docs/tags/testing"}],version:"current",lastUpdatedBy:"HWC",frontMatter:{title:"\u5982\u4f55\u900f\u904e Kubemark \u4f86\u6a21\u64ec\u591a\u7bc0\u9ede\u7684 Kubernetes Cluster",authors:"hwchiu",tags:["Linux","Kubernetes","Testing"],description:"\u8a18\u9304\u4e00\u4e0b\u5982\u4f55\u4f7f\u7528 Kubemark \u4f86\u6a21\u64ec\u591a\u7bc0\u9ede\u53e2\u96c6",image:"./assets/S19oQGj2A.png"},sidebar:"techPost",previous:{title:"\u4f7f\u7528 Cluster Capacity \u4f86\u9810\u89bd Pod \u7684\u90e8\u7f72\u60c5\u6cc1",permalink:"/docs/2024/cluster-capacity"},next:{title:"Nginx Reverse Proxy \u7684 DNS Issue",permalink:"/docs/2024/nginx-dns"}},d={image:o(12144).Z},u=[],k={toc:u},c="wrapper";function p(e){let{components:n,...l}=e;return(0,r.kt)(c,(0,t.Z)({},k,l,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"preface"},"Preface"),(0,r.kt)("p",null,"Kubemark \u662f\u4e00\u500b\u5b98\u65b9\u63d0\u4f9b\u7684\u5de5\u5177\uff0c\u8a72\u5de5\u5177\u8b93\u53e2\u96c6\u7ba1\u7406\u54e1\u53ef\u4ee5\u900f\u904e\u6a21\u64ec\u7684\u65b9\u5f0f\u4f86\u64f4\u5927 K8s cluster \u7684\u7bc0\u9ede\u6578\u91cf\uff0c\u4e0d\u8ad6\u662f\u91dd\u5c0d\u6548\u80fd\u6216\u662f\u529f\u80fd\uff0c\u90fd\u80fd\u5920\u7522\u751f\u6578\u767e\u5230\u6578\u5343\u7684\u7bc0\u9ede\u91cf\u4f86\u5e6b\u52a9\u958b\u767c\u8005\u66f4\u52a0\u77ad\u89e3\u81ea\u5df1\u958b\u767c\u61c9\u7528\u7684\u6975\u9650\u3002"),(0,r.kt)("p",null,"Kubemark \u7684\u672c\u8cea\u4e0a\u662f\u900f\u904e\u5c07 Kubelet \u7d66\u5c01\u88dd\u5230\u5bb9\u5668\u5167\uff0c\u900f\u904e\u90e8\u7f72\u5927\u91cf\u7684 Pod \u5c31\u53ef\u4ee5\u7522\u751f\u51fa\u5927\u91cf\u7684 Node\uff0c\u800c\u9019\u4e9b Node \u518d\u8207\u76ee\u6a19\u5340\u5f85\u6e2c\u5f97 K8s Cluster \u53bb\u76f8\u9023\u5c31\u53ef\u4ee5\u8a3b\u518a\u5927\u91cf\u7684 Kubernetes \u7bc0\u9ede\u3002"),(0,r.kt)("h1",{id:"prepare-kubemark"},"Prepare Kubemark"),(0,r.kt)("p",null,"\u7531\u65bc Kubemark \u8981\u6a21\u64ec\u4e0d\u540c\u7248\u672c\u7684 Kubernetes\uff0c\u56e0\u6b64\u5efa\u8b70\u91dd\u5c0d\u4e0d\u540c\u7248\u672c\u7684 Kubernetes \u90fd\u8981\u6709\u5c0d\u61c9\u7684\u7248\u672c\uff0c\u800c\u9396\u5b9a\u7248\u672c\u6700\u7c21\u55ae\u7684\u65b9\u5f0f\u9084\u662f\u5f9e Kubernetes \u5b98\u65b9\u7248\u672c\u53bb\u5efa\u69cb\u76f8\u5c0d\u61c9\u7684\u6a94\u6848\u3002"),(0,r.kt)("p",null,"\u56e0\u6b64\u5e95\u4e0b\u6211\u5011\u5c07\u6703\u91dd\u5c0d K8s 1.30, 1.31 \u5169\u500b\u7248\u672c\u5206\u5225\u7de8\u8b6f\u51fa\u5169\u500b\u7248\u672c\uff0c\u4e26\u4e14\u5bb9\u5668\u5316\u5f8c\u4e0a\u50b3\u5230 DockerHub \u4f9b\u672a\u4f86\u4f7f\u7528\u3002"),(0,r.kt)("p",null,"\u4ee5\u4e0b\u6d41\u7a0b\u5206\u5225\u662f"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u5f9e Kubernetes \u5b98\u65b9\u4e0b\u8f09\u76f8\u95dc\u7a0b\u5f0f\u78bc"),(0,r.kt)("li",{parentName:"ol"},"\u5207\u63db\u5230\u5c0d\u61c9\u7684 Branch"),(0,r.kt)("li",{parentName:"ol"},"Build Kubemark "),(0,r.kt)("li",{parentName:"ol"},"\u5c07 Kubemark \u6253\u5305\u6210\u5bb9\u5668"),(0,r.kt)("li",{parentName:"ol"},"\u4e0a\u50b3\u5230 Dockerhub")),(0,r.kt)("p",null,"\u9996\u5148\uff0c\u76ee\u524d\u6240\u6709\u7684\u7a0b\u5f0f\u78bc\u90fd\u653e\u5230\u5b98\u65b9 Github \u4e0a\uff0c\u6240\u4ee5\u900f\u904e git clone \u53ef\u4ee5\u6293\u53d6\uff0c\u4e26\u4e14\u900f\u904e checkout \u5207\u63db\u5230\u76ee\u6a19 branch."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"git clone https://github.com/kubernetes/kubernetes.git\ncd kubernetes\ngit checkout v1.31.0\n")),(0,r.kt)("p",null,"\u63a5\u4e0b\u4f86\u8acb\u78ba\u4fdd\u74b0\u5883\u5167\u6709 golang \u4ee5\u53ca make \u76f8\u95dc\u6307\u4ee4"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"make WHAT='cmd/kubemark/'\n")),(0,r.kt)("p",null,"\u4e0a\u8ff0\u6d41\u7a0b\u8dd1\u5b8c\u5f8c\uff0c\u6703\u65bc _output/local/bin/linux/amd64/ \u7522\u751f\u4e00\u500b\u7de8\u8b6f\u597d\u7684\u6a94\u6848 ",(0,r.kt)("inlineCode",{parentName:"p"},"kubemark"),"\uff0c\u6211\u5011\u9700\u8981\u5c07\u8a72\u6a94\u6848\u8907\u88fd\u5230\u5176\u4ed6\u76ee\u9304\u4f86\u9032\u884c\u5bb9\u5668\u5316\u7684\u5305\u88dd"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"cp _output/local/bin/linux/amd64/kubemark cluster/images/kubemark/\ncd cluster/images/kubemark/\nmake REGISTRY=hwchiu IMAGE_TAG=v1.31.0 push\n")),(0,r.kt)("p",null,"\u4e0a\u8ff0\u7684 make \u6307\u4ee4\u6703\u5617\u8a66\u900f\u904e docker build \u4e26\u4e14\u63a8\u5230\u6307\u5b9a\u7684 REGISTRY\uff0c\u4e0a\u8ff0\u7bc4\u4f8b\u5247\u6703\u7522\u751f image \u5230 docker hub \u4e0b\u3002"),(0,r.kt)("p",null,"\u53cd\u8986\u4e0a\u8ff0\u6d41\u7a0b\u91dd\u5c0d v1.31.0 \u4ee5\u53ca v1.30.4 \u5f8c\u53ef\u4ee5\u5f97\u5230\u4e0b\u5217\u5169\u500b image"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image",src:o(42254).Z,width:"683",height:"594"})),(0,r.kt)("p",null,'\u6b64\u5916\uff0c\u76ee\u524d kubemark \u88e1\u9762\u6709\u5c07 CR \u7d66\u5beb\u6b7b\u5230  "unix:///run/containerd/containerd.sock"\n',(0,r.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/blob/release-1.31/pkg/kubemark/hollow_kubelet.go#L171"},"https://github.com/kubernetes/kubernetes/blob/release-1.31/pkg/kubemark/hollow_kubelet.go#L171")),(0,r.kt)("p",null,"\u9019\u610f\u5473\u8a72 cluster \u5fc5\u9808\u8981\u63d0\u4f9b\u57fa\u65bc containerd \u7684 unix socket \u624d\u53ef\u4ee5\u4f7f\u7528\uff0c\u82e5\u4f7f\u7528 cri-o \u7684\u8a71\u5247\u6c92\u6709\u8fa6\u6cd5\u3002"),(0,r.kt)("p",null,"\u56e0\u6b64\u6211\u9019\u908a\u4e5f\u91dd\u5c0d crio \u7684\u90e8\u5206\u81ea\u884c\u4fee\u6539\u7a0b\u5f0f\u78bc\u4e26\u4e14\u5efa\u7f6e\u4e00\u500b\u984d\u5916\u7684\u7248\u672c\u4f9b\u6e2c\u8a66\u4f7f\u7528"),(0,r.kt)("h1",{id:"environment"},"Environment"),(0,r.kt)("p",null,"\u70ba\u4e86\u8b93\u6574\u500b\u6e2c\u8a66\u74b0\u5883\u7c21\u55ae\u8207\u4e7e\u6de8\uff0c\u9019\u908a\u90e8\u7f72\u5169\u5957 v1.31.0 \u7684 Kubernetes Cluster\uff0c\u5176\u4e2d"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Cluster1 \u7684\u76ee\u7684\u662f\u7528\u4f86\u90e8\u7f72 Kubemark\uff0c\u7fd2\u6163\u4e0a\u6703\u7a31\u70ba Hollow Node Cluster\uff0c\u8a72 Cluster \u5167\u6240\u6709\u7684 Kubemark Pod \u90fd\u6703\u8a3b\u518a\u70ba\u53e6\u5916\u4e00\u500b Cluster \u7684 Kubernetes Node"),(0,r.kt)("li",{parentName:"ol"},"Cluster2 \u7684\u5247\u662f\u5f85\u6e2c Cluster\uff0c\u7b49\u5f85 Kubemark \u5411\u5176\u8a3b\u518a\uff0c\u6700\u7d42\u61c9\u8a72\u8981\u53ef\u4ee5\u770b\u5230\u5f88\u591a\u900f\u904e\u6a21\u64ec\u7684 Kubernetes \u7bc0\u9ede")),(0,r.kt)("p",null,"\u5176\u67b6\u69cb\u5982\u4e0bw"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image",src:o(12144).Z,width:"1175",height:"544"})),(0,r.kt)("p",null,"Hollow-Node \u662f\u4e00\u500b\u666e\u901a\u7684 Pod\uff0c\u8a72 Pod \u4e2d\u542b\u6709\u5169\u500b Container\uff0c\u9019\u5169\u500b Container \u5206\u5225\u626e\u6f14 Kubelet \u4ee5\u53ca Kube-Proxy \u7684\u89d2\u8272\u3002"),(0,r.kt)("h1",{id:"installation"},"Installation"),(0,r.kt)("p",null,"\u8981\u80fd\u5920\u5411 API Server \u8a3b\u518a\u4e00\u500b\u7bc0\u9ede\uff0c\u5fc5\u9808\u8981\u6709\u80fd\u529b\u80fd\u5920\u8ddf API Server \u6e9d\u901a\uff0c\u9019\u908a\u6700\u7c21\u55ae\u7684\u65b9\u5f0f\u5c31\u662f\u7372\u53d6\u8a72 Cluster \u7684 Kubeconfig\u3002\n\u8a72 Kubeconfig \u6211\u5011\u6703\u9700\u8981\u5b89\u88dd\u5230 Kubernetes \u4e2d\uff0c\u4e26\u4e14\u4ee5 Secret \u7684\u65b9\u5f0f\u7d66\u639b\u8f09\u5230\u6bcf\u500b Hollow-Node \u4e0a\u3002"),(0,r.kt)("p",null,"\u5047\u8a2d\u8a72 kubeconfig \u7684\u540d\u7a31\u662f cluster_config\uff0c\u57f7\u884c\u4e0b\u5217\u6307\u4ee4"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash="},"kubectl create ns kubemark\nkubectl create secret generic kubeconfig --type=Opaque --namespace=kubemark --from-file=kubelet.kubeconfig=cluster_config --from-file=kubeproxy.kubeconfig=cluster_config\n")),(0,r.kt)("p",null,"\u63a5\u8005\u6e96\u5099\u4e00\u500b\u7528\u4f86\u90e8\u7f72 Hollow Node \u7684 YAML\u3002\u8a72\u6a94\u6848\u6703\u90e8\u7f72\u5f88\u591a kubemark \u7684 Pod\uff0c\u6bcf\u500b Pod \u6703\u5305\u542b"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u4e00\u500b Init Container\uff0c\u7528\u4f86\u8a2d\u5b9a\u7bc0\u9ede fs inotify \u7684\u4e0a\u9650\uff0c\u4f30\u8a08\u662f\u7d66 kubelet/kubeproxy \u7684 log \u7528\u7684"),(0,r.kt)("li",{parentName:"ol"},"\u5169\u500b\u4e3b\u8981 container\uff0c\u5206\u5225\u7528\u4f86\u4ee3\u8868 kubeproxy \u4ee5\u53ca kubelet")),(0,r.kt)("p",null,"\u7bc4\u4f8b\u662f\u4f7f\u7528 replicationController\uff0c\u53ef\u4ee5\u81ea\u884c\u5207\u63db\u6210 Deployment"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml="},'apiVersion: v1\nkind: ReplicationController\nmetadata:\n  name: hollow-node\n  namespace: kubemark\n  labels:\n    name: hollow-node\nspec:\n  replicas: 100\n  selector:\n    name: hollow-node\n  template:\n    metadata:\n      labels:\n        name: hollow-node\n    spec:\n      initContainers:\n      - name: init-inotify-limit\n        image: busybox:1.32\n        command: [\'sysctl\', \'-w\', \'fs.inotify.max_user_instances=1000\']\n        securityContext:\n          privileged: true\n      volumes:\n      - name: kubeconfig-volume\n        secret:\n          secretName: kubeconfig\n      - name: kernelmonitorconfig-volume\n        configMap:\n          name: node-configmap\n      - name: logs-volume\n        hostPath:\n          path: /var/log\n      - name: containerd\n        hostPath:\n          path: /run/crio\n      - name: no-serviceaccount-access-to-real-master\n        emptyDir: {}\n      containers:\n      - name: hollow-kubelet\n        image: hwchiu/kubemark:v1.31.0-crio-dev\n        ports:\n        - containerPort: 4194\n        - containerPort: 10250\n        - containerPort: 10255\n        env:\n        - name: NODE_NAME\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.name\n        command: [\n          "/go-runner",\n          "-log-file=/var/log/kubelet-$(NODE_NAME).log",\n          "/kubemark",\n          "--morph=kubelet",\n          "--containerd=/run/crio/crio.sock",\n          "--name=$(NODE_NAME)",\n          "--node-labels=hollow-node=true",\n          "--kubeconfig=/kubeconfig/kubelet.kubeconfig",\n        ]\n        volumeMounts:\n        - name: kubeconfig-volume\n          mountPath: /kubeconfig\n          readOnly: true\n        - name: logs-volume\n          mountPath: /var/log\n        - name: containerd\n          mountPath: /run/crio\n        resources:\n          requests:\n            cpu: 40m\n            memory: 100Mi\n        securityContext:\n          privileged: true\n      - name: hollow-proxy\n        image: hwchiu/kubemark:v1.31.0-crio-dev\n        imagePullPolicy: Always\n        env:\n        - name: NODE_NAME\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.name\n        command: [\n          "/go-runner",\n          "-log-file=/var/log/kubeproxy-$(NODE_NAME).log",\n          "/kubemark",\n          "--morph=proxy",\n          "--name=$(NODE_NAME)",\n          "--v=9",\n          "--kubeconfig=/kubeconfig/kubeproxy.kubeconfig",\n        ]\n        volumeMounts:\n        - name: kubeconfig-volume\n          mountPath: /kubeconfig\n          readOnly: true\n        - name: logs-volume\n          mountPath: /var/log\n        resources:\n          requests:\n            cpu: 40m\n            memory: 100Mi          \n')),(0,r.kt)("p",null,'\u4e0a\u8ff0 YAML \u4f7f\u7528\u7684 image \u662f "v1.31.0-crio-dev"\uff0c\u9019\u908a\u4f7f\u7528\u7684\u662f\u6211\u81ea\u5df1\u5ba2\u88fd\u5316\u7684\u7d50\u679c\uff0c\u6700\u5f8c\u6703\u518d\u8a73\u7d30\u4ecb\u7d39\u4fee\u6539\u7684\u90e8\u5206\u3002'),(0,r.kt)("p",null,"\u5148\u7c21\u55ae\u770b\u4e00\u4e0b\u4e0a\u8ff0 YAML \u7684\u76f8\u95dc\u8a2d\u5b9a\n",(0,r.kt)("strong",{parentName:"p"},"hollow-kubelet")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Replication \u662f 100, \u4ee3\u8868\u6709 100 \u500b Pod \u4e5f\u5c31\u662f\u6709 100 \u500b\u6a21\u64ec\u7684\u7bc0\u9ede"),(0,r.kt)("li",{parentName:"ol"},"Kubemark \u900f\u904e morph \u7684\u6307\u4ee4\u4f86\u6c7a\u5b9a\u8981\u904b\u884c\u54ea\u7a2e\u6a21\u5f0f"),(0,r.kt)("li",{parentName:"ol"},"\u900f\u904e -log-file \u5c07\u6bcf\u500b\u7bc0\u9ede\u7684 log \u6307\u4ee4\u90fd\u5beb\u5230 K8s \u7bc0\u9ede\u4e0a"),(0,r.kt)("li",{parentName:"ol"},"containerd \u7684\u8a2d\u5b9a\u662f\u7d66 CAdvisor \u7684\uff0c\u4e26\u975e\u662f\u7d66 kubelet \u7684"),(0,r.kt)("li",{parentName:"ol"},"--name \u7684\u90e8\u5206\u5247\u662f\u900f\u904e downward API \u53d6\u5f97 Pod \u7684\u540d\u7a31\uff0c\u4e26\u4e14\u900f\u904e\u6b64\u540d\u7a31\u4f86\u8a2d\u5b9a\u7bc0\u9ede\u7684\u540d\u7a31"),(0,r.kt)("li",{parentName:"ol"},"--node-lables \u662f\u91dd\u5c0d\u7bc0\u9ede\u8a2d\u5b9a label\uff0c\u5f8c\u7e8c\u8981\u9032\u884c\u904e\u6ffe\u8207\u522a\u9664\u4e5f\u6bd4\u8f03\u597d\u64cd\u4f5c"),(0,r.kt)("li",{parentName:"ol"},"--kubeconfig \u5247\u662f\u628a\u524d\u8ff0\u5b89\u88dd\u7684 secret \u4e2d\u7684 kubeconfig \u62ff\u4f86\u4f7f\u7528\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"hollow-proxy")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u900f\u904e morph \u8a2d\u5b9a\u70ba proxy \u6a21\u5f0f"),(0,r.kt)("li",{parentName:"ol"},"\u4e00\u6a23\u900f\u904e -log-file \u53bb\u8a2d\u5b9a\u8f38\u51fa\u7684\u6a94\u6848\u540d\u7a31"),(0,r.kt)("li",{parentName:"ol"},"\u5f8c\u7e8c\u5927\u540c\u5c0f\u7570")),(0,r.kt)("p",null,"\u4e0a\u8ff0\u6a94\u6848\u90e8\u7f72\u5f8c\uff0c\u5c31\u53ef\u4ee5\u89c0\u5bdf\u5230\u4e0b\u5217\u5167\u5bb9"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"node k8s cluster")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"root@node-k8s-1:~# kubectl -n kubemark get pods\nNAME                READY   STATUS    RESTARTS   AGE\nhollow-node-26m9k   2/2     Running   2          18h\nhollow-node-28bwz   2/2     Running   2          18h\nhollow-node-2pmns   2/2     Running   2          18h\nhollow-node-2vgjr   2/2     Running   2          18h\nhollow-node-2zpr2   2/2     Running   2          18h\nhollow-node-4xjkq   2/2     Running   2          18h\nhollow-node-55blr   2/2     Running   2          18h\nhollow-node-56r85   2/2     Running   2          18h\nhollow-node-5dvqd   2/2     Running   2          18h\nhollow-node-5jpkw   0/2     Pending   0          18h\nhollow-node-5stkv   2/2     Running   2          18h\nhollow-node-6h447   2/2     Running   2          18h\nhollow-node-6nbcp   2/2     Running   2          18h\nhollow-node-78z6f   2/2     Running   2          18h\nhollow-node-7d5qg   2/2     Running   2          18h\nhollow-node-7kr98   2/2     Running   2          18h\nhollow-node-84wn9   2/2     Running   2          18h\nhollow-node-87xm4   2/2     Running   2          18h\nhollow-node-8d74t   2/2     Running   2          18h\nhollow-node-94crg   2/2     Running   2          18h\nhollow-node-9frdz   2/2     Running   2          18h\nhollow-node-9kjzg   2/2     Running   2          18h\nhollow-node-9zr8t   2/2     Running   2          18h\nhollow-node-b8v6d   2/2     Running   2          18h\nhollow-node-bhsx6   2/2     Running   2          18h\nhollow-node-bnpjw   2/2     Running   2          18h\nhollow-node-bzb6n   2/2     Running   2          18h\nhollow-node-c799k   2/2     Running   2          18h\nhollow-node-c9cph   2/2     Running   2          18h\nhollow-node-c9lfr   2/2     Running   2          18h\nhollow-node-cb4rp   2/2     Running   2          18h\nhollow-node-cqhtj   2/2     Running   2          18h\n")),(0,r.kt)("p",null,"\u53ef\u4ee5\u770b\u5230\u7576\u9019\u4e9b Hollow-Node Pod \u90fd\u9806\u5229\u8d77\u4f86\u5f8c\uff0c\u76ee\u6a19(Testing K8s Cluster) \u53ef\u4ee5\u770b\u5230\u5f88\u591a\u7bc0\u9ede\u88ab\u8a3b\u518a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash="},"root@test-cluster-1:~# kubectl get nodes\nNAME                STATUS   ROLES           AGE     VERSION\nhollow-node-26m9k   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-28bwz   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-2pmns   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-2vgjr   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-2zpr2   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-4xjkq   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-55blr   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-56r85   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-5dvqd   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-5stkv   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-6h447   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-6nbcp   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-78z6f   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-7d5qg   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-7kr98   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-84wn9   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-87xm4   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-8d74t   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-94crg   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-9frdz   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-9kjzg   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-9zr8t   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-b8v6d   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-bhsx6   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-bnpjw   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-bzb6n   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-c799k   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-c9cph   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-c9lfr   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-cb4rp   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-cqhtj   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-csbrn   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-czqcr   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-d5xh2   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-d68nk   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-dg5dj   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-fbc45   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-g7ht9   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-g9g5p   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-gdb68   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-gdxkn   Ready    <none>          18h     v1.31.0-dirty\nhollow-node-gm4nh   Ready    <none>          18h     v1.31.0-dirty\n")),(0,r.kt)("p",null,"\u9019\u6642\u5019\u5982\u679c\u53bb\u770b\u9019\u4e9b Pod \u6240\u90e8\u7f72\u7684\u7bc0\u9ede\u5167\u5bb9\u7684\u8a71\uff0c\u53ef\u4ee5\u89c0\u5bdf\u5230\u76f8\u95dc\u7684 log"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash="},"root@node-cluster-2:/var/log# ls /var/log/kube*\n/var/log/kubelet-hollow-node-26m9k.log  /var/log/kubelet-hollow-node-bzb6n.log  /var/log/kubelet-hollow-node-ksw8w.log  /var/log/kubelet-hollow-node-rshs2.log    /var/log/kubeproxy-hollow-node-28bwz.log  /var/log/kubeproxy-hollow-node-c799k.log  /var/log/kubeproxy-hollow-node-l522t.log  /var/log/kubeproxy-hollow-node-s25wv.log\n")),(0,r.kt)("p",null,"\u9019\u6642\u5019\u5982\u679c\u5c07\u6240\u6709 Hollow-Pod \u90fd\u79fb\u9664\u7684\u8a71\uff0c\u9019\u4e9b\u7bc0\u9ede\u5c31\u6703\u56e0\u70ba\u55aa\u5931 kubelet \u7684\u9023\u7dda\uff0c\u6700\u5f8c\u90fd\u9032\u5165\u5230 NodeNotReady \u7684\u72c0\u6cc1\uff0c\u9700\u8981\u79fb\u9664\u7684\u8a71\u5fc5\u9808\u8981\u900f\u904e kubectl detele nodes \u7684\u6307\u4ee4\u53bb\u79fb\u9664"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash="},"~# kubectl get nodes\nNAME                STATUS     ROLES           AGE     VERSION\nhollow-node-26m9k   NotReady   <none>          18h     v1.31.0-dirty\nhollow-node-28bwz   NotReady   <none>          18h     v1.31.0-dirty\nhollow-node-2pmns   NotReady   <none>          18h     v1.31.0-dirty\nhollow-node-2vgjr   NotReady   <none>          18h     v1.31.0-dirty\nhollow-node-2zpr2   NotReady   <none>          18h     v1.31.0-dirty\nhollow-node-4xjkq   NotReady   <none>          18h     v1.31.0-dirty\nhollow-node-55blr   NotReady   <none>          18h     v1.31.0-dirty\nhollow-node-56r85   NotReady   <none>          18h     v1.31.0-dirty\nhollow-node-5dvqd   NotReady   <none>          18h     v1.31.0-dirty\nhollow-node-5stkv   NotReady   <none>          18h     v1.31.0-dirty\nhollow-node-6h447   NotReady   <none>          18h     v1.31.0-dirty\nhollow-node-6nbcp   NotReady   <none>          18h     v1.31.0-dirty\nhollow-node-78z6f   NotReady   <none>          18h     v1.31.0-dirty\nhollow-node-7d5qg   NotReady   <none>          18h     v1.31.0-dirty\nhollow-node-7kr98   NotReady   <none>          18h     v1.31.0-dirty\nhollow-node-84wn9   NotReady   <none>          18h     v1.31.0-dirty\nhollow-node-87xm4   NotReady   <none>          18h     v1.31.0-dirty\nhollow-node-8d74t   NotReady   <none>          18h     v1.31.0-dirty\nhollow-node-94crg   NotReady   <none>          18h     v1.31.0-dirty\nhollow-node-9frdz   NotReady   <none>          18h     v1.31.0-dirty\n")),(0,r.kt)("p",null,"\u53ef\u4ee5\u900f\u904e\u524d\u8ff0\u7684 label \u4f86\u7c21\u5316\u79fb\u9664\u6d41\u7a0b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"kubectl delete nodes -l hollow-node=true\n")),(0,r.kt)("h1",{id:"issue"},"Issue"),(0,r.kt)("p",null,"\u6700\u539f\u59cb\u7684 kubemark \u904b\u884c\u7684\u6642\u5019\u6703\u9047\u5230\u5169\u500b\u554f\u984c"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"contaienrd unix socket \u7684\u554f\u984c\uff0c\u8a72\u554f\u984c\u53ef\u4ee5\u900f\u904e\u4fee\u6539 ",(0,r.kt)("inlineCode",{parentName:"li"},"pkg/kubemark/hollow_kubelet.go")," \u4f86\u4fee\u6539\u6210 crio \u7684\u4f4d\u7f6e\uff0c\u5982\u679c\u672c\u8eab\u5c31\u662f\u4f7f\u7528 containerd \u7684\u8a71\u5247\u6c92\u6709\u9700\u8981")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash="},'--- a/pkg/kubemark/hollow_kubelet.go\n+++ b/pkg/kubemark/hollow_kubelet.go\n@@ -168,7 +168,7 @@ func GetHollowKubeletConfig(opt *HollowKubeletOptions) (*options.KubeletFlags, *\n                panic(err)\n        }\n\n-       c.ImageServiceEndpoint = "unix:///run/containerd/containerd.sock"\n+       c.ImageServiceEndpoint = "unix:///run/crio/crio.sock"\n        c.StaticPodURL = ""\n        c.EnableServer = true\n        c.Address = "0.0.0.0" /* bind address */\n~\n')),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"\u7576\u524d\u8ff0\u554f\u984c\u4fee\u6b63\u5f8c\uff0c kubelet \u5c31\u53ef\u4ee5\u6b63\u5e38\u904b\u4f5c\uff0c\u4e0d\u904e\u6b64\u6642 kube-proxy \u5247\u662f\u6703\u9047\u5230 nil pointer \u7684\u554f\u984c\u5c0e\u81f4\u6c92\u6709\u8fa6\u6cd5\u9806\u5229\u8d77\u4f86\uff0c\u900f\u904e\u6aa2\u67e5\u7bc0\u9ede\u4e0a\u7684 /var/log/kubeproxy-xxxx.log")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'E0907 12:36:03.288062       6 runtime.go:79] Observed a panic: "invalid memory address or nil pointer dereference" (runtime error: invalid memory address or nil pointer dereference)\ngoroutine 46 [running]:\nk8s.io/apimachinery/pkg/util/runtime.logPanic({0x366f260, 0x6154720})\n        k8s.io/apimachinery/pkg/util/runtime/runtime.go:75 +0x85\nk8s.io/apimachinery/pkg/util/runtime.HandleCrash({0x0, 0x0, 0xc000826380?})\n        k8s.io/apimachinery/pkg/util/runtime/runtime.go:49 +0x6b\npanic({0x366f260?, 0x6154720?})\n        runtime/panic.go:770 +0x132\nk8s.io/kubernetes/pkg/proxy/healthcheck.(*ProxierHealthServer).SyncNode(0x0, 0xc000ae2308)\n        k8s.io/kubernetes/pkg/proxy/healthcheck/proxier_health.go:142 +0x6d\nk8s.io/kubernetes/pkg/proxy.(*NodeEligibleHandler).OnNodeAdd(0xc00008b0d8, 0xc000ae2308)\n        k8s.io/kubernetes/pkg/proxy/node.go:102 +0x57\nk8s.io/kubernetes/pkg/proxy/config.(*NodeConfig).handleAddNode(0xc000665440, {0x3da4c60?, 0xc000ae2308?})\n        k8s.io/kubernetes/pkg/proxy/config/config.go:339 +0x12a\nk8s.io/client-go/tools/cache.ResourceEventHandlerFuncs.OnAdd(...)\n        k8s.io/client-go/tools/cache/controller.go:239\nk8s.io/client-go/tools/cache.(*processorListener).run.func1()\n        k8s.io/client-go/tools/cache/shared_informer.go:978 +0x13e\nk8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1(0x30?)\n        k8s.io/apimachinery/pkg/util/wait/backoff.go:226 +0x33\nk8s.io/apimachinery/pkg/util/wait.BackoffUntil(0xc0004edf70, {0x4371540, 0xc000904000}, 0x1, 0xc000902000)\n        k8s.io/apimachinery/pkg/util/wait/backoff.go:227 +0xaf\nk8s.io/apimachinery/pkg/util/wait.JitterUntil(0xc000881770, 0x3b9aca00, 0x0, 0x1, 0xc000902000)\n        k8s.io/apimachinery/pkg/util/wait/backoff.go:204 +0x7f\nk8s.io/apimachinery/pkg/util/wait.Until(...)\n        k8s.io/apimachinery/pkg/util/wait/backoff.go:161\nk8s.io/client-go/tools/cache.(*processorListener).run(0xc0006dc630)\n        k8s.io/client-go/tools/cache/shared_informer.go:972 +0x69\nk8s.io/apimachinery/pkg/util/wait.(*Group).Start.func1()\n        k8s.io/apimachinery/pkg/util/wait/wait.go:72 +0x52\ncreated by k8s.io/apimachinery/pkg/util/wait.(*Group).Start in goroutine 187\n        k8s.io/apimachinery/pkg/util/wait/wait.go:70 +0x73\nI0907 12:36:03.288125       6 config.go:120] "Calling handler.OnEndpointSliceAdd" endpoints="default/kubernetes"\npanic: runtime error: invalid memory address or nil pointer dereference [recovered]\n        panic: runtime error: invalid memory address or nil pointer dereference\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x30fea8d]\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4ee5\u4e0b\u90fd\u662f\u6211\u500b\u4eba\u7684\u7814\u7a76\u8207\u731c\u6e2c\uff0c\u5c1a\u672a\u7372\u5f97\u8b49\u5be6")),(0,r.kt)("p",null,"\u5617\u8a66\u53bb\u7406\u89e3\u9019\u6bb5\u7a0b\u5f0f\u78bc\uff0c\u53ef\u4ee5\u89c0\u5bdf\u5230\u61c9\u8a72\u662f kube-proxy \u904b\u4f5c\u7684\u6642\u5019\u6703\u53bb\u8a3b\u518a\u4e00\u500b ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/blob/master/cmd/kube-proxy/app/server.go#L574-L577"},"Event Handler")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-golang="},"if utilfeature.DefaultFeatureGate.Enabled(features.KubeProxyDrainingTerminatingNodes) {\n    nodeConfig.RegisterEventHandler(&proxy.NodeEligibleHandler{\n        HealthServer: s.HealthzServer,\n    })\n}\n")),(0,r.kt)("p",null,"\u4f46\u662f\u6211\u5011 kubemark \u7684\u6d41\u7a0b\u4e0b\uff0c\u9019\u500b\u7269\u4ef6 ",(0,r.kt)("inlineCode",{parentName:"p"},"HealthServer")," \u672c\u8eab\u662f\u4e00\u500b\u7a7a\u7269\u4ef6\uff0c\u6240\u4ee5\u7576\u672a\u4f86\u4e8b\u4ef6\u767c\u751f\u6642\uff0c\u8981\u53bb\u547c\u53eb\u5c31\u6703\u5f97\u4e0a\u8ff0 invalid memory dereference \u7684\u932f\u8aa4\u8a0a\u606f\u3002\n\u6b63\u5e38\u5f62\u6cc1\u4e0b kube-proxy ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/blob/master/cmd/kube-proxy/app/server.go#L223-L225"},"\u521d\u59cb\u5316"),"\u7684\u6642\u5019\u6703\u53bb\u521d\u59cb\u5316\u9019\u500b\u8b8a\u6578"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-golang="},"if len(config.HealthzBindAddress) > 0 {\n    s.HealthzServer = healthcheck.NewProxierHealthServer(config.HealthzBindAddress, 2*config.SyncPeriod.Duration)\n}\n")),(0,r.kt)("p",null,"\u4e0d\u904e kubemark \u672c\u8eab\u5247\u6c92\u6709\u547c\u53eb\u9019\u500b\u6d41\u7a0b\uff0c\u800c\u662f\u76f4\u63a5",(0,r.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/kubernetes/blob/master/pkg/proxy/kubemark/hollow_proxy.go"},"\u521d\u59cb\u5316"),"\u5c0d\u61c9\u7684\u7269\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-golang="},'return &HollowProxy{\n    ProxyServer: &proxyapp.ProxyServer{\n        Config: &proxyconfigapi.KubeProxyConfiguration{\n            Mode:             proxyconfigapi.ProxyMode("fake"),\n            ConfigSyncPeriod: metav1.Duration{Duration: 30 * time.Second},\n            Linux: proxyconfigapi.KubeProxyLinuxConfiguration{\n                OOMScoreAdj: ptr.To[int32](0),\n            },\n        },\n\n        Client:      client,\n        Proxier:     &FakeProxier{},\n        Broadcaster: broadcaster,\n        Recorder:    recorder,\n        NodeRef: &v1.ObjectReference{\n            Kind:      "Node",\n            Name:      nodeName,\n            UID:       types.UID(nodeName),\n            Namespace: "",\n        },\n    },\n}\n')),(0,r.kt)("p",null,"\u5f9e\u6700\u4e0a\u9762\u4e8b\u4ef6\u7684\u8a3b\u518a\u4f86\u770b\uff0c\u74b0\u5883\u4e2d\u5fc5\u9808\u8981\u5148\u958b\u555f\u4e00\u500b feature gate \u624d\u6703\u57f7\u884c\uff0c\u8a72 feature gate \u904e\u5f80\u90fd\u662f alpha \u76f4\u5230 1.30 \u624d\u8f49\u70ba Beta \u4e26\u4e14\u8b8a\u6210\u9810\u8a2d\u57f7\u884c\u3002\n\u56e0\u6b64\u9019\u500b\u554f\u984c\u7684\u4fee\u6b63\u60c5\u6cc1\u6709\u5e7e\u500b"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u95dc\u9589\u8a72 feature gate\uff0c\u907f\u514d\u4e0d\u9700\u8981\u7684\u8a3b\u518a"),(0,r.kt)("li",{parentName:"ol"},"\u5ffd\u7565\u8a72\u8a3b\u518a")),(0,r.kt)("p",null,"\u7531\u65bc\u672c\u6e2c\u8a66\u74b0\u5883\u4e2d\u5df2\u7d93\u91dd\u5c0d crio \u53bb\u81ea\u884c\u4fee\u6539\u7a0b\u5f0f\u78bc\uff0c\u6240\u4ee5\u5c31\u8d70 (2) \u7684\u65b9\u5f0f\uff0c\u5c07\u76f8\u95dc\u7684\u7a0b\u5f0f\u78bc\u7d66\u8a3b\u89e3\u6389\uff0c\u56e0\u6b64\u6700\u5f8c\u90e8\u7f72\u7684\u74b0\u5883\u624d\u6703\u4f7f\u7528\u4e00\u500b\u540d\u70ba v1.31.0-crio-dev \u7684\u6a94\u6848\uff0c\u8a72\u6a94\u6848\u5c31\u5305\u542b\u4e0a\u8ff0\u6e2c\u8a66\u3002"),(0,r.kt)("p",null,"\u6839\u64da\u7406\u89e3\uff0c\u7406\u8ad6\u4e0a\u4f7f\u7528 v1.29.0 \u7684\u74b0\u5883\u61c9\u8a72\u5c31\u4e0d\u6703\u649e\u5230\u6b64\u554f\u984c\uff0c\u4e0d\u904e\u9084\u6c92\u6709\u91dd\u5c0d v1.29.0 \u53bb\u9a57\u8b49\u3002"),(0,r.kt)("h1",{id:"summary"},"Summary"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Kubemark \u662f\u4e00\u5957\u53ef\u4ee5\u900f\u904e k8s pod \u8f49\u8b8a\u53bb\u8a3b\u518a k8s \u7bc0\u9ede\u7684\u5de5\u5177"),(0,r.kt)("li",{parentName:"ol"},"\u6bcf\u500b Pod \u90fd\u6703\u904b\u884c\u5169\u500b container\uff0c\u5206\u5225\u662f kubelet \u8207 kube-proxy"),(0,r.kt)("li",{parentName:"ol"},"Kubemark \u7684\u76ee\u7684\u662f\u7528\u4f86\u9a57\u8b49 Controller \u7b49\u76f8\u95dc\u5de5\u5177\u7684\u898f\u6a21\u6027\uff0c\u7531\u65bc\u8a72\u7bc0\u9ede\u662f\u6a21\u64ec\u7684\uff0c\u56e0\u6b64\u904e\u65bc\u8907\u96dc\u7684 CNI \u52e2\u5fc5\u6703\u9047\u5230\u5f88\u591a\u554f\u984c\uff0c\u56e0\u6b64\u4e0d\u9069\u5408\u7528\u4f86\u9a57\u8b49\u7db2\u8def\u65b9\u9762\u7684\u6548\u80fd\u8207\u61c9\u7528"),(0,r.kt)("li",{parentName:"ol"},"Kubemark \u6c92\u6709\u5b98\u65b9\u7684 Image\uff0c\u4f7f\u7528\u4e0a\u8acb\u81ea\u884c\u4e0b\u8f09\u4e26\u4e14\u7de8\u8b6f")))}p.isMDXComponent=!0},42254:(e,n,o)=>{o.d(n,{Z:()=>t});const t=o.p+"assets/images/ByiaCwKn0-bd160c26ad93967d9cb6e3c5330a72bf.png"},12144:(e,n,o)=>{o.d(n,{Z:()=>t});const t=o.p+"assets/images/S19oQGj2A-17016a2b00a9b76755ec3ad9e8f64da7.png"}}]);
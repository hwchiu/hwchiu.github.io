"use strict";(self.webpackChunkhwchiu=self.webpackChunkhwchiu||[]).push([[19264],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>d});var l=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,l,a=function(e,t){if(null==e)return{};var n,l,a={},r=Object.keys(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var o=l.createContext({}),m=function(e){var t=l.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):p(p({},t),e)),n},s=function(e){var t=m(e.components);return l.createElement(o.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return l.createElement(l.Fragment,{},t)}},h=l.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,o=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),u=m(n),h=a,d=u["".concat(o,".").concat(h)]||u[h]||c[h]||r;return n?l.createElement(d,p(p({ref:t},s),{},{components:n})):l.createElement(d,p({ref:t},s))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,p=new Array(r);p[0]=h;var i={};for(var o in t)hasOwnProperty.call(t,o)&&(i[o]=t[o]);i.originalType=e,i[u]="string"==typeof e?e:a,p[1]=i;for(var m=2;m<r;m++)p[m]=n[m];return l.createElement.apply(null,p)}return l.createElement.apply(null,n)}h.displayName="MDXCreateElement"},5266:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>p,default:()=>c,frontMatter:()=>r,metadata:()=>i,toc:()=>m});var l=n(87462),a=(n(67294),n(3905));const r={title:"Helm \u4ecb\u7d39",sidebar_position:3,tags:["iThome","DevOps","Kubernetes"],description:"iThome-2020 \u7cfb\u5217\u6587\u7ae0",date:new Date("2020-10-25T19:34:12.000Z")},p=void 0,i={unversionedId:"2020/iThome_Challenge/cicd-3",id:"2020/iThome_Challenge/cicd-3",title:"Helm \u4ecb\u7d39",description:"iThome-2020 \u7cfb\u5217\u6587\u7ae0",source:"@site/docs/2020/iThome_Challenge/cicd-3.md",sourceDirName:"2020/iThome_Challenge",slug:"/2020/iThome_Challenge/cicd-3",permalink:"/docs/2020/iThome_Challenge/cicd-3",draft:!1,tags:[{label:"iThome",permalink:"/docs/tags/i-thome"},{label:"DevOps",permalink:"/docs/tags/dev-ops"},{label:"Kubernetes",permalink:"/docs/tags/kubernetes"}],version:"current",lastUpdatedBy:"HungWei Chiu",sidebarPosition:3,frontMatter:{title:"Helm \u4ecb\u7d39",sidebar_position:3,tags:["iThome","DevOps","Kubernetes"],description:"iThome-2020 \u7cfb\u5217\u6587\u7ae0",date:"2020-10-25T19:34:12.000Z"},sidebar:"techPost",previous:{title:"Kubernetes \u7269\u4ef6\u7ba1\u7406",permalink:"/docs/2020/iThome_Challenge/cicd-2"},next:{title:"Helm \u64cd\u4f5c\u7bc4\u4f8b",permalink:"/docs/2020/iThome_Challenge/cicd-4"}},o={},m=[{value:"Helm",id:"helm",level:2},{value:"Purpose",id:"purpose",level:2},{value:"\u5ba2\u88fd\u5316",id:"\u5ba2\u88fd\u5316",level:2},{value:"\u6563\u64ad\u8207\u767c\u4f48",id:"\u6563\u64ad\u8207\u767c\u4f48",level:2},{value:"Helm v2 v.s Helm v3",id:"helm-v2-vs-helm-v3",level:2}],s={toc:m},u="wrapper";function c(e){let{components:t,...n}=e;return(0,a.kt)(u,(0,l.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"\u4e0a\u7bc7\u6587\u7ae0\u63a2\u8a0e\u4e86\u95dc\u65bc Kubernetes \u5167\u61c9\u7528\u7a0b\u5f0f\u7684\u5305\u88dd\u65b9\u5f0f\uff0c\u63d0\u5230\u4e86\u4e00\u4e9b\u76f8\u95dc\u7684\u8b70\u984c\uff0c\u5305\u542b\u4e86\u5982\u4f55\u6563\u4f48\u5b89\u88dd\u6a94\u6848\uff0c\u540c\u6642\u652f\u63f4\u4e0d\u540c\u7248\u672c\u7684\u9078\u64c7\uff0c\u4ee5\u53ca\u5ba2\u88fd\u5316\u7684\u9078\u9805\u3002"),(0,a.kt)("p",null,"\u56e0\u6b64\u672c\u7bc7\u6211\u5011\u5c07\u4f86\u4ecb\u7d39 Helm3 \u9019\u500b\u5de5\u5177\uff0c\u540c\u6642\u4e5f\u6703\u4ecb\u7d39 Helm \u662f\u5982\u4f55\u5be6\u73fe\u4e0a\u8ff0\u6240\u63d0\u904e\u7684\u5404\u7a2e\u8b70\u984c"),(0,a.kt)("h2",{id:"helm"},"Helm"),(0,a.kt)("p",null,"\u6839\u64da\u5b98\u65b9\u6558\u8ff0, Helm \u662f\u4e00\u500b\u7ba1\u7406 Kubernetes \u61c9\u7528\u7a0b\u5f0f\u7684\u5957\u4ef6\uff0c\u900f\u904e Helm Charts \u9019\u5957\u7cfb\u7d71\uff0c\u53ef\u4ee5\u5e6b\u52a9\u958b\u767c\u8005\u6253\u5305\uff0c\u5b89\u88dd\uff0c\u5347\u7d1a\u76f8\u95dc\u7684 Kubernetes \u61c9\u7528\u7a0b\u5f0f\u3002"),(0,a.kt)("p",null,"\u6b64\u5916\uff0c Helm Charts \u672c\u8eab\u4e5f\u88ab\u8a2d\u8a08\u5f97\u5f88\u5bb9\u6613\u53bb\u5275\u9020\uff0c\u7248\u672c\u63a7\u5236\uff0c\u5206\u4eab\u4ee5\u53ca\u767c\u4f48\uff0c\u6240\u4ee5\u900f\u904e Helm Charts \u5c31\u53ef\u4ee5\u907f\u514d\u5230\u8655 Copy-and-Paste \u5404\u5f0f\u5404\u6a23\u7684 Yaml\u3002"),(0,a.kt)("p",null,"Helm \u672c\u8eab\u4e5f\u662f\u4e00\u500b\u958b\u6e90\u5c08\u6848\uff0c\u800c\u4e14\u4e5f\u662f ",(0,a.kt)("a",{parentName:"p",href:"https://cncf.io/"},"CNCF")," \u5167\u7684\u7562\u696d\u5c08\u6848\uff0c\u76ee\u524d\u662f\u7531  ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/helm/community"},"Helm \u793e\u7fa4")," \u9032\u884c\u7dad\u8b77"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Helm helps you manage Kubernetes applications \u2014 Helm Charts help you define, install, and upgrade even the most complex Kubernetes application.\nCharts are easy to create, version, share, and publish \u2014 so start using Helm and stop the copy-and-paste.\nHelm is a graduated project in the ",(0,a.kt)("a",{parentName:"p",href:"https://cncf.io/"},"CNCF")," and is maintained by the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/helm/community"},"Helm community"),".")),(0,a.kt)("p",null,"Helm \u7684\u67b6\u69cb\u6982\u5ff5\u975e\u5e38\u7c21\u55ae\uff0c\u5c31\u662f\u5c07\u6574\u5305 Kubernetes \u7684\u6240\u6709\u8cc7\u6e90\u7269\u4ef6\u518d\u758a\u52a0\u4e00\u5c64\u62bd\u8c61\u5c64\uff0c\u9019\u500b\u62bd\u8c61\u5c64\u662f\u7d66 Helm \u5de5\u5177\u4f7f\u7528\u7684\uff0cHelm \u7684\u5de5\u5177\u6703\u6709\u81ea\u5df1\u7684\u65b9\u5f0f\u53bb\u89e3\u8b80\u9019\u500b\u62bd\u8c61\u5c64\uff0c\u6700\u5f8c\u7522\u751f\u51fa\u6700\u5f8c\u7684 Kubernetes \u8cc7\u6e90\u7269\u4ef6\u7136\u5f8c\u5b89\u88dd\u5230 Kubernetes \u88e1\u9762"),(0,a.kt)("h2",{id:"purpose"},"Purpose"),(0,a.kt)("p",null,"Helm \u5c07\u6240\u6709 Kubernetes \u7684\u61c9\u7528\u7a0b\u5f0f\u90fd\u7d71\u7a31\u70ba ",(0,a.kt)("inlineCode",{parentName:"p"},"Charts"),"."),(0,a.kt)("p",null,"Helm \u7684\u5de5\u5177\u6703\u5c07\u9019\u4e9b Charts \u6253\u5305\u6210 ",(0,a.kt)("strong",{parentName:"p"},"tgz")," \u7684\u6a94\u6848\uff0c\u63a5\u4e0b\u4f86\u53ef\u4ee5\u53ef\u4ee5\u900f\u904e Helm Charts Server \u7684\u65b9\u5f0f\u5c07\u9019\u500b ",(0,a.kt)("strong",{parentName:"p"},"tgz")," \u7684\u6a94\u6848\u7d66\u6563\u4f48\u51fa\u53bb\uff0c\u8b93\u5176"),(0,a.kt)("p",null,"\u4ed6\u4f7f\u7528\u8005\u53ef\u4ee5\u65b9\u4fbf\u5730\u53d6\u5f97\u9019\u4e9b\u5df2\u7d93\u6253\u5305\u597d\u7684\u61c9\u7528\u7a0b\u5f0f(Charts)\u3002"),(0,a.kt)("p",null,"\u6b64\u5916\uff0c Helm \u7684\u5de5\u5177\u4e5f\u53ef\u4ee5\u76f4\u63a5\u91dd\u5c0d\u9019\u4e9b Charts \u6240\u63cf\u8ff0\u7684\u61c9\u7528\u7a0b\u5f0f\u53bb\u5b89\u88dd\u5230/\u89e3\u9664\u65bc Kubernetes \u53e2\u96c6\u4e2d"),(0,a.kt)("p",null,"\u5c0d\u65bc\u5b89\u88dd\u5230 Kubernetes \u4e2d\u7684\u61c9\u7528\u7a0b\u5f0f\uff0c Helm \u7a31\u5176\u70ba ",(0,a.kt)("inlineCode",{parentName:"p"},"Release")),(0,a.kt)("p",null,"\u800c Chart \u5230 Release \u4e2d\u9593\u6709\u4e00\u500b\u5ba2\u88fd\u5316\u7684\u6982\u5ff5\uff0c\u7a31\u70ba Config\uff0c\u900f\u904e\u9019\u500b config \u53ef\u4ee5\u7522\u751f\u51fa\u9069\u61c9\u4e0d\u540c\u74b0\u5883\u7684 Kubernetes Yaml"),(0,a.kt)("p",null,"\u9019\u4e09\u8005\u5982\u4e0b\u5716\u6240\u793a\uff0c\u6bcf\u500b Charts \u642d\u914d\u4e0d\u540c\u74b0\u5883\u7684\u8a2d\u5b9a\u6a94\u6848\u6700\u5f8c\u6703\u7522\u751f\u51fa\u4e00\u500b\u552f\u4e00\u7684 Release \u7269\u4ef6\uff0c\u800c\u8a72\u7269\u4ef6\u5c31\u4ee3\u8868\u8005\u8a72\u61c9\u7528\u7a0b\u5f0f\u65bc Kubernetes \u5167\u7684\u5be6\u9ad4"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://i.imgur.com/60lEp4A.jpg",alt:null})),(0,a.kt)("h2",{id:"\u5ba2\u88fd\u5316"},"\u5ba2\u88fd\u5316"),(0,a.kt)("p",null,"\u70ba\u4e86\u6eff\u8db3\u5ba2\u88fd\u5316\u7684\u9700\u6c42\uff0c\u5e0c\u671b\u958b\u767c\u8005\u53ef\u4ee5\u7c21\u55ae\u7684\u8a2d\u8a08 Charts\uff0c\u4f7f\u7528\u8005\u53c8\u53ef\u4ee5\u7c21\u55ae\u7684\u5ba2\u88fd\u5316\u4f7f\u7528\uff0c\u9019\u90e8\u5206 Helm \u63a1\u7528\u7684\u662f Go Template \u7684\u65b9\u5f0f\u4f86\u9032\u884c Yaml \u7684\u5ba2\u88fd\u5316\uff0c\u8209\u4f8b\u4f86\u8aaa"),(0,a.kt)("p",null,"\u4e0b\u9762\u4e00\u500b\u5e38\u898b\u7684 Service Yaml \u6a94\u6848\uff0c\u5167\u5bb9\u5168\u90e8\u90fd\u5beb\u6b7b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"apiVersion: v1\nkind: Service\nmetadata:\n  name: example\n  labels:\n        app: example\nspec:\n  type: ClusterIP\n  ports:\n    - port: 80\n      targetPort: http\n      protocol: TCP\n      name: http\n  selector:\n    app.kubernetes.io/name: example\n    app.kubernetes.io/instance: example\n")),(0,a.kt)("p",null,"\u9019\u7a2e\u60c5\u6cc1\u4e0b\u4f7f\u7528\u8005\u5c31\u6c92\u6709\u8fa6\u6cd5\u5ba2\u88fd\u5316\u9700\u6c42\uff0c\u8b6c\u5982\u9700\u8981\u7684 Port(80)\uff0c\u6216\u662f\u4e0d\u540c\u985e\u578b (ClusterIP/NodePort)"),(0,a.kt)("p",null,"Helm \u91dd\u5c0d\u9019\u7a2e\u60c5\u6cc1\u5f15\u5165\u4e86 Go Template\uff0c\u4f7f\u5f97 Yaml \u6a94\u6848\u7684\u6a23\u5b50\u53ef\u80fd\u6703\u8b8a\u6210\u5982\u4e0b\u5716"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml="},'apiVersion: v1\nkind: Service\nmetadata:\n  name: {{ include "example.fullname" . }}\n  labels:\n{{ include "example.labels" . | indent 4 }}\nspec:\n  type: {{ .Values.service.type }}\n  ports:\n    - port: {{ .Values.service.port }}\n      targetPort: http\n      protocol: TCP\n      name: http\n  selector:\n    app.kubernetes.io/name: {{ include "example.name" . }}\n    app.kubernetes.io/instance: {{ .Release.Name }}\n')),(0,a.kt)("p",null,"\u53ef\u4ee5\u770b\u5230\u4e0a\u8ff0\u7684\u63a1\u7528\u5927\u91cf\u7684 ",(0,a.kt)("strong",{parentName:"p"},"\u5927\u62ec\u865f")," \u7684\u683c\u5f0f\u4f86\u9032\u884c\u8b8a\u6578\u7684\u66ff\u63db\uff0c\u4f7f\u7528\u8005\u518d\u4f7f\u7528\u8a72 Charts \u7684\u6642\u5019\u6703\u5c0d\u4e0a\u8ff0\u7684\u8b8a\u6578\u9032\u884c\u8a2d\u5b9a\uff0c\u800c\u9019\u4e9b\u8b8a\u6578\u6700\u5f8c\u5728\u6e32\u67d3\u9019\u4e9b Template \u6a94\u6848\u7684\u6642\u5019\u5c31\u6703\u7d66\u66ff\u63db\u6389\u6700\u5f8c\u7522\u751f\u51fa\u771f\u6b63\u7684 Yaml \u6a94\u6848\u3002"),(0,a.kt)("p",null,"\u8209\u4f8b\u4f86\u8aaa\uff0c\u7b2c\u4e00\u500b\u4f7f\u7528\u8005\u5b89\u88dd\u7684\u6642\u5019\u8f38\u5165 ",(0,a.kt)("inlineCode",{parentName:"p"},"service.type: ClusterIP"),"  \u5c31\u6703\u7522\u751f\u51fa\u4e00\u500b\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"ClusterIP")," \u7684 Service\uff0c\u800c\u82e5\u8f38\u5165\u7684\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"service.type:NodePort"),"  \u5247\u6703\u7522\u751f\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"NodePort")," \u7684 Service."),(0,a.kt)("p",null,"\u70ba\u4e86\u65b9\u4fbf\u4f7f\u7528\u8005\u53bb\u4f7f\u7528\uff0c\u958b\u767c\u8005\u8a2d\u8a08\u7684\u6642\u5019\u53ef\u4ee5\u6e96\u5099\u4e00\u5957\u9810\u8a2d\u503c\u653e\u5230\u4e00\u500b\u540d\u70ba ",(0,a.kt)("inlineCode",{parentName:"p"},"values.yaml")," \u7684\u6a94\u6848\u88e1\u9762\uff0c\u4f7f\u7528\u8005\u53ef\u4ee5\u76f4\u63a5\u4fee\u6539\u8a72\u6a94\u6848\u6216\u662f\u4f7f\u7528\u5225\u7684\u6a94\u6848\u4f86\u66ff\u63db\u6240\u6709\u7684\u8b8a\u6578"),(0,a.kt)("p",null,"\u9019\u7a2e Go Template \u7684\u65b9\u5f0f\u7684\u78ba\u53ef\u4ee5\u8b93 Yaml \u8b8a\u5f97\u5f88\u5f48\u6027\uff0c\u53ef\u4ee5\u8b93\u4f7f\u7528\u8005\u91dd\u5c0d\u4e0d\u540c\u60c5\u5883\u50b3\u5165\u4e0d\u540c\u7684\u6578\u503c\uff0c\u4f46\u662f\u6211\u8a8d\u70ba\u4ed6\u4e5f\u5e36\u4f86\u7684\u66f4\u591a\u7684\u8907\u96dc\u6027\uff0c\u56e0\u70ba\u9019\u4e9b Template \u7684\u7528\u6cd5\u5341\u5206\u591a\u5143\uff0c\u5f9e\u57fa\u672c\u7684\u8b8a\u6578\u66ff\u63db\uff0c\u5230 FOR \u8ff4\u5708\uff0c IF \u5224\u65b7\u689d\u4ef6\u7b49\u90fd\u53ef\u4ee5\u4f7f\u7528\u3002\n\u5c0d\u65bc Helm \u7528\u6cd5\u4e0d\u7406\u89e3\u7684\u4eba\u521d\u6b21\u770b\u5230\u9019\u4e9b\u6eff\u6eff\u88ab ",(0,a.kt)("inlineCode",{parentName:"p"},"\u5927\u62ec\u865f")," \u5165\u4fb5\u7684 Yaml\u52a0\u4e0a\u4e00\u5806\u4e0d\u78ba\u5b9a\u662f\u5e79\u561b\u7528\u7684\u95dc\u9375\u5b57\uff0c\u5176\u5be6\u6703\u96e3\u4ee5\u5165\u624b\uff0c\u6c92\u6709\u82b1\u66f4\u591a\u6642\u9593\u53bb\u7406\u89e3\u7684\u60c5\u6cc1\u4e0b\uff0c\u53ef\u80fd\u5c31\u53ea\u6703\u4f7f\u7528\u800c\u6c92\u6709\u8fa6\u6cd5\u6210\u70ba\u4e00\u500b\u958b\u767c\u8005\u53bb\u8a2d\u8a08\u4e00\u500b\u597d\u7684 Helm Chart"),(0,a.kt)("h2",{id:"\u6563\u64ad\u8207\u767c\u4f48"},"\u6563\u64ad\u8207\u767c\u4f48"),(0,a.kt)("p",null,"\u7576\u958b\u767c\u8005\u6e96\u5099\u597d\u4e00\u500b Helm Charts \u7684\u6a94\u6848\u6642\u5019\uff0c\u5c31\u53ef\u4ee5\u900f\u904e\u6253\u5305\u7684\u65b9\u5f0f\u5c07\u5176\u4e0a\u50b3\u5230\u5b98\u65b9\u6216\u662f\u81ea\u884c\u7dad\u8b77\u7684 Helm Chart \u4f3a\u670d\u5668"),(0,a.kt)("p",null,"\u4e00\u500b\u4f7f\u7528\u7bc4\u4f8b\u5982\u4e0b(\u53c3\u8003\u81ea\u5b98\u7db2)"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"$ helm repo add stable https://kubernetes-charts.storage.googleapis.com/\n$ helm search repo stable\nNAME                                    CHART VERSION   APP VERSION                     DESCRIPTION\nstable/acs-engine-autoscaler            2.2.2           2.1.1                           DEPRECATED Scales worker nodes within agent pools\nstable/aerospike                        0.2.8           v4.5.0.5                        A Helm chart for Aerospike in Kubernetes\nstable/airflow                          4.1.0           1.10.4                          Airflow is a platform to programmatically autho...\nstable/ambassador                       4.1.0           0.81.0                          A Helm chart for Datawire Ambassador\n...\n\n")),(0,a.kt)("p",null,"\u4e0a\u8ff0\u6307\u4ee4\u4ee3\u8868\u7684\u610f\u601d\u662f\u6211\u60f3\u8981\u5c07 ",(0,a.kt)("inlineCode",{parentName:"p"},"https://kubernetes-charts.storage.googleapis.com/")," \u9019\u500b Helm Charts \u7684\u4f3a\u670d\u5668\u52a0\u5165\u5230\u672c\u5730 ",(0,a.kt)("inlineCode",{parentName:"p"},"Helm")," \u6307\u4ee4\u7684\u4f86\u6e90\u4e4b\u4e00\uff0c\u4e26\u4e14\u5617\u8a66\u641c\u5c0b\u4e0a\u9762\u4efb\u4f55\u6709 ",(0,a.kt)("inlineCode",{parentName:"p"},"stable")," \u5b57\u773c\u7684 Helm Chart"),(0,a.kt)("p",null,"\u4e0b\u5217\u6307\u4ee4\u5247\u53ef\u4ee5\u5617\u8a66\u5b89\u88dd ",(0,a.kt)("inlineCode",{parentName:"p"},"stable/mysql")," \u9019\u500b Helm Chart \u5230 Kubernetes \u4e2d\uff0c\u7522\u751f\u7684 Release \u540d\u7a31\u70ba ",(0,a.kt)("inlineCode",{parentName:"p"},"smiling-penguin")),(0,a.kt)("p",null,"\u9019\u908a\u8981\u6ce8\u610f\u7684\u662f Helm \u672c\u8eab\u6703\u9700\u8981\u5b58\u53d6 Kubernetes \u53e2\u96c6\uff0c\u6240\u4ee5\u4e5f\u662f\u4f7f\u7528 KUBECONFIG \u7b49\u65b9\u5f0f\u4f86\u8a2d\u5b9a\u5b58\u53d6\u6b0a\u9650"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"$ helm install stable/mysql --generate-name\nReleased smiling-penguin\n")),(0,a.kt)("p",null,"\u6700\u5f8c\u53ef\u4ee5\u900f\u904e ",(0,a.kt)("inlineCode",{parentName:"p"},"Helm ls")," \u7684\u6307\u4ee4\u4f86\u89c0\u770b\u76ee\u524d\u5b89\u88dd\u65bc\u53e2\u96c6\u5167\u7684 Helm Release."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"$ helm ls\nNAME             VERSION   UPDATED                   STATUS    CHART\nsmiling-penguin  1         Wed Sep 28 12:59:46 2016  DEPLOYED  mysql-0.1.0\n")),(0,a.kt)("h2",{id:"helm-v2-vs-helm-v3"},"Helm v2 v.s Helm v3"),(0,a.kt)("p",null,"Helm \u76ee\u524d\u6d41\u901a\u7684\u7248\u672c\u6709 Helm v2 \u4ee5\u53ca Helm v3\uff0c\u4f7f\u7528\u8d77\u4f86\u5dee\u5225\u4e0d\u6703\u975e\u5e38\u8a87\u5f35\uff0c\u4f46\u662f\u5982\u679c\u662f\u65b0\u4e0a\u624b\u7684\u670b\u53cb\u5f37\u70c8\u5efa\u8b70\u76f4\u63a5\u4e0a Helm v3\uff0c\u800c\u4e0d\u8981\u4f7f\u7528 Helm v2\uff0c\u5426\u5247\u5f8c\u4f86\u9084\u8981\u8655\u7406\u66f4\u65b0\u642c\u79fb\u7684\u554f\u984c\u3002"),(0,a.kt)("p",null,"\u5b98\u65b9\u7db2\u7ad9\u5c31\u6709\u5c08\u9580\u4e00\u500b\u9801\u9762\u5728\u4ecb\u7d39\u5982\u4f55\u5f9e Helm2 \u642c\u79fb\u81f3 Helm3, ",(0,a.kt)("a",{parentName:"p",href:"https://helm.sh/docs/topics/v2_v3_migration/"},"Migrating Helm v2 to v3"),", \u6709\u8208\u8da3\u7684\u4eba\u53ef\u4ee5\u9ede\u9032\u53bb\u770b\u66f4\u591a\u8a73\u7d30\u7684\u4ecb\u7d39\u3002"),(0,a.kt)("p",null,"\u4e0b\u9762\u4f86\u5217\u4e00\u4e0b ",(0,a.kt)("a",{parentName:"p",href:"https://v3.helm.sh/docs/faq/#changes-since-helm-2"},"v3 \u4ee5\u53ca v2 \u6700\u5927\u7684\u5dee\u7570")),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Tiller \u7684\u79fb\u9664\uff0c\u904e\u5f80\u4f7f\u7528 Helm v2 \u7684\u6642\u5019\uff0c\u9084\u8981\u5728\u7cfb\u7d71\u5167\u5148\u884c\u5b89\u88dd\u4e00\u500b\u53eb\u505a Tiller \u7684\u4f3a\u670d\u5668\uff0c\u540c\u6642\u4e5f\u8981\u5c0d\u5176\u8a2d\u5b9a\u4e00\u4e9b\u6b0a\u9650\uff0c\u5b89\u88dd\u8d77\u4f86\u9ebb\u7169\uff0c\u540c\u6642\u4e5f\u6709\u6f5b\u5728\u7684\u5b89\u5168\u6027\u554f\u984c\u3002 Helm v3 \u57fa\u672c\u4e0a\u6574\u500b\u67b6\u69cb\u8b8a\u5f97\u66f4\u4e7e\u6de8\uff0c\u53ea\u9700\u8981\u4e00\u500b Helm \u6307\u4ee4\u5373\u53ef"),(0,a.kt)("li",{parentName:"ol"},"Helm Chart \u88e1\u9762\u76f8\u95dc\u7684 apiVersion \u9700\u8981\u8df3\u865f\uff0c\u5f9e v1 \u8df3\u5230 v2\uff0c\u624d\u6703\u5ba3\u544a\u8a72 Helm Chart \u662f\u5c6c\u65bc Helm v3."),(0,a.kt)("li",{parentName:"ol"},"\u66f4\u65b0\u61c9\u7528\u7a0b\u5f0f\u7684\u7b56\u7565\uff0c v3 \u4f7f\u7528\u7684\u662f\u4e09\u65b9\u6bd4\u5c0d\u4f86\u9032\u884c\u6e2c\u8a66\uff0c\u5c07\u6703\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"li"},"\u904e\u5f80\u72c0\u614b"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"\u7576\u524d\u904b\u4f5c\u72c0\u614b")," \u4ee5\u53ca ",(0,a.kt)("inlineCode",{parentName:"li"},"\u671f\u671b\u72c0\u614b")," \u4f86\u6bd4\u5c0d\uff0c\u6700\u5f8c\u7522\u751f\u66f4\u65b0\u5f8c\u7684\u5167\u5bb9"),(0,a.kt)("li",{parentName:"ol"},"OCI \u7684\u652f\u63f4\uff0c\u9019\u500b\u662f\u6211\u89ba\u5f97\u6700\u6709\u8da3\u7684\u529f\u80fd\uff0c\u672a\u4f86 Helm Chart \u6253\u5305\u5f8c\u7684\u683c\u5f0f\u53ef\u4ee5\u9075\u5faa OCI (Open Contaianer Initiative) \u7684\u683c\u5f0f\uff0c\u9019\u610f\u5473\u8005\u6211\u5011\u672a\u4f86\u5c07\u6709\u6a5f\u6703\u4f7f\u7528 Container Registry \u4f86\u5b58\u653e Helm Chart, \u53ea\u9700\u8981\u4e00\u500b\u4f3a\u670d\u5668\u5c31\u53ef\u4ee5\u540c\u6642\u6eff\u8db3 Container Image \u4ee5\u53ca Helm Chart\uff0c\u5982\u679c\u6709\u8208\u8da3\u7684\u4eba\u53ef\u4ee5\u5617\u8a66\u4f7f\u7528 Harbor \u9019\u5957 Contaienr Registry \u7684\u89e3\u6c7a\u65b9\u6848\u4f86\u9ad4\u9a57\u770b\u770b\u9019\u500b\u529f\u80fd")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u60f3\u8981\u77e5\u9053\u66f4\u591a\u95dc\u65bc OCI \u7684\u4ecb\u7d39\uff0c\u53ef\u4ee5\u53c3\u8003\u9019\u7bc7",(0,a.kt)("a",{parentName:"p",href:"https://www.hwchiu.com/docs/2019/iThome_Challenge/container-design-i"},"\u6587\u7ae0"))),(0,a.kt)("ol",{start:5},(0,a.kt)("li",{parentName:"ol"},"Helm \u4e00\u4e9b\u5b50\u6307\u4ee4\u7684\u65b0\u589e\u8207\u79fb\u9664")),(0,a.kt)("p",null,"\u57fa\u672c\u4e0a\u4fee\u6539\u7684\u7d30\u90e8\u5167\u5bb9\u975e\u5e38\u591a\uff0c\u6709\u8208\u8da3\u7684\u5efa\u8b70\u53c3\u8003\u4e0a\u8ff0\u5b98\u65b9\u9023\u7d50\u53bb\u770b\u770b\u4fee\u6539\u7d30\u7bc0\uff0c\u53ef\u4ee5\u66f4\u52a0\u77ad\u89e3 Helm3."))}c.isMDXComponent=!0}}]);
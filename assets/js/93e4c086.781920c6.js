"use strict";(self.webpackChunkhwchiu=self.webpackChunkhwchiu||[]).push([[4067],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>P});var a=r(67294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,a,o=function(e,t){if(null==e)return{};var r,a,o={},n=Object.keys(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=a.createContext({}),u=function(e){var t=a.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var r=e.components,o=e.mdxType,n=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=u(r),m=o,P=c["".concat(s,".").concat(m)]||c[m]||d[m]||n;return r?a.createElement(P,l(l({ref:t},p),{},{components:r})):a.createElement(P,l({ref:t},p))}));function P(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var n=r.length,l=new Array(n);l[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[c]="string"==typeof e?e:o,l[1]=i;for(var u=2;u<n;u++)l[u]=r[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,r)}m.displayName="MDXCreateElement"},69040:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>n,metadata:()=>i,toc:()=>u});var a=r(87462),o=(r(67294),r(3905));const n={title:"Kubernetes \u4e2d VPA, HPA, CA, CPA \u7684\u5dee\u7570\u662f\u4ec0\u9ebc?",keywords:["Kubernetes"],authors:"hwchiu",image:"https://hackmd.io/_uploads/autoscaler.png",tags:["Kubernetes","Linux","DevOps"],description:"\u7c21\u8ff0\u4e00\u4e0b Kubernets \u4e2d HPA, VPA, CPA, CA \u7b49\u76f8\u95dc\u6280\u8853\u7684\u5dee\u7570"},l=void 0,i={unversionedId:"2023/autoscaler",id:"2023/autoscaler",title:"Kubernetes \u4e2d VPA, HPA, CA, CPA \u7684\u5dee\u7570\u662f\u4ec0\u9ebc?",description:"\u7c21\u8ff0\u4e00\u4e0b Kubernets \u4e2d HPA, VPA, CPA, CA \u7b49\u76f8\u95dc\u6280\u8853\u7684\u5dee\u7570",source:"@site/docs/2023/autoscaler.md",sourceDirName:"2023",slug:"/2023/autoscaler",permalink:"/docs/2023/autoscaler",draft:!1,tags:[{label:"Kubernetes",permalink:"/docs/tags/kubernetes"},{label:"Linux",permalink:"/docs/tags/linux"},{label:"DevOps",permalink:"/docs/tags/dev-ops"}],version:"current",lastUpdatedBy:"HungWei Chiu",frontMatter:{title:"Kubernetes \u4e2d VPA, HPA, CA, CPA \u7684\u5dee\u7570\u662f\u4ec0\u9ebc?",keywords:["Kubernetes"],authors:"hwchiu",image:"https://hackmd.io/_uploads/autoscaler.png",tags:["Kubernetes","Linux","DevOps"],description:"\u7c21\u8ff0\u4e00\u4e0b Kubernets \u4e2d HPA, VPA, CPA, CA \u7b49\u76f8\u95dc\u6280\u8853\u7684\u5dee\u7570"},sidebar:"techPost",previous:{title:"2023",permalink:"/docs/category/2023"},next:{title:"GitOps \u4e0b\u7684 Git Repo \u67b6\u69cb\u63a2\u8a0e",permalink:"/docs/2023/gitops-repo-structure"}},s={},u=[{value:"\u76ee\u6a19",id:"\u76ee\u6a19",level:3},{value:"\u89f8\u767c\u689d\u4ef6",id:"\u89f8\u767c\u689d\u4ef6",level:3},{value:"\u8abf\u6574\u5c0d\u8c61",id:"\u8abf\u6574\u5c0d\u8c61",level:3},{value:"\u76ee\u6a19",id:"\u76ee\u6a19-1",level:3},{value:"\u89f8\u767c\u689d\u4ef6",id:"\u89f8\u767c\u689d\u4ef6-1",level:3},{value:"\u8abf\u6574\u5c0d\u8c61",id:"\u8abf\u6574\u5c0d\u8c61-1",level:3},{value:"\u76ee\u6a19",id:"\u76ee\u6a19-2",level:3},{value:"\u89f8\u767c\u689d\u4ef6",id:"\u89f8\u767c\u689d\u4ef6-2",level:3},{value:"\u8abf\u6574\u5c0d\u8c61",id:"\u8abf\u6574\u5c0d\u8c61-2",level:3},{value:"\u76ee\u6a19",id:"\u76ee\u6a19-3",level:3},{value:"\u89f8\u767c\u689d\u4ef6",id:"\u89f8\u767c\u689d\u4ef6-3",level:3},{value:"\u8abf\u6574\u5c0d\u8c61",id:"\u8abf\u6574\u5c0d\u8c61-3",level:3}],p={toc:u},c="wrapper";function d(e){let{components:t,...n}=e;return(0,o.kt)(c,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Kubernetes \u5167\u6709\u5404\u5f0f\u5404\u6a23\u7684\u81ea\u52d5\u64f4\u5c55\u6a5f\u5236\uff0c\u8b6c\u5982 HPA(Horizontal Pod Autoscaling)\uff0c\u8a72\u6280\u8853\u53ef\u6839\u64da\u4e0d\u540c\u689d\u4ef6\u800c\u52d5\u614b\u8abf\u6574 Pod \u7684\u526f\u672c\u6578\u91cf\uff0c\u4f7f\u5f97 Pod \u6709\u66f4\u597d\u7684\u80fd\u529b\u53bb\u8655\u7406\u7576\u524d\u7684\u6d41\u91cf\u800c\u4e0d\u9700\u8981\u7ba1\u7406\u4eba\u54e1\u4e0d\u505c\u4ecb\u5165\u8abf\u6574\u6578\u91cf\u3002\n\u9664\u4e86 HPA \u5916\uff0cKubernetes \u9084\u6709\u5176\u4ed6\u76f8\u95dc\u7684\u6a5f\u5236\uff0c\u5982 VPA, CA \u4ee5\u53ca CPA\uff0c\u672c\u7bc7\u6587\u7ae0\u5c31\u91dd\u5c0d\u9019\u4e9b\u985e\u5225\u9032\u884c\u63a2\u8a0e\uff0c\u4e3b\u8981\u6703\u5206\u6210"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"\u76ee\u6a19"),(0,o.kt)("li",{parentName:"ol"},"\u89f8\u767c\u689d\u4ef6"),(0,o.kt)("li",{parentName:"ol"},"\u8abf\u6574\u5c0d\u8c61")),(0,o.kt)("p",null,"\u4e09\u500b\u9762\u5411\u5206\u5225\u63a2\u8a0e"),(0,o.kt)("h1",{id:"hpa-horizontal-pod-autoscaler"},"HPA (Horizontal Pod Autoscaler)"),(0,o.kt)("h3",{id:"\u76ee\u6a19"},"\u76ee\u6a19"),(0,o.kt)("p",null,"Deployment/ReplicaSet \u53ef\u4ee5\u90e8\u7f72\u591a\u526f\u672c\u7684 Pod\uff0c\u4f46\u662f\u56fa\u5b9a\u6578\u91cf\u4e0d\u5920\u5f48\u6027\uff0c\u7279\u5225\u662f\u61c9\u7528\u7a0b\u5f0f\u672c\u8eab\u7684\u6d41\u91cf\u8207\u6642\u6bb5\u6709\u95dc\uff0c\u9019\u7a2e\u9700\u6c42\u4e0b\u5c31\u53ef\u4ee5\u900f\u904e ",(0,o.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/"},"HPA")," \u4f86\u52d5\u614b\u8abf\u6574 Pod \u7684\u6578\u91cf"),(0,o.kt)("h3",{id:"\u89f8\u767c\u689d\u4ef6"},"\u89f8\u767c\u689d\u4ef6"),(0,o.kt)("p",null,"HPA \u662f\u5167\u5efa\u65bc Kubernetes \u5167\u7684 Controller\uff0c\u5176\u6703\u8207 API Server \u53bb\u8a62\u554f\u76f8\u95dc\u8cc7\u6e90\u4f86\u78ba\u8a8d\u662f\u5426\u8981\u8abf\u6574 Pod \u7684\u6578\u91cf(\u8b8a\u591a\u6216\u662f\u8b8a\u5c11)\u3002\n\u7576\u74b0\u5883\u4e2d\u5b89\u88dd Metrics Server \u5f8c\u5c31\u53ef\u4ee5\u4f7f\u7528\u57fa\u65bc CPU/Memory \u7b49\u8cc7\u6e90\u7528\u91cf\u4f5c\u70ba\u6c7a\u7b56\u7684\u4f9d\u64da\uff0c\u9019\u4e9b\u7528\u91cf\u6703\u8207 Pod \u5167\u6240\u8a2d\u5b9a\u7684 CPU/Memory Request \u53bb\u9032\u884c\u6bd4\u8f03\u4f86\u5224\u5225\u662f\u5426\u8d85\u904e\u9580\u6abb\uff0c\u6b64\u5916\u7528\u91cf\u53ef\u4ee5\u6839\u64da Pod \u6574\u9ad4\u7528\u91cf\u6216\u662f\u91dd\u5c0d\u55ae Continaer \u53bb\u8a08\u7b97"),(0,o.kt)("h3",{id:"\u8abf\u6574\u5c0d\u8c61"},"\u8abf\u6574\u5c0d\u8c61"),(0,o.kt)("p",null,"\u8abf\u6574 Pod \u7684\u6578\u91cf\uff0c\u5176\u4e2d\u6709\u5f88\u591a\u53c3\u6578\u5305\u542b Behavior \u7b49\u53ef\u4ee5\u8abf\u6574 Pod \u6578\u91cf\u6bcf\u6b21\u66f4\u52d5\u7684\u767e\u5206\u6bd4\u6216\u662f\u7d55\u5c0d\u6578\u503c"),(0,o.kt)("h1",{id:"vpa-vertical-pod-autoscaler"},"VPA (Vertical Pod Autoscaler)"),(0,o.kt)("h3",{id:"\u76ee\u6a19-1"},"\u76ee\u6a19"),(0,o.kt)("p",null,"\u76f8\u8f03\u65bc HPA \u662f\u6c34\u5e73\u64f4\u5c55\u526f\u672c\u6578\u91cf\u4f86\u56e0\u61c9\u6d41\u91cf\u8655\u7406\uff0c ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/autoscaler/tree/master/vertical-pod-autoscaler"},"VPA")," \u63a1\u53d6\u7684\u5247\u662f\u8abf\u6574\u55ae\u4e00\u526f\u672c\u7684\u8cc7\u6e90\u7528\u91cf\uff0c\u8b6c\u5982 CPU, Memory\u3002\n\u65b0\u958b\u767c\u61c9\u7528\u7a0b\u5f0f\u8981\u90e8\u7f72\u5230 Kubernetes \u4e2d\u6642\u5f88\u5e38\u6703\u767c\u751f\u4e0d\u77e5\u9053\u8a72\u5982\u4f55\u8a2d\u5b9a Resource Request/Limit\uff0c\u800c VPA \u5247\u6703\u9577\u671f\u89c0\u5bdf\u526f\u672c\u7684\u8cc7\u6e90\u7528\u91cf\u4e26\u9032\u884c\u76f8\u95dc\u64cd\u4f5c\uff0c\u76f8\u95dc\u64cd\u4f5c\u53ef\u4ee5\u5206\u6210\u8abf\u6574\u8a2d\u5b9a\u4e26\u4e14\u91cd\u555f Pod \u4ea6\u6216\u662f\u55ae\u7d14\u7d66\u4e88\u5efa\u8b70\u4e26\u4e0d\u91cd\u555f Pod\uff0c\u5f8c\u8005\u4ef0\u8cf4\u7dad\u904b\u4eba\u54e1\u53bb\u6536\u96c6\u4e26\u4e14\u4fee\u6539\u90e8\u7f72\u6a94\u6848\u4f86\u4f7f\u7528\u89c0\u5bdf\u5f8c\u7684\u8cc7\u6e90\u7528\u91cf\u3002"),(0,o.kt)("h3",{id:"\u89f8\u767c\u689d\u4ef6-1"},"\u89f8\u767c\u689d\u4ef6"),(0,o.kt)("p",null,"\u7576 VPA Controller \u90e8\u7f72\u5230\u74b0\u5883\u4e2d\u5f8c\uff0c\u5c31\u53ef\u4ee5\u5275\u5efa VPA \u4f86\u6307\u540d\u8981\u54ea\u4e9b Deployment \u9700\u8981\u88ab\u89c0\u5bdf\uff0c VPA \u4e3b\u8981\u6703\u91dd\u5c0d CPU/Memory \u5169\u584a\u7684 Request/Limit \u53bb\u89c0\u5bdf\u4e26\u4e14\u8a08\u7b97\u51fa\u4e00\u500b\u9069\u7576\u7684\u6578\u5b57\uff0c\u5176\u4e2d\u89c0\u5bdf\u9019\u4ef6\u4e8b\u60c5\u9700\u8981\u6642\u9593\u624d\u6703\u6536\u6582\uff0c\u904e\u77ed\u7684\u6536\u96c6\u6642\u9593\u6703\u63a8\u65b7\u51fa\u4e00\u500b\u4e0d\u9069\u5408\u7684\u4f7f\u7528\u91cf\u3002"),(0,o.kt)("h3",{id:"\u8abf\u6574\u5c0d\u8c61-1"},"\u8abf\u6574\u5c0d\u8c61"),(0,o.kt)("p",null,"VPA \u4ee5 Pod \u70ba\u55ae\u4f4d\u53bb\u9032\u884c\u4fee\u6539\uff0c\u4e0d\u6703\u4fee\u6539 Pod \u7684\u526f\u672c\u6578\u91cf\uff0c\u800c\u662f\u4f30\u7b97\u5176 CPU/Memory \u7684 Request/Limit \u7528\u91cf\uff0cAuto/Recreate \u6a21\u5f0f\u4e0b\u6703\u5c07\u8a72 Pod \u91cd\u555f\u4e26\u4e14\u8a2d\u5b9a\u5c0d\u61c9\u7684\u6578\u503c\uff0c\u800c Off \u6a21\u5f0f\u4e0b\u5247\u662f\u55ae\u7d14\u8a08\u7b97\u6578\u503c\u4e26\u4e0d\u6703\u91cd\u555f Pod\u3002"),(0,o.kt)("h1",{id:"cpa-cluster-propotional-autoscaler"},"CPA (Cluster Propotional Autoscaler)"),(0,o.kt)("h3",{id:"\u76ee\u6a19-2"},"\u76ee\u6a19"),(0,o.kt)("p",null,"HPA \u8207 VPA \u662f\u5e38\u898b\u7684\u8cc7\u6e90\u7528\u91cf\u7ba1\u7406\u65b9\u5f0f\uff0c\u57fa\u65bc\u6c34\u5e73\u8207\u5782\u76f4\u5169\u500b\u4e0d\u540c\u9762\u5411\u53bb\u8abf\u6574\u61c9\u7528\u7a0b\u5f0f\u4ee5\u8655\u7406\u7576\u524d\u9700\u6c42\u3002",(0,o.kt)("a",{parentName:"p",href:"https://github.com/kubernetes-sigs/cluster-proportional-autoscaler"},"CPA")," \u5247\u5e0c\u671b\u80fd\u5920\u6839\u64da\u53e2\u96c6\u7684\u898f\u6a21\u4f86\u6c34\u5e73\u8abf\u6574 Pod \u7684\u526f\u672c\u6578\u91cf\uff0c\u6700\u5e38\u898b\u7684\u7bc4\u4f8b\u662f DNS \u670d\u52d9\uff0cCPA \u53ef\u4ee5\u6839\u64da\u7576\u524d\u53e2\u96c6\u7684\u898f\u6a21\u7b49\u7d1a\u4f86\u52d5\u614b\u8abf\u6574 DNS \u7684\u6578\u91cf\uff0c\u898f\u6a21\u7b49\u7d1a\u53ef\u4ee5\u662f\u7bc0\u9ede\u7684\u6578\u91cf\u6216\u662f\u6574\u9ad4 CPU \u7684\u6578\u91cf\u4f86\u8abf\u6574\u3002"),(0,o.kt)("h3",{id:"\u89f8\u767c\u689d\u4ef6-2"},"\u89f8\u767c\u689d\u4ef6"),(0,o.kt)("p",null,"\u4e0d\u540c\u65bc HPA/VPA \u662f\u6839\u64da\u61c9\u7528\u7a0b\u5f0f\u672c\u8eab\u7684\u8cc7\u6e90\u7528\u91cf\uff0cCPA \u7684\u89f8\u767c\u8abf\u6574\u5247\u662f\u7bc0\u9ede\u672c\u8eab\u7684\u898f\u6a21\u80fd\u529b\u3002\u8a2d\u5b9a\u7684\u89d2\u5ea6\u662f\u4ee5\u61c9\u7528\u7a0b\u5f0f\u51fa\u767c\uff0c\u53bb\u63a2\u8a0e\u6bcf\u4e00\u500b\u526f\u672c\u53ef\u4ee5\u8655\u7406\u591a\u5c11\u500b\u7bc0\u9ede\u6578\u91cf\u6216\u662f\u7e3d CPU \u6578\u91cf\uff0c\u76f8\u95dc\u8a2d\u5b9a\u70ba ",(0,o.kt)("inlineCode",{parentName:"p"},"coresPerReplica")," \u8207 ",(0,o.kt)("inlineCode",{parentName:"p"},"nodesPerReplica"),"\uff0c\u5176\u4e2d\u6703\u900f\u904e\u4e0b\u5217\u516c\u5f0f\u8a08\u7b97\u51fa\u7576\u524d\u9069\u5408\u7684 Pod \u6578\u91cf"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"replicas = max( ceil( cores * 1/coresPerReplica ) , ceil( nodes * 1/nodesPerReplica ) )\n")),(0,o.kt)("h3",{id:"\u8abf\u6574\u5c0d\u8c61-2"},"\u8abf\u6574\u5c0d\u8c61"),(0,o.kt)("p",null,"CPA \u6703\u4ee5\u8a2d\u5b9a\u7684",(0,o.kt)("inlineCode",{parentName:"p"},"coresPerReplica")," \u8207 ",(0,o.kt)("inlineCode",{parentName:"p"},"nodesPerReplica")," \u8207\u7576\u524d\u7bc0\u9ede\u898f\u6a21\u53bb\u8a08\u7b97\u4f86\u5f97\u5230\u5408\u9069\u7684\u6578\u91cf\uff0c\u4e26\u4e14\u52d5\u614b\u7684\u76ee\u6a19 Pod \u7684\u526f\u672c\u6578\u91cf\u3002"),(0,o.kt)("h1",{id:"ca-cluster-autoscaler"},"CA (Cluster Autoscaler)"),(0,o.kt)("h3",{id:"\u76ee\u6a19-3"},"\u76ee\u6a19"),(0,o.kt)("p",null,"\u524d\u8ff0 HPA, VPA, CPA \u90fd\u662f\u6839\u64da\u60c5\u6cc1\u8abf\u6574 Pod \u7684\u6578\u91cf\uff0c\u800c ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/autoscaler/tree/master/cluster-autoscaler"},"CA")," \u5247\u662f\u6839\u64da\u689d\u4ef6\u4f86\u52d5\u614b\u8abf\u6574\u7bc0\u9ede\u7684\u6578\u91cf\uff0c\u8b6c\u5982\u7576\u524d\u6240\u6709\u7bc0\u9ede\u4e0a\u7684\u8cc7\u6e90\u7528\u91cf\u90fd\u5df2\u7d93\u88ab Pod \u7d66\u8981\u6c42\u5149\u4e86\uff0c\u5c0e\u81f4\u6c92\u6709\u591a\u7684 CPU/Memory \u5206\u914d\u7d66\u65b0\u90e8\u7f72\u7684 Pod\uff0c\u9019\u7a2e\u60c5\u6cc1\u4e0b\u5c31\u9700\u8981\u52d5\u614b\u52a0\u5165\u7684\u65b0\u7684\u7bc0\u9ede\u4ee5\u63d0\u4f9b\u66f4\u591a\u904b\u7b97\u8cc7\u6e90\u3002\u76f8\u53cd\u7684\u7576\u7bc0\u9ede\u4e0a\u7684\u8cc7\u6e90\u4f7f\u7528\u91cf\u591a\u4f4e\uff0c\u9019\u6642\u5019\u5c31\u53ef\u4ee5\u52d5\u614b\u79fb\u9664\u7bc0\u9ede\u4f86\u7bc0\u7701\u4e0d\u5fc5\u8981\u7684\u7bc0\u9ede\uff0c\u7279\u5225\u662f\u96f2\u7aef\u74b0\u5883\u4e0b\u53ef\u4ee5\u9054\u5230\u7701\u9322\u7684\u76ee\u7684\u3002"),(0,o.kt)("p",null,"\u901a\u5e38\u7bc0\u9ede\u79fb\u9664\u6642\u90fd\u6703\u900f\u904e\u985e\u4f3c Drain \u7684\u65b9\u5f0f\u4f86\u8e22\u9664\u7bc0\u9ede\uff0c\u9019\u6642\u5019\u4e5f\u8981\u7279\u5225\u6ce8\u610f ",(0,o.kt)("em",{parentName:"p"},"PodDisruptionBudget")," \u4ee5\u53ca ",(0,o.kt)("em",{parentName:"p"},"terminationGracePeriodSeconds")," \u7b49\u53c3\u6578\u7684\u4f7f\u7528\u4f86\u78ba\u4fdd\u61c9\u7528\u7a0b\u5f0f\u8f49\u79fb\u671f\u9593\u4e0d\u6703\u5c0d\u73fe\u6709\u670d\u52d9\u9020\u6210\u592a\u5927\u5f71\u97ff\u3002"),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"Drain \u6307\u4ee4\u672c\u8eab\u662f\u5426\u53ef\u4ee5\u9806\u5229\u5b8c\u6210\u53d6\u6c7a\u65bc\u7bc0\u9ede\u4e0a\u6240\u6709\u7684 Pod \u662f\u5426\u90fd\u9806\u5229\u88ab\u79fb\u9664\uff0c\u82e5\u6709 Pod \u9700\u8981\u7279\u5225\u9577\u7684\u6642\u9593(",(0,o.kt)("em",{parentName:"p"},"terminationGracePeriodSeconds"),")\u4f86\u8655\u7406\u95dc\u6a5f\u6d41\u7a0b\uff0c\u5247\u8e22\u9664\u7bc0\u9ede\u7684\u6642\u9593\u5247\u53d6\u6c7a\u65bc\u8a72 Pod \u662f\u5426\u9806\u5229\u7d50\u675f\u3002")),(0,o.kt)("h3",{id:"\u89f8\u767c\u689d\u4ef6-3"},"\u89f8\u767c\u689d\u4ef6"),(0,o.kt)("p",null,"\u4e00\u500b\u5e38\u898b\u7684\u89f8\u767c\u65b9\u5f0f\u662f\u7576\u6709\u4efb\u4f55 Pod \u56e0\u70ba\u7cfb\u7d71\u4e0a\u6c92\u6709\u8db3\u5920\u8cc7\u6e90\u7528\u91cf\u800c\u7522\u751f Pending \u6642\uff0c\u5c31\u6703\u4f7f\u5f97 CA Controller \u53bb\u52a0\u5165\u4e00\u500b\u65b0\u7684\u7bc0\u9ede\uff0c\u7576\u65b0\u7bc0\u9ede\u9806\u5229\u52a0\u5165\u5230 Kubernetres \u53e2\u96c6\u4e26\u4e14\u70ba Ready \u5f8c\uff0c\u8a72\u61c9\u7528\u7a0b\u5f0f\u5c31\u53ef\u4ee5\u88ab\u9806\u5229\u90e8\u7f72\u4e26\u4e14\u904b\u884c\u3002\u53cd\u904e\u4f86\u7576\u7bc0\u9ede\u4f7f\u7528\u91cf\u4f4e\u65bc\u9580\u6abb\u4e00\u6bb5\u6642\u9593\u5f8c\u5c31\u53ef\u5c07\u76ee\u6a19\u7bc0\u9ede\u4e0a\u7684 Pod \u90fd\u8f49\u79fb\u4e26\u4e14\u79fb\u9664\u3002"),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"\u4e0d\u540c Kubernetes \u5e73\u53f0\u7684\u5be6\u4f5c\u65b9\u5f0f\u4e0d\u540c\uff0c\u56e0\u6b64\u4f7f\u7528\u4e0a\u5247\u9700\u8981\u78ba\u8a8d\u5404\u81ea\u7684\u5be6\u4f5c\u65b9\u5f0f\u8207\u76f8\u95dc\u8a2d\u5b9a\uff0c\u8b6c\u5982\u65b0\u5275\u7acb\u7684\u7bc0\u9ede\u61c9\u8a72\u8981\u5e73\u5747\u5206\u914d\u65bc\u4e0d\u540c\u7684 Zone \u6216\u662f\u6709\u76f8\u95dc\u7684 Annotation \u53ef\u4ee5\u4f7f\u5f97\u7279\u5b9a\u61c9\u7528\u7a0b\u5f0f\u6240\u5728\u7bc0\u9ede\u4e0d\u6703\u88ab\u56de\u6536\uff0c\u6240\u6709\u8a2d\u5b9a\u90fd\u4ee5\u5404 Kubernetes \u5e73\u53f0\u70ba\u4e3b\u3002")),(0,o.kt)("h3",{id:"\u8abf\u6574\u5c0d\u8c61-3"},"\u8abf\u6574\u5c0d\u8c61"),(0,o.kt)("p",null,"\u4ee5\u7bc0\u9ede\u70ba\u55ae\u4f4d\u53bb\u8abf\u6574\uff0c\u7bc0\u9ede\u79fb\u9664\u6642\u6240\u6709\u904b\u884c\u4e4b Pod \u90fd\u6703\u88ab\u91cd\u65b0\u8abf\u5ea6\u5230\u5176\u4ed6\u7bc0\u9ede\u3002"),(0,o.kt)("h1",{id:"summary"},"Summary"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"\u4e0a\u8ff0\u6240\u6709\u6a5f\u5236\u4e26\u975e\u4e92\u65a5\uff0c\u8b6c\u5982\u61c9\u7528\u7a0b\u5f0f\u985e\u5225\u53ef\u4ee5\u4f7f\u7528 HPA \u4f86\u8abf\u6574\u6578\u91cf\uff0c\u4e26\u4e14\u642d\u914d CA \u4f86\u52d5\u614b\u8abf\u6574\u7bc0\u9ede\u6578\u91cf\u4f86\u7b26\u5408\u9700\u6c42"),(0,o.kt)("li",{parentName:"ol"},"\u7531\u65bc Pod \u8207\u7bc0\u9ede\u90fd\u6703\u56e0\u70ba\u9019\u4e9b\u64cd\u4f5c\u800c\u6709\u6578\u91cf\u4e0a\u7684\u589e\u6e1b\uff0c\u6709\u53ef\u80fd\u5c31\u6703\u767c\u751f Pod \u5206\u914d\u60c5\u5f62\u4e0d\u5982\u9810\u671f\uff0c\u9019\u6642\u5019\u5c31\u53ef\u80fd\u8981\u4ef0\u8cf4\u5982 ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/kubernetes-sigs/descheduler"},"descheduler")," \u6216\u662f ",(0,o.kt)("a",{parentName:"li",href:"https://medium.com/me/stats/post/e52eebb4bc38"},"Affinity, SpreadConstraint")," \u7b49\u6a5f\u5236\u4f86\u5747\u8861\u90e8\u7f72\u60c5\u6cc1")),(0,o.kt)("p",null,"\u4ee5\u4e0b\u5716\u7e3d\u7d50\u4e0a\u8ff0\u56db\u7a2e\u5dee\u7570"),(0,o.kt)("p",null,(0,o.kt)("img",{src:r(69436).Z,width:"762",height:"807"})),(0,o.kt)("h1",{id:"reference"},"Reference"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/"},"https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/kubernetes/autoscaler/tree/master/vertical-pod-autoscaler"},"https://github.com/kubernetes/autoscaler/tree/master/vertical-pod-autoscaler")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/kubernetes-sigs/cluster-proportional-autoscaler"},"https://github.com/kubernetes-sigs/cluster-proportional-autoscaler")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/kubernetes/autoscaler/tree/master/cluster-autoscaler"},"https://github.com/kubernetes/autoscaler/tree/master/cluster-autoscaler"))))}d.isMDXComponent=!0},69436:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r.p+"assets/images/autoscaler-3beb64af0f36f13a4687e00c3dc91c0f.png"}}]);
"use strict";(self.webpackChunkhwchiu=self.webpackChunkhwchiu||[]).push([[84933],{3905:(e,n,t)=>{t.d(n,{Zo:()=>k,kt:()=>C});var a=t(67294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var l=a.createContext({}),m=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},k=function(e){var n=m(e.components);return a.createElement(l.Provider,{value:n},e.children)},c="mdxType",s={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},u=a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,k=p(e,["components","mdxType","originalType","parentName"]),c=m(t),u=i,C=c["".concat(l,".").concat(u)]||c[u]||s[u]||r;return t?a.createElement(C,o(o({ref:n},k),{},{components:t})):a.createElement(C,o({ref:n},k))}));function C(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var r=t.length,o=new Array(r);o[0]=u;var p={};for(var l in n)hasOwnProperty.call(n,l)&&(p[l]=n[l]);p.originalType=e,p[c]="string"==typeof e?e:i,o[1]=p;for(var m=2;m<r;m++)o[m]=t[m];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},43981:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>s,frontMatter:()=>r,metadata:()=>p,toc:()=>m});var a=t(87462),i=(t(67294),t(3905));const r={title:"Container Runtime - Security Container",sidebar_position:7,date:new Date("2019-09-23T06:15:38.000Z"),tags:["Container","CRI","Security","iThome"],description:"\u6709\u9452\u65bc CRI \u7684\u6a19\u6e96\u67b6\u69cb\uff0c\u5404\u5f0f\u5404\u6a23\u7684\u91dd\u5c0d\u4e0d\u540c\u76ee\u6a19\u7684\u5c08\u6848\u90fd\u80fd\u5920\u6574\u5408\u5230 Kubernetes \u4e2d\uff0c\u800c\u672c\u6587\u8981\u4ecb\u7d39\u7684\u5169\u500b\u5c08\u6848\u5206\u5225\u662f gVisor \u4ee5\u53ca kata-container, \u9019\u5169\u500b\u5c08\u6848\u90fd\u662f\u57fa\u65bc\u5b89\u5168\u6027\u8003\u91cf\u800c\u958b\u767c\u7684 OCI Runtine\uff0c\u8207\u5176\u76f8\u540c\u5730\u4f4d\u7684\u5c31\u662f\u6700\u77e5\u540d\u7684 OCI Runtime, runc\u3002 \u672c\u6587\u6703\u4ecb\u7d39\u9019\u5169\u500b\u5c08\u6848\u7684\u6982\u5ff5\u4ee5\u53ca\u76ee\u6a19\uff0c\u4e26\u4e14\u8a0e\u8ad6\u5176\u5be6\u4f5c\u67b6\u69cb\u4f86\u6bd4\u8f03\u9019\u5169\u7a2e\u4e0d\u540c\u7684\u65b9\u5f0f\u662f\u5982\u4f55\u9054\u5230\u5b89\u5168\u7684\u6548\u679c"},o="\u524d\u8a00",p={unversionedId:"techPost/2019/iThome_Challenge/container-runtime-security-container",id:"techPost/2019/iThome_Challenge/container-runtime-security-container",title:"Container Runtime - Security Container",description:"\u6709\u9452\u65bc CRI \u7684\u6a19\u6e96\u67b6\u69cb\uff0c\u5404\u5f0f\u5404\u6a23\u7684\u91dd\u5c0d\u4e0d\u540c\u76ee\u6a19\u7684\u5c08\u6848\u90fd\u80fd\u5920\u6574\u5408\u5230 Kubernetes \u4e2d\uff0c\u800c\u672c\u6587\u8981\u4ecb\u7d39\u7684\u5169\u500b\u5c08\u6848\u5206\u5225\u662f gVisor \u4ee5\u53ca kata-container, \u9019\u5169\u500b\u5c08\u6848\u90fd\u662f\u57fa\u65bc\u5b89\u5168\u6027\u8003\u91cf\u800c\u958b\u767c\u7684 OCI Runtine\uff0c\u8207\u5176\u76f8\u540c\u5730\u4f4d\u7684\u5c31\u662f\u6700\u77e5\u540d\u7684 OCI Runtime, runc\u3002 \u672c\u6587\u6703\u4ecb\u7d39\u9019\u5169\u500b\u5c08\u6848\u7684\u6982\u5ff5\u4ee5\u53ca\u76ee\u6a19\uff0c\u4e26\u4e14\u8a0e\u8ad6\u5176\u5be6\u4f5c\u67b6\u69cb\u4f86\u6bd4\u8f03\u9019\u5169\u7a2e\u4e0d\u540c\u7684\u65b9\u5f0f\u662f\u5982\u4f55\u9054\u5230\u5b89\u5168\u7684\u6548\u679c",source:"@site/docs/techPost/2019/iThome_Challenge/container-runtime-security-container.md",sourceDirName:"techPost/2019/iThome_Challenge",slug:"/techPost/2019/iThome_Challenge/container-runtime-security-container",permalink:"/docs/techPost/2019/iThome_Challenge/container-runtime-security-container",draft:!1,tags:[{label:"Container",permalink:"/docs/tags/container"},{label:"CRI",permalink:"/docs/tags/cri"},{label:"Security",permalink:"/docs/tags/security"},{label:"iThome",permalink:"/docs/tags/i-thome"}],version:"current",sidebarPosition:7,frontMatter:{title:"Container Runtime - Security Container",sidebar_position:7,date:"2019-09-23T06:15:38.000Z",tags:["Container","CRI","Security","iThome"],description:"\u6709\u9452\u65bc CRI \u7684\u6a19\u6e96\u67b6\u69cb\uff0c\u5404\u5f0f\u5404\u6a23\u7684\u91dd\u5c0d\u4e0d\u540c\u76ee\u6a19\u7684\u5c08\u6848\u90fd\u80fd\u5920\u6574\u5408\u5230 Kubernetes \u4e2d\uff0c\u800c\u672c\u6587\u8981\u4ecb\u7d39\u7684\u5169\u500b\u5c08\u6848\u5206\u5225\u662f gVisor \u4ee5\u53ca kata-container, \u9019\u5169\u500b\u5c08\u6848\u90fd\u662f\u57fa\u65bc\u5b89\u5168\u6027\u8003\u91cf\u800c\u958b\u767c\u7684 OCI Runtine\uff0c\u8207\u5176\u76f8\u540c\u5730\u4f4d\u7684\u5c31\u662f\u6700\u77e5\u540d\u7684 OCI Runtime, runc\u3002 \u672c\u6587\u6703\u4ecb\u7d39\u9019\u5169\u500b\u5c08\u6848\u7684\u6982\u5ff5\u4ee5\u53ca\u76ee\u6a19\uff0c\u4e26\u4e14\u8a0e\u8ad6\u5176\u5be6\u4f5c\u67b6\u69cb\u4f86\u6bd4\u8f03\u9019\u5169\u7a2e\u4e0d\u540c\u7684\u65b9\u5f0f\u662f\u5982\u4f55\u9054\u5230\u5b89\u5168\u7684\u6548\u679c"},sidebar:"techPost",previous:{title:"Container Runtime - CRI-O",permalink:"/docs/techPost/2019/iThome_Challenge/k8s-cri-o"},next:{title:"Container Runtime - Virtual Machine",permalink:"/docs/techPost/2019/iThome_Challenge/container-runtime-vm"}},l={},m=[{value:"Machine-Based",id:"machine-based",level:2},{value:"Rule-Based",id:"rule-based",level:2},{value:"Network",id:"network",level:2}],k={toc:m},c="wrapper";function s(e){let{components:n,...t}=e;return(0,i.kt)(c,(0,a.Z)({},k,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"\u524d\u8a00"},"\u524d\u8a00"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Container")," \u8207 ",(0,i.kt)("inlineCode",{parentName:"p"},"Virtual Machine (VM)")," \u7684\u6bd4\u8f03\u5f9e\u4f86\u6c92\u6709\u505c\u6b62\u904e\uff0c\u8a31\u591a\u4ecb\u7d39 ",(0,i.kt)("inlineCode",{parentName:"p"},"Container")," \u7684\u6587\u7ae0\u90fd\u6703\u5c07 ",(0,i.kt)("inlineCode",{parentName:"p"},"Contianer")," \u8207 ",(0,i.kt)("inlineCode",{parentName:"p"},"\uff36M")," \u9032\u884c\u5404\u7a2e\u6bd4\u8f03\uff0c\u8b6c\u5982"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"\u865b\u64ec\u5316\u7a0b\u5ea6"),(0,i.kt)("li",{parentName:"ol"},"\u5b89\u5168\u6027"),(0,i.kt)("li",{parentName:"ol"},"\u6548\u80fd"),(0,i.kt)("li",{parentName:"ol"},"\u901f\u5ea6(\u5275\u5efa/\u522a\u9664)"),(0,i.kt)("li",{parentName:"ol"},"\u8907\u96dc\u6027")),(0,i.kt)("p",null,"\u6839\u64da\u9019\u4e9b\u7279\u4fc2\u7684\u6bd4\u8f03\uff0c ",(0,i.kt)("inlineCode",{parentName:"p"},"Container")," \u8207 ",(0,i.kt)("inlineCode",{parentName:"p"},"VM")," \u4e26\u6c92\u6709\u8ab0\u52dd\u8ab0\u6557\uff0c\u5012\u662f\u53d6\u6c7a\u65bc\u4f7f\u7528\u7684\u60c5\u5883\u8207\u9700\u6c42\u3002"),(0,i.kt)("p",null,"\u7136\u800c\u7576 ",(0,i.kt)("inlineCode",{parentName:"p"},"Kubernetes")," \u6a6b\u7a7a\u51fa\u4e16\u5f8c\uff0c\u4e00\u958b\u59cb\u6700\u5927\u7684\u8a0e\u8ad6\u5c31\u662f ",(0,i.kt)("inlineCode",{parentName:"p"},"Kubernetes")," \u8207 ",(0,i.kt)("inlineCode",{parentName:"p"},"OpenStack")," \u5169\u8005\u7684\u89d2\u8272\u8207\u5730\u4f4d\uff0c\u5f9e\u53ef\u80fd\u7af6\u722d\u5230\u5f8c\u4f86\u4e92\u76f8\u5408\u4f5c\uff0c\u5f7c\u6b64\u4f5c\u70ba\u6574\u500b\u67b6\u69cb\u4e2d\u4e0d\u540c\u5c64\u7d1a\u7684\u61c9\u7528\u3002"),(0,i.kt)("p",null,"\u7136\u800c ",(0,i.kt)("inlineCode",{parentName:"p"},"Container")," \u96d6\u7136\u597d\u7528\uff0c\u4f46\u662f\u5728\u67d0\u4e9b\u60c5\u6cc1\u4e00\u76f4\u70ba\u4eba\u8a6c\u75c5\uff0c\u5982\u9694\u96e2\u7a0b\u5ea6\u8207\u5b89\u5168\u6027\u3002\n\u5982\u540c\u524d\u9762\u66fe\u7d93\u8ac7\u904e\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Container")," \u7684\u5be6\u4f5c(Linux \u70ba\u4f8b)\uff0c\u900f\u904e ",(0,i.kt)("inlineCode",{parentName:"p"},"Linux Kernel")," \u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"namespace")," \u4f86\u9054\u6210\u5404\u5f0f\u5404\u6a23\u8cc7\u6e90\u7684\u9694\u96e2\uff0c\u85c9\u6b64\u5b8c\u6210\u4e00\u500b\u8f15\u91cf\u7d1a\u865b\u64ec\u5316\u7684\u7a7a\u9593\u3002 \u4e00\u65e6 ",(0,i.kt)("inlineCode",{parentName:"p"},"Linux Kernel")," \u6709\u4efb\u4f55\u5b89\u5168\u6027\u554f\u984c\uff0c\u662f\u4e0d\u662f\u6240\u6709\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Container")," \u90fd\u53ef\u80fd\u6703\u53d7\u5230\u6ce2\u53ca? \u53cd\u4e4b\u4ea6\u7136\uff0c\u82e5 ",(0,i.kt)("inlineCode",{parentName:"p"},"Container"),"  \u672c\u8eab\u5be6\u73fe\u7684\u6a5f\u5236\u6709\u554f\u984c\uff0c\u662f\u4e0d\u662f\u6709\u6a5f\u6703\u5f9e ",(0,i.kt)("inlineCode",{parentName:"p"},"Container")," \u5167\u90e8\u653b\u64ca\u5230\u5916\u9762 ",(0,i.kt)("inlineCode",{parentName:"p"},"Host")," \u9020\u6210\u5b89\u5168\u6027\u554f\u984c\u3002"),(0,i.kt)("p",null,"\u8b6c\u5982 2019 \u5e74\u521d\u6700\u77e5\u540d\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"runc")," \u5b89\u5168\u6027\u6f0f\u6d1e\n",(0,i.kt)("a",{parentName:"p",href:"https://kubernetes.io/blog/2019/02/11/runc-and-cve-2019-5736/"},"Runc and CVE-2019-5736")),(0,i.kt)("p",null,"\u9019\u4e9b\u60c5\u6cc1\u4e0b\uff0c\u5f88\u591a\u4eba\u90fd\u5728\u601d\u8003\uff0c\u5230\u5e95\u6709\u6c92\u6709\u8fa6\u6cd5\u7d50\u5408 ",(0,i.kt)("inlineCode",{parentName:"p"},"Container")," \u8207 ",(0,i.kt)("inlineCode",{parentName:"p"},"VM")," \u5f7c\u6b64\u7684\u512a\u9ede\uff0c\u7522\u751f\u4e00\u500b\u5982 ",(0,i.kt)("inlineCode",{parentName:"p"},"VM")," \u5f37\u5927\u7684\u9694\u96e2\u8207\u5b89\u5168\u6027\uff0c\u540c\u6642\u672c\u8eab\u53c8\u53ef\u4ee5\u5920\u8f15\u91cf\uff0c\u901f\u5ea6\u53c8\u5920\u5feb\u5982 ",(0,i.kt)("inlineCode",{parentName:"p"},"Container"),"."),(0,i.kt)("p",null,"\u57fa\u65bc\u9019\u500b\u8a2d\u8a08\u7406\u5ff5\u4e0b\uff0c\u6709\u4e0d\u5c11\u7684\u76f8\u95dc\u5c08\u6848\u5728\u52aa\u529b\u89e3\u6c7a\u554f\u984c\uff0c\u5176\u4e2d\u6211\u89ba\u5f97\u6709\u5169\u500b\u6700\u77e5\u540d\u5c31\u662f ",(0,i.kt)("inlineCode",{parentName:"p"},"kata container")," \u4ee5\u53ca ",(0,i.kt)("inlineCode",{parentName:"p"},"gVisor"),"\u3002"),(0,i.kt)("h1",{id:"\u4ecb\u7d39"},"\u4ecb\u7d39"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"kata container/gVisor")," \u9019\u5169\u500b\u5c08\u6848\u90fd\u662f\u57fa\u65bc ",(0,i.kt)("inlineCode",{parentName:"p"},"OCI Runtime")," \u6a19\u6e96\u9032\u884c\u958b\u767c\uff0c\u5c31\u662f\u4e00\u500b\u6240\u8b02\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"OCI Runtime")," \u89e3\u6c7a\u65b9\u6848\uff0c\u5176\u5730\u4f4d\u8207 ",(0,i.kt)("inlineCode",{parentName:"p"},"Runc")," \u662f\u76f8\u540c\u7684\u3002\n\u6839\u64da ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/opencontainers/runtime-spec/blob/master/implementations.md"},"opencontainers/runtime-spec")," \u7684\u4ecb\u7d39\uff0c\u6211\u5011\u53ef\u4ee5\u770b\u5230\u4e0b\u9762\u76ee\u524d\u88ab\u6536\u9304\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"OCI Runtime")),(0,i.kt)("p",null,"\u7b2c\u4e00\u7a2e\u5c31\u662f\u55ae\u7d14\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Container"),"\uff0c\u6c92\u4ec0\u9ebc\u7279\u5225\uff0c\u5c31\u662f\u88ab\u8a6c\u75c5\u6709\u5b89\u5168\u6027\u96b1\u6182\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Container"),"\u3002"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Runtime (Container)\nopencontainers/runc - Reference implementation of OCI runtime\nprojectatomic/bwrap-oci - Convert the OCI spec file to a command line for bubblewrap\ncontainers/crun - Runtime implementation in C")),(0,i.kt)("p",null,"\u9019\u4e00\u7a2e\u7279\u5225\u4e86\uff0c\u5c31\u662f\u57fa\u65bc ",(0,i.kt)("inlineCode",{parentName:"p"},"Virtual Machine")," \u7684\u65b9\u5f0f\u53bb\u63d0\u4f9b ",(0,i.kt)("inlineCode",{parentName:"p"},"Container")," \u7684\u4ecb\u9762\u4f86\u4f7f\u7528"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Runtime (Virtual Machine)\nhyperhq/runv - Hypervisor-based runtime for OCI\nclearcontainers/runtime - Hypervisor-based OCI runtime utilising virtcontainers by Intel\xae.\ngoogle/gvisor - gVisor is a user-space kernel, contains runsc to run sandboxed containers.\nkata-containers/runtime - Hypervisor-based OCI runtime combining technology from clearcontainers/runtime and hyperhq/runv.")),(0,i.kt)("p",null,"\u9019\u908a\u770b\u5230\u6709\u56db\u500b\u5c08\u6848\uff0c\u5206\u5225\u662f"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"runv"),(0,i.kt)("li",{parentName:"ul"},"clearcontainers"),(0,i.kt)("li",{parentName:"ul"},"gvisor"),(0,i.kt)("li",{parentName:"ul"},"kata-containers")),(0,i.kt)("p",null,"\u4f46\u662f\u5be6\u969b\u4e0a\u76ee\u524d\u5c31\u662f ",(0,i.kt)("inlineCode",{parentName:"p"},"gvisor")," \u4ee5\u53ca ",(0,i.kt)("inlineCode",{parentName:"p"},"kata-containers"),"\uff0c\u4e3b\u8981\u662f\u56e0\u70ba ",(0,i.kt)("inlineCode",{parentName:"p"},"kata-container")," \u662f\u7531 ",(0,i.kt)("inlineCode",{parentName:"p"},"runv")," + ",(0,i.kt)("inlineCode",{parentName:"p"},"clearcontainers")," \u5408\u4f75\u800c\u6210\u3002"),(0,i.kt)("p",null,"\u7531\u65bc\u6709\u9650\u7684\u6642\u9593\uff0c\u672c\u7bc7\u6c92\u6709\u8fa6\u6cd5\u8ddf\u5404\u4f4d\u5206\u4eab\u5982\u4f55\u5b89\u88dd\u53ca\u6e2c\u8a66\u9019\u5169\u7a2e\u4e0d\u540c\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"runtime"),", \u4f46\u662f\u9084\u662f\u53ef\u4ee5\u63a2\u8a0e\u4e00\u4e0b\u9019\u5169\u7a2e ",(0,i.kt)("inlineCode",{parentName:"p"},"gvisor/kata-containers")," \u7684\u5dee\u7570\uff0c\u540c\u6642\u53ef\u4ee5\u5b78\u7fd2\u4e00\u4e0b\u9019\u5169\u500b\u5c08\u6848\u662f\u63a1\u53d6\u4f55\u7a2e\u4e0d\u540c\u7684\u8a2d\u8a08\u6982\u5ff5\u4f86\u6eff\u8db3\u5b89\u5168\u6027"),(0,i.kt)("h1",{id:"\u539f\u5148\u89e3\u6c7a\u65b9\u6848"},"\u539f\u5148\u89e3\u6c7a\u65b9\u6848"),(0,i.kt)("h2",{id:"machine-based"},"Machine-Based"),(0,i.kt)("p",null,"\u6211\u5011\u5148\u770b\u4e00\u4e0b\u5927\u5bb6\u719f\u6089\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Virtual Machine")," \u901a\u5e38\u600e\u9ebc\u505a\u5230\u5b89\u5168\u9694\u96e2\uff0c\u9019\u908a\u6211\u5011\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"KVM")," \u7684\u7bc4\u4f8b\u4f86\u770b"),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://i.imgur.com/vMUO3a3.png",alt:null}),"\n\u5716\u7247\u7bc0\u9304\u81ea",(0,i.kt)("a",{parentName:"p",href:"https://gvisor.dev/docs/architecture_guide/"},"Architecture Guide")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"KVM")," \u672c\u8eab\u57fa\u65bc ",(0,i.kt)("inlineCode",{parentName:"p"},"host")," \u7684\u4e3b\u6a5f\u4e0a\u518d\u5275\u9020\u4e00\u500b\u5168\u65b0\u7684\u865b\u64ec\u5316\u74b0\u5883\uff0c\u8a72\u74b0\u5883\u4e2d\u6709\u4e00\u500b\u5168\u65b0\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Kernel"),", \u6240\u4ee5\u540d\u8a5e\u4e0a\u5c31\u6703\u6709\u6240\u8b02\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Host Kernel")," \u4ee5\u53ca ",(0,i.kt)("inlineCode",{parentName:"p"},"Guest Kernel"),".\n\u7576\u7136\u8cc7\u8a0a\u5b89\u5168\u672c\u5c31\u6c92\u6709\u7d55\u5c0d\uff0c\u6240\u6709\u7684\u670d\u52d9\u90fd\u57fa\u65bc ",(0,i.kt)("inlineCode",{parentName:"p"},"kvm")," \u7684\u8a2d\u8a08\u5305\u542b ",(0,i.kt)("inlineCode",{parentName:"p"},"kvm kernel module"),", \u9019\u4e9b\u53ef\u80fd\u4e92\u52d5\u7684\u904e\u7a0b\u4e2d\u8981\u662f\u6709\u554f\u984c\u4e5f\u662f\u6703\u9020\u6210\u5b89\u5168\u6027\u6f0f\u6d1e\u3002\n\u4e0d\u904e\u4eca\u5929\u8a0e\u8ad6\u7684\u7bc4\u7587\u5728\u65bc\u865b\u64ec\u5316\u74b0\u5883\u8207 ",(0,i.kt)("inlineCode",{parentName:"p"},"Host")," \u672c\u8eab\u662f\u5426\u6703\u4e92\u76f8\u5f71\u97ff\uff0c\u6240\u4ee5\u66ab\u6642\u5c31\u5148\u5ffd\u7565\u5176\u4ed6\u7684\u56e0\u7d20\u3002"),(0,i.kt)("p",null,"\u57fa\u65bc\u9019\u7a2e\u5b8c\u5168\u4e0d\u540c ",(0,i.kt)("inlineCode",{parentName:"p"},"Kernel")," \u7684\u67b6\u69cb\uff0c ",(0,i.kt)("inlineCode",{parentName:"p"},"Guest")," \u6709\u767c\u751f\u4efb\u4f55\u4e8b\u60c5\uff0c\u4e5f\u90fd\u53ea\u6703\u5f71\u97ff\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"Guest Kernel")," \u69cb\u7bc9\u7684\u74b0\u5883\u4e2d\uff0c\u4e0d\u6703\u5f71\u97ff\u5230 ",(0,i.kt)("inlineCode",{parentName:"p"},"Host Kernel")," \u4e0a\u3002"),(0,i.kt)("h2",{id:"rule-based"},"Rule-Based"),(0,i.kt)("p",null,"\u53e6\u5916\u4e00\u7a2e\u5b89\u5168\u6027\u7684\u89e3\u6c7a\u65b9\u6848\u662f\u5247\u662f\u900f\u904e ",(0,i.kt)("inlineCode",{parentName:"p"},"system call")," \u7684\u7ba1\u7406\uff0c\u8b6c\u5982 ",(0,i.kt)("a",{parentName:"p",href:"https://www.kernel.org/doc/Documentation/prctl/seccomp_filter.txt"},"SECure COMPuting (SECCOM)")," \u9019\u7a2e\u6280\u8853\uff0c\u53ef\u4ee5\u9650\u5236\u76ee\u6a19\u61c9\u7528\u7a0b\u5f0f\u80fd\u5920\u547c\u53eb\u5230\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"sysytem call"),"\uff0c\u85c9\u6b64\u78ba\u4fdd\u8a72\u61c9\u7528\u7a0b\u5f0f(Application/Container)\u672c\u8eab\u6c92\u6709\u8fa6\u6cd5\u53bb\u547c\u53eb\u5176\u4e0d\u61c9\u8a72\u547c\u53eb\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"system call"),", \u7b97\u662f\u4e00\u7a2e\u57fa\u65bc\u898f\u5247\u7684\u5b89\u5168\u6027\u65b9\u6848\u3002"),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://i.imgur.com/GSWN8fX.png",alt:null}),"\n\u5716\u7247\u7bc0\u9304\u81ea",(0,i.kt)("a",{parentName:"p",href:"https://gvisor.dev/docs/architecture_guide/"},"Architecture Guide\n")),(0,i.kt)("p",null,"\u9019\u908a\u6709\u4e00\u500b\u5176\u898f\u5247\u7684",(0,i.kt)("a",{parentName:"p",href:"https://github.com/moby/moby/blob/master/profiles/seccomp/default.json"},"\u7bc4\u4f8b\u6a94\u6848")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json="},'...\n        {\n            "names": [\n                "get_mempolicy",\n                "mbind",\n                "set_mempolicy"\n            ],\n            "action": "SCMP_ACT_ALLOW",\n            "args": [],\n            "comment": "",\n            "includes": {\n                "caps": [\n                    "CAP_SYS_NICE"\n                ]\n            },\n            "excludes": {}\n        },\n...\n')),(0,i.kt)("p",null,"\u7136\u800c\u56e0\u5176\u8a2d\u5b9a\u8907\u96dc\uff0c\u5be6\u52d9\u4e0a\u5f88\u96e3\u53ef\u4ee5\u5f88\u6e96\u78ba\u7684\u7522\u751f\u51fa\u5404\u7a2e\u8a2d\u5b9a\u6a94\u6848\u4f86\u5957\u7528\u5230\u5404\u5f0f\u5404\u6a23\u7684\u61c9\u7528\u7a0b\u5f0f\u3002"),(0,i.kt)("p",null,"\u63a5\u4e0b\u4f86\u5c31\u4f86\u770b\u4e00\u4e0b ",(0,i.kt)("inlineCode",{parentName:"p"},"gVisor")," \u4ee5\u53ca ",(0,i.kt)("inlineCode",{parentName:"p"},"kata Container")," \u600e\u9ebc\u505a\u51fa\u4e0d\u540c\u65bc\u4ee5\u5f80\u7684\u5b89\u5168\u6027\u67b6\u69cb"),(0,i.kt)("h1",{id:"gvisor"},"gVisor"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"gVisor")," \u4f5c\u70ba\u76f8\u5bb9\u65bc ",(0,i.kt)("inlineCode",{parentName:"p"},"OCI Runtime")," \u7684\u89e3\u6c7a\u65b9\u6848\uff0c",(0,i.kt)("inlineCode",{parentName:"p"},"\u7406\u8ad6"),"\u4e0a\u53ea\u8981\u80fd\u5920\u652f\u63f4 ",(0,i.kt)("inlineCode",{parentName:"p"},"OCI")," \u7684\u4e0a\u5c64\u670d\u52d9\u61c9\u8a72\u90fd\u8981\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"gVisor"),"\uff0c\u6240\u4ee5\u4e4b\u524d\u63d0\u5230\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"containerd")," \u4ee5\u53ca ",(0,i.kt)("inlineCode",{parentName:"p"},"cri-o")," \u90fd\u8981\u53ef\u4ee5\u5207\u63db ",(0,i.kt)("inlineCode",{parentName:"p"},"runtime")," \u5f9e\u57fa\u672c\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"runc")," \u5207\u63db\u904e\u4f86\u3002"),(0,i.kt)("p",null,"\u5f9e\u5176 ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/google/gvisor"},"\u5b98\u65b9 Github")," \u7684\u4ecb\u7d39"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"gVisor is a user-space kernel, written in Go, that implements a substantial portion of the Linux system surface. It includes an Open Container Initiative (OCI) runtime called runsc that provides an isolation boundary between the application and the host kernel. The runsc runtime integrates with Docker and Kubernetes, making it simple to run sandboxed containers.")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"gVisor")," \u6700\u5e95\u5c64\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"OCI Runtime")," \u53eb\u505a ",(0,i.kt)("inlineCode",{parentName:"p"},"runsc"),"\uff0c\u800c\u5176\u9054\u5230\u5b89\u5168\u6027\u9694\u96e2\u7684\u624b\u6bb5\u5247\u662f\u900f\u904e\u6240\u8b02\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"user-space kernel")," \u7684\u624b\u6bb5\uff0c\u63a5\u4e0b\u4f86\u5c07\u900f\u904e\u4ecb\u7d39\u5230\u5e95 ",(0,i.kt)("inlineCode",{parentName:"p"},"gVisor")," \u662f\u600e\u9ebc\n\u5be6\u73fe\u9ad8\u5b89\u5168\u6027\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Container"),"\u3002"),(0,i.kt)("p",null,"\u5982\u679c\u8aaa ",(0,i.kt)("inlineCode",{parentName:"p"},"SECCOMP")," \u662f\u900f\u904e\u9650\u5236\u7684\u65b9\u5f0f\u7981\u6b62\u61c9\u7528\u7a0b\u5f0f\u5b58\u53d6\u7279\u5225\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"systel call"),", \u90a3 ",(0,i.kt)("inlineCode",{parentName:"p"},"gVisor")," \u5c31\u662f\u6975\u7aef\u7684\u628a\u6240\u6709\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"system call")," \u5b8c\u5168\u90fd\u4fee\u6539\u6389\uff0c\u8b93\u4f60\u770b\u8d77\u4f86\u6709\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"system call"),"\uff0c\u4f46\u662f\u5176\u5be6\u4f60\u4f7f\u7528\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"system call")," \u6839\u672c\u4e0d\u662f\u8ddf\u771f\u6b63\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"host kernel")," \u6e9d\u901a\uff0c\u800c\u662f\u8ddf ",(0,i.kt)("inlineCode",{parentName:"p"},"gVisor")," \u6240\u91cd\u65b0\u6253\u9020\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"user-space kernel")," \u6e9d\u901a\u3002"),(0,i.kt)("p",null,"\u9019\u4e5f\u662f\u70ba\u4ec0\u9ebc\u5176\u7a31\u70ba ",(0,i.kt)("inlineCode",{parentName:"p"},"user-space kernel"),", \u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"user-space")," \u91cd\u65b0\u6253\u9020\u4e00\u500b\u4eff ",(0,i.kt)("inlineCode",{parentName:"p"},"kernel")," \u7684\u74b0\u5883\uff0c\u67b6\u69cb\u5982\u4e0b\u3002"),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://i.imgur.com/q28fJdY.png",alt:null}),"\n\u5716\u7247\u7bc0\u9304\u81ea",(0,i.kt)("a",{parentName:"p",href:"https://gvisor.dev/docs/architecture_guide/"},"Architecture Guide\n")),(0,i.kt)("p",null,"\u6240\u6709\u9001\u5230 gVisor \u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"system call")," \u90fd\u6703\u88ab\u4e8c\u6b21\u8655\u7406\uff0c\u63a5\u8005\u624d\u6703\u9001\u5230\u771f\u6b63\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Host Kernel")," \u53bb\u53d6\u5f97\u9700\u8981\u7684\u8cc7\u8a0a\u3002 \u5b98\u65b9\u6587\u7ae0\u7279\u5225\u8868\u660e\u9019\u4e9b\u4e0d\u540c\u7684\u505a\u6cd5\u6c92\u6709\u660e\u986f\u7684\u512a\u52a3\uff0c\u5404\u6709\u64c5\u9577\u7684\u9818\u57df\uff0c\u6574\u53e5\u8a71\u5982\u4e0b\uff0c\u503c\u5f97\u597d\u597d\u601d\u8003"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Each of the above approaches may excel in distinct scenarios. For example, machine-level virtualization will face challenges achieving high density, while gVisor may provide poor performance for system call heavy workloads.")),(0,i.kt)("h1",{id:"kata-container"},"Kata Container"),(0,i.kt)("p",null,"\u8207 ",(0,i.kt)("inlineCode",{parentName:"p"},"gVisor")," \u4e00\u6a23\uff0c\u90fd\u662f\u57fa\u65bc ",(0,i.kt)("inlineCode",{parentName:"p"},"OCI Runtime")," \u7684\u89e3\u6c7a\u65b9\u6848\uff0c\u9019\u6642\u5019\u5c31\u6703\u89ba\u5f97\u6709\u500b ",(0,i.kt)("inlineCode",{parentName:"p"},"OCI")," \u7684\u6a19\u6e96\u771f\u7684\u662f\u8b93\u4e16\u754c\u7a0d\u5fae\u7f8e\u597d\u4e86\u4e00\u4e9b\uff0c\u5404\u5f0f\u5404\u6a23\u7684\u89e3\u6c7a\u65b9\u6848\u90fd\u80fd\u5920\u5c08\u6ce8\u65bc\u81ea\u5df1\u7684\u958b\u767c\uff0c\u5c31\u53ef\u4ee5\u5f88\u8f15\u9b06\u5730\u8207\u5176\u4ed6\u7684\u61c9\u7528\u7a0b\u5f0f\u7d50\u5408\u800c\u4e0d\u9700\u8981\u5404\u7a2e\u5ba2\u88fd\u5316\u3002"),(0,i.kt)("p",null,"\u5f9e\u5176 ",(0,i.kt)("a",{parentName:"p",href:"https://katacontainers.io/"},"\u5b98\u7db2")," \u7684\u4ecb\u7d39"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Kata Containers is an open source container runtime, building lightweight virtual machines that seamlessly plug into the containers ecosystem.")),(0,i.kt)("p",null,"\u5176\u958b\u5b97\u660e\u7fa9\u8868\u660e\u5efa\u7f6e\u4e00\u500b\u8f15\u91cf\u5316\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Virtual Machine")," \u540c\u6642\u80fd\u5920\u929c\u63a5\u5230 ",(0,i.kt)("inlineCode",{parentName:"p"},"Container")," \u7684\u7cfb\u7d71\uff0c\u63a5\u4e0b\u4f86\u6211\u5011\u53ef\u4ee5\u5f9e ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/kata-containers/documentation/blob/master/design/architecture.md"},"Kata Containers Architecture\n")," \u770b\u5230\u66f4\u591a\u95dc\u65bc\u5176\u8a2d\u8a08\u7684\u67b6\u69cb"),(0,i.kt)("p",null,"\u9996\u5148\u5148\u770b\u4e00\u4e0b\u7c21\u55ae\u7684\u4f7f\u7528\u67b6\u69cb\uff0c\u5de6\u908a\u662f\u57fa\u65bc\u5b8c\u5168 ",(0,i.kt)("inlineCode",{parentName:"p"},"docker + runc")," \u7684\u5834\u666f\uff0c\u6b64\u67b6\u69cb\u5df2\u7d93\u5728 ",(0,i.kt)("a",{parentName:"p",href:"https://ithelp.ithome.com.tw/articles/10216215"},"Container & Open Container Initiative")," \u4e2d\u8ddf\u5927\u5bb6\u4ecb\u7d39\u904e\uff0c\u800c\u6700\u4e0b\u9762\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"runc")," \u5c31\u662f\u6240\u8b02\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"OCI Runtime"),"\uff0c\u56e0\u6b64 ",(0,i.kt)("inlineCode",{parentName:"p"},"kata container")," \u4e2d\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"OCI Runtime")," ",(0,i.kt)("inlineCode",{parentName:"p"},"kata-runtime")," \u5c31\u53ef\u4ee5\u7121\u7e2b\u7684\u66ff\u63db\u6389 ",(0,i.kt)("inlineCode",{parentName:"p"},"runc"),"\u3002\n\u5c0d\u4f7f\u7528\u8005\u4f86\u8aaa\u53ef\u4ee5\u7e7c\u7e8c\u4f7f\u7528\u7fd2\u6163\u7684  ",(0,i.kt)("inlineCode",{parentName:"p"},"docker run/exec/attach")," \u7b49\u6307\u4ee4\u800c\u4e0d\u6703\u767c\u73fe\u5e95\u5c64\u5176\u5be6\u5df2\u7d93\u5b8c\u5168\u4e0d\u540c\u4e86\u3002"),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://i.imgur.com/dII0wFL.png",alt:null}),"\n\u5716\u7247\u7bc0\u9304\u81ea",(0,i.kt)("a",{parentName:"p",href:"https://github.com/kata-containers/documentation/blob/master/design/architecture.md"},"Kata Containers Architecture\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"kata-container")," \u7684\u4f5c\u6cd5\u5b8c\u5168\u4e0d\u540c\u65bc ",(0,i.kt)("inlineCode",{parentName:"p"},"gVisor"),", \u5176\u5c31\u5982\u540c\u904e\u5f80\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Virtual Machine")," \u4e00\u6a23\uff0c\u771f\u6b63\u7684\u53bb\u5275\u9020\u4e00\u500b ",(0,i.kt)("inlineCode",{parentName:"p"},"VM")," \u4f86\u9694\u96e2\u6240\u8b02\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Host Kernel")," \u4ee5\u53ca ",(0,i.kt)("inlineCode",{parentName:"p"},"Guest Kernel"),". \u63a5\u8005\u6703\u5728\u9019\u500b ",(0,i.kt)("inlineCode",{parentName:"p"},"VM")," \u4e0a\u9762\u53bb\u904b\u884c\u4f7f\u7528\u8005\u6240\u8acb\u6c42\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Container"),"\uff0c\u85c9\u6b64\u9054\u5230\u4e00\u500b\u5916\u8868\u770b\u4f3c ",(0,i.kt)("inlineCode",{parentName:"p"},"Container")," \u5be6\u969b\u4e0a\u662f\u4e00\u500b\u904b\u884c\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"VM")," \u4e0a\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Container.")),(0,i.kt)("p",null,"\u76f8\u95dc\u7684\u67b6\u69cb\u53ef\u4ee5\u53c3\u8003\u4e0b\u5716\n",(0,i.kt)("img",{parentName:"p",src:"https://i.imgur.com/PpzEOae.png",alt:null}),"\n\u5716\u7247\u7bc0\u9304\u81ea",(0,i.kt)("a",{parentName:"p",href:"https://katacontainers.io/"},"About Kata Containers\n")),(0,i.kt)("p",null,"\u5728\u6b64\u67b6\u69cb\u4e0b\uff0c\u6211\u5011\u53ef\u4ee5\u60f3\u50cf\u5230\u5982\u679c\u4eca\u5929\u6709\u4efb\u4f55 ",(0,i.kt)("inlineCode",{parentName:"p"},"container CLI")," \u60f3\u8981\u76f4\u63a5\u64cd\u63a7\u8a72 ",(0,i.kt)("inlineCode",{parentName:"p"},"Container"),"\u7684\u8a71\uff0c\u554f\u984c\u5c31\u5728\u65bc\u5f9e ",(0,i.kt)("inlineCode",{parentName:"p"},"OCI Runtime")," \u9001\u51fa\u7684\u6307\u4ee4\u8981\u5982\u4f55\u64cd\u63a7\u5230\u8a72 ",(0,i.kt)("inlineCode",{parentName:"p"},"VM")," \u88e1\u9762\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Container"),". \u65bc\u662f\u4f60\u53ef\u4ee5\u770b\u5230\u67b6\u69cb\u4e2d\u6709\u6240\u8b02\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Proxy")," \u4ee5\u53ca ",(0,i.kt)("inlineCode",{parentName:"p"},"Agent"),"\n\u9019\u5169\u500b\u89d2\u8272\u5c31\u662f\u8ca0\u8cac\u5e6b\u5fd9\u9032\u884c\u6307\u4ee4\u4ea4\u63db\u7684\uff0c\u8b93\u6574\u500b\u904b\u4f5c\u74b0\u5883\u64cd\u4f5c\u8d77\u4f86\u8ddf\u719f\u6089\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Container")," \u4e00\u81f4\uff0c\u4e5f\u7b26\u5408\u6700\u4e0a\u9762\u7684\u5c08\u6848\u4ecb\u7d39 ",(0,i.kt)("strong",{parentName:"p"},"seamlessly plug into the containers ecosystem.")),(0,i.kt)("h2",{id:"network"},"Network"),(0,i.kt)("p",null,"\u7576\u57fa\u672c\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Container")," \u904b\u884c\u8d77\u4f86\u5f8c\uff0c\u63a5\u4e0b\u4f86\u5c31\u8981\u601d\u8003\u7db2\u8def\u7684\u554f\u984c\uff0c\u76ee\u524d\u6709\u5169\u5957\u7db2\u8def\u89e3\u6c7a\u65b9\u6848\xb7\u5206\u5225\u662f ",(0,i.kt)("inlineCode",{parentName:"p"},"Docker")," \u63d0\u51fa\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Container Network Management (CNM)")," \u4ee5\u53ca ",(0,i.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u958b\u767c\u5f8c\u63d0\u51fa\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Container Network Interface (CNI)"),"\u3002"),(0,i.kt)("p",null,"\u66f4\u591a\u7684\u7d30\u7bc0\u6703\u5230\u4e4b\u5f8c ",(0,i.kt)("inlineCode",{parentName:"p"},"CNI")," \u7684\u7ae0\u7bc0\u518d\u4f86\u4ed4\u7d30\u63a2\u8a0e\u9019\u4e9b\uff0c\u9019\u908a\u5148\u7528\u4e00\u500b\u7c21\u55ae\u7684\u6d41\u7a0b\u8aaa\u660e\u5230\u5e95 ",(0,i.kt)("inlineCode",{parentName:"p"},"Kata Container")," \u9047\u5230\u4ec0\u9ebc\u554f\u984c\u4ee5\u53ca\u600e\u9ebc\u89e3\u6c7a\u3002"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"\u5927\u90e8\u5206\u7684 ",(0,i.kt)("inlineCode",{parentName:"li"},"CNI")," \u6703\u900f\u904e ",(0,i.kt)("inlineCode",{parentName:"li"},"Linux Kernel")," \u63d0\u4f9b\u7684 ",(0,i.kt)("inlineCode",{parentName:"li"},"veth")," \u9019\u500b\u529f\u80fd\u4f86\u4e32\u806f\u4e0d\u540c\u7684 ",(0,i.kt)("inlineCode",{parentName:"li"},"Network Namespace"),"\uff0c\u85c9\u6b64\u8b93\u5c01\u5305\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u9694\u96e2\u7a7a\u9593\u4e2d\u50b3\u8f38"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"Kata Container")," \u672c\u8eab\u5305\u4e86\u4e00\u500b ",(0,i.kt)("inlineCode",{parentName:"li"},"Virtual Machine")," \u5728\u6700\u5916\u5c64\uff0c\u4f7f\u5f97\u4e0a\u8ff0\u7684\u65b9\u6cd5\u4e0d\u53ef\u884c"),(0,i.kt)("li",{parentName:"ol"},"\u70ba\u4e86\u76f8\u5bb9\u6240\u6709\u7684 ",(0,i.kt)("inlineCode",{parentName:"li"},"CNM")," \u4ee5\u53ca ",(0,i.kt)("inlineCode",{parentName:"li"},"CNI"),", \u52e2\u5fc5\u8981\u627e\u4e00\u500b ",(0,i.kt)("inlineCode",{parentName:"li"},"network namespace")," \u4f9b\u9019\u4e9b\u4ecb\u9762\u53bb\u4f7f\u7528"),(0,i.kt)("li",{parentName:"ol"},"\u65bc\u662f\u6c7a\u5b9a\u5148\u5275\u9020\u4e00\u500b ",(0,i.kt)("inlineCode",{parentName:"li"},"network namespace"),"(\u53ea\u6709\u55ae\u7d14\u7684\u7db2\u8def\u529f\u80fd\u9694\u96e2),",(0,i.kt)("inlineCode",{parentName:"li"},"CNM/CNI")," \u6703\u5c0d\u9019\u500b ",(0,i.kt)("inlineCode",{parentName:"li"},"network namespace")," \u9032\u884c\u8a2d\u5b9a\uff0c\u5c07\u76f8\u95dc\u7684\u7db2\u8def\u529f\u80fd\u8a2d\u5b9a\u597d\uff0c\u4e4b\u5f8c\u900f\u904e ",(0,i.kt)("inlineCode",{parentName:"li"},"Linux Bridge")," \u914d\u5408 ",(0,i.kt)("inlineCode",{parentName:"li"},"Tap")," \u7684\u65b9\u5f0f\u5c07\u8a72 ",(0,i.kt)("inlineCode",{parentName:"li"},"network namespace")," \u4e0a\u7684\u7db2\u8def\u4ecb\u9762\u8207 ",(0,i.kt)("inlineCode",{parentName:"li"},"VM")," \u88e1\u9762\u7684\u7db2\u8def\u4ecb\u9762\u7d66\u4e32\u63a5\u8d77\u4f86\u3002"),(0,i.kt)("li",{parentName:"ol"},"\u9019\u908a\u5be6\u969b\u4e0a\u662f\u900f\u904e ",(0,i.kt)("a",{parentName:"li",href:"https://virt.kernelnewbies.org/MacVTap"},"MACVTAP")," \u9019\u500b\u65b9\u5f0f\u4f86\u4e32\u63a5, \u6709\u8208\u8da3\u7684\u53ef\u4ee5\u81ea\u884c\u95b1\u8b80")),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://i.imgur.com/19k2www.png",alt:null}),"\n\u5716\u7247\u7bc0\u9304\u81ea",(0,i.kt)("a",{parentName:"p",href:"https://github.com/kata-containers/documentation/blob/master/design/architecture.md"},"Kata Containers Architecture\n")),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://i.imgur.com/xF11rVU.png",alt:null}),"\n\u5716\u7247\u7bc0\u9304\u81ea",(0,i.kt)("a",{parentName:"p",href:"https://github.com/kata-containers/documentation/blob/master/design/architecture.md"},"Kata Containers Architecture\n")),(0,i.kt)("h1",{id:"summary"},"Summary"),(0,i.kt)("p",null,"\u672c\u7ae0\u7bc0\u8ddf\u5927\u5bb6\u5206\u4eab\u4e26\u8a0e\u8ad6\u4e86\u4e00\u4e0b\u57fa\u65bc\u5b89\u5168\u6027\u8003\u91cf\u6240\u767c\u5c55\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"OCI Runtime")," \u5c08\u6848,\u53ef\u4ee5\u6e05\u695a\u5730\u770b\u5230 ",(0,i.kt)("inlineCode",{parentName:"p"},"gVisor")," \u8207 ",(0,i.kt)("inlineCode",{parentName:"p"},"kata container")," \u63a1\u53d6\u4e86\u5169\u7a2e\u622a\u7136\u4e0d\u540c\u7684\u65b9\u5f0f\u4f86\u767c\u5c55\u3002\n\u9019\u5169\u500b\u89e3\u6c7a\u65b9\u6848\u90fd\u76f8\u5bb9\u65bc ",(0,i.kt)("inlineCode",{parentName:"p"},"OCI Runtime"),"\uff0c\u6240\u4ee5\u53ea\u8981\u4e0a\u5c64\u7684\u670d\u52d9\u4e5f\u652f\u63f4 ",(0,i.kt)("inlineCode",{parentName:"p"},"OCI Runtime"),"\uff0c\u90a3\u5c31\u53ef\u4ee5\u5f88\u8f15\u9b06\u7684\u8f49\u79fb\u6e2c\u8a66\uff0c\u8b6c\u5982 ",(0,i.kt)("inlineCode",{parentName:"p"},"containerd")," \u6216\u662f ",(0,i.kt)("inlineCode",{parentName:"p"},"cri-o"),"\u3002"),(0,i.kt)("p",null,"\u7531\u65bc\u6700\u5f8c\u5e95\u5c64\u90fd\u662f ",(0,i.kt)("inlineCode",{parentName:"p"},"Container"),", \u6240\u4ee5\u4f7f\u7528\u8005\u90e8\u5c6c\u7684\u4efb\u4f55\u670d\u52d9\u7406\u8ad6\u4e0a\u90fd\u4e0d\u9700\u8981\u4fee\u6539\uff0c\u53ef\u4ee5\u7e7c\u7e8c\u4f7f\u7528\u5404\u5f0f\u5404\u6a23\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Container Image")," \u4ee5\u53ca\u76f8\u95dc\u7684\u5de5\u5177\u4f86\u8655\u7406\u3002"),(0,i.kt)("p",null,"\u4e0b\u4e00\u7bc7\u5c31\u662f ",(0,i.kt)("inlineCode",{parentName:"p"},"CRI")," \u7cfb\u5217\u6587\u7ae0\u7684\u6700\u5f8c\u4e00\u7bc7\uff0c\u5230\u6642\u5019\u5c07\u8ddf\u5927\u5bb6\u5982\u4f55\u5c07 ",(0,i.kt)("inlineCode",{parentName:"p"},"Kubernetes CRI")," \u8207 ",(0,i.kt)("inlineCode",{parentName:"p"},"Virtual Machine")," \u7d66\u4e32\u63a5\u8d77\u4f86\uff0c\u9019\u7a2e\u60c5\u6cc1\u4e0b\u5df2\u7d93\u4e0d\u9700\u8981 ",(0,i.kt)("inlineCode",{parentName:"p"},"Container Image")," \u4e86\uff0c\u800c\u662f\u8981\u63a1\u7528\u771f\u6b63\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"VM Image")," \u4e26\u4e14\u900f\u904e ",(0,i.kt)("inlineCode",{parentName:"p"},"Kubernetes")," \u4f86\u7ba1\u7406\u9019\u4e9b\u652f\u63f4 ",(0,i.kt)("inlineCode",{parentName:"p"},"CRI")," \u64cd\u4f5c\u4f46\u662f\u5be6\u969b\u4e0a\u662f\u5b8c\u5168\u8ddf ",(0,i.kt)("inlineCode",{parentName:"p"},"Container")," \u7121\u95dc\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Virtual Machine")," \u89e3\u6c7a\u65b9\u6848\u3002"),(0,i.kt)("h1",{id:"\u53c3\u8003"},"\u53c3\u8003"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/kata-containers/runtime"},"https://github.com/kata-containers/runtime")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://thenewstack.io/how-to-implement-secure-containers-using-googles-gvisor/"},"https://thenewstack.io/how-to-implement-secure-containers-using-googles-gvisor/")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/kata-containers/runtime"},"https://github.com/kata-containers/runtime")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/google/gvisor"},"https://github.com/google/gvisor")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/moby/moby/blob/master/profiles/seccomp/default.json"},"https://github.com/moby/moby/blob/master/profiles/seccomp/default.json")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://katacontainers.io/"},"https://katacontainers.io/"))))}s.isMDXComponent=!0}}]);
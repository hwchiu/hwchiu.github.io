"use strict";(self.webpackChunkhwchiu=self.webpackChunkhwchiu||[]).push([[40677],{3905:(t,e,r)=>{r.d(e,{Zo:()=>i,kt:()=>u});var n=r(67294);function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e){if(null==t)return{};var r,n,a=function(t,e){if(null==t)return{};var r,n,a={},o=Object.keys(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||(a[r]=t[r]);return a}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}var s=n.createContext({}),m=function(t){var e=n.useContext(s),r=e;return t&&(r="function"==typeof t?t(e):p(p({},e),t)),r},i=function(t){var e=m(t.components);return n.createElement(s.Provider,{value:e},t.children)},k="mdxType",g={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},N=n.forwardRef((function(t,e){var r=t.components,a=t.mdxType,o=t.originalType,s=t.parentName,i=l(t,["components","mdxType","originalType","parentName"]),k=m(r),N=a,u=k["".concat(s,".").concat(N)]||k[N]||g[N]||o;return r?n.createElement(u,p(p({ref:e},i),{},{components:r})):n.createElement(u,p({ref:e},i))}));function u(t,e){var r=arguments,a=e&&e.mdxType;if("string"==typeof t||a){var o=r.length,p=new Array(o);p[0]=N;var l={};for(var s in e)hasOwnProperty.call(e,s)&&(l[s]=e[s]);l.originalType=t,l[k]="string"==typeof t?t:a,p[1]=l;for(var m=2;m<o;m++)p[m]=r[m];return n.createElement.apply(null,p)}return n.createElement.apply(null,r)}N.displayName="MDXCreateElement"},62057:(t,e,r)=>{r.r(e),r.d(e,{assets:()=>s,contentTitle:()=>p,default:()=>g,frontMatter:()=>o,metadata:()=>l,toc:()=>m});var n=r(87462),a=(r(67294),r(3905));const o={title:"[\u8ad6\u6587\u5c0e\u8b80] - Towards Zero Copy Dataflows using RDMA",tags:["Network","RDMA","TensorFlow","Linux","Paper"],date:new Date("2018-01-23T02:27:30.000Z"),description:"\u672c\u6587\u5c6c\u65bc\u8ad6\u6587\u5c0e\u8b80\u7cfb\u5217\uff0c\u9019\u6b21\u91dd\u5c0d\u7684\u662f\u9ad8\u901f\u7db2\u8def(RDMA)\u7684\u61c9\u7528\uff0c\u4f86\u6e90\u662f SICCOM 2017 \u6703\u8b70\u4e0a\u3002\u9019\u7bc7\u6587\u7ae0\u6709\u8da3\u7684\u5730\u65b9\u5728\u65bc\u4ed6\u4e0d\u662f\u55ae\u7d14\u7684\u4ecb\u7d39\u67b6\u69cb\uff0c\u800c\u662f\u900f\u904e\u4e00\u500b\u5be6\u969b\u7684\u61c9\u7528\u7a0b\u5f0f\u4f86\u95e1\u8ff0\u7576\u8a72\u61c9\u7528\u7a0b\u5f0f\u642d\u914d\u4e0a RDMA \u5f8c\u7372\u5f97\u4e86 Zero Copy \u7684\u7279\u8272\uff0c\u5728\u6b64\u7279\u8272\u52a0\u6301\u4e0b\uff0c\u539f\u5148\u61c9\u7528\u7a0b\u5f0f\u7684\u6548\u80fd\u63d0\u5347\u4e86\u591a\u5c11\u3002\u672c\u6587\u7684\u6a19\u984c\u662f Towards Zero Copy Dataflows using RDMA, \u5176\u5167\u5bb9\u8ddf AI \u7684\u8a13\u7df4\u904e\u7a0b\u6709\u95dc\uff0c\u63a1\u7528\u4e86\u7531 Google \u958b\u6e90\u7684\u8a13\u7df4\u6846\u67b6\uff0c Ternsorflow, \u4e26\u4e14\u5206\u6790\u4e86\u5728\u539f\u5148\u5206\u6563\u5f0f\u7684\u8a13\u7df4\u6a21\u578b\u4e2d\uff0c\u8cc7\u6599\u4e0d\u8ad6\u5728 CPU/GPU UserSpace/KernelSpace \u751a\u81f3\u7bc0\u9ede\u9593\u90fd\u6709\u5927\u91cf\u7684\u8cc7\u6599\u8907\u88fd\u884c\u70ba\u3002\u900f\u904e RDMA \u7684\u5e6b\u5fd9\u6e1b\u5c11\u4e86\u9019\u4e9b\u884c\u70ba\u6700\u5f8c\u8b49\u660e\u4e86\u6574\u9ad4\u5206\u6563\u5f0f\u8a13\u7df4\u7684\u6642\u9593\u5927\u5e45\u5ea6\u7e2e\u77ed\uff0c\u662f\u500b\u975e\u5e38\u6709\u8da3\u7684\u77ed\u6587."},p="Preface",l={unversionedId:"2018/paper-tensorflow-with-rdma",id:"2018/paper-tensorflow-with-rdma",title:"[\u8ad6\u6587\u5c0e\u8b80] - Towards Zero Copy Dataflows using RDMA",description:"\u672c\u6587\u5c6c\u65bc\u8ad6\u6587\u5c0e\u8b80\u7cfb\u5217\uff0c\u9019\u6b21\u91dd\u5c0d\u7684\u662f\u9ad8\u901f\u7db2\u8def(RDMA)\u7684\u61c9\u7528\uff0c\u4f86\u6e90\u662f SICCOM 2017 \u6703\u8b70\u4e0a\u3002\u9019\u7bc7\u6587\u7ae0\u6709\u8da3\u7684\u5730\u65b9\u5728\u65bc\u4ed6\u4e0d\u662f\u55ae\u7d14\u7684\u4ecb\u7d39\u67b6\u69cb\uff0c\u800c\u662f\u900f\u904e\u4e00\u500b\u5be6\u969b\u7684\u61c9\u7528\u7a0b\u5f0f\u4f86\u95e1\u8ff0\u7576\u8a72\u61c9\u7528\u7a0b\u5f0f\u642d\u914d\u4e0a RDMA \u5f8c\u7372\u5f97\u4e86 Zero Copy \u7684\u7279\u8272\uff0c\u5728\u6b64\u7279\u8272\u52a0\u6301\u4e0b\uff0c\u539f\u5148\u61c9\u7528\u7a0b\u5f0f\u7684\u6548\u80fd\u63d0\u5347\u4e86\u591a\u5c11\u3002\u672c\u6587\u7684\u6a19\u984c\u662f Towards Zero Copy Dataflows using RDMA, \u5176\u5167\u5bb9\u8ddf AI \u7684\u8a13\u7df4\u904e\u7a0b\u6709\u95dc\uff0c\u63a1\u7528\u4e86\u7531 Google \u958b\u6e90\u7684\u8a13\u7df4\u6846\u67b6\uff0c Ternsorflow, \u4e26\u4e14\u5206\u6790\u4e86\u5728\u539f\u5148\u5206\u6563\u5f0f\u7684\u8a13\u7df4\u6a21\u578b\u4e2d\uff0c\u8cc7\u6599\u4e0d\u8ad6\u5728 CPU/GPU UserSpace/KernelSpace \u751a\u81f3\u7bc0\u9ede\u9593\u90fd\u6709\u5927\u91cf\u7684\u8cc7\u6599\u8907\u88fd\u884c\u70ba\u3002\u900f\u904e RDMA \u7684\u5e6b\u5fd9\u6e1b\u5c11\u4e86\u9019\u4e9b\u884c\u70ba\u6700\u5f8c\u8b49\u660e\u4e86\u6574\u9ad4\u5206\u6563\u5f0f\u8a13\u7df4\u7684\u6642\u9593\u5927\u5e45\u5ea6\u7e2e\u77ed\uff0c\u662f\u500b\u975e\u5e38\u6709\u8da3\u7684\u77ed\u6587.",source:"@site/docs/2018/paper-tensorflow-with-rdma.md",sourceDirName:"2018",slug:"/2018/paper-tensorflow-with-rdma",permalink:"/docs/2018/paper-tensorflow-with-rdma",draft:!1,tags:[{label:"Network",permalink:"/docs/tags/network"},{label:"RDMA",permalink:"/docs/tags/rdma"},{label:"TensorFlow",permalink:"/docs/tags/tensor-flow"},{label:"Linux",permalink:"/docs/tags/linux"},{label:"Paper",permalink:"/docs/tags/paper"}],version:"current",lastUpdatedBy:"HWC",frontMatter:{title:"[\u8ad6\u6587\u5c0e\u8b80] - Towards Zero Copy Dataflows using RDMA",tags:["Network","RDMA","TensorFlow","Linux","Paper"],date:"2018-01-23T02:27:30.000Z",description:"\u672c\u6587\u5c6c\u65bc\u8ad6\u6587\u5c0e\u8b80\u7cfb\u5217\uff0c\u9019\u6b21\u91dd\u5c0d\u7684\u662f\u9ad8\u901f\u7db2\u8def(RDMA)\u7684\u61c9\u7528\uff0c\u4f86\u6e90\u662f SICCOM 2017 \u6703\u8b70\u4e0a\u3002\u9019\u7bc7\u6587\u7ae0\u6709\u8da3\u7684\u5730\u65b9\u5728\u65bc\u4ed6\u4e0d\u662f\u55ae\u7d14\u7684\u4ecb\u7d39\u67b6\u69cb\uff0c\u800c\u662f\u900f\u904e\u4e00\u500b\u5be6\u969b\u7684\u61c9\u7528\u7a0b\u5f0f\u4f86\u95e1\u8ff0\u7576\u8a72\u61c9\u7528\u7a0b\u5f0f\u642d\u914d\u4e0a RDMA \u5f8c\u7372\u5f97\u4e86 Zero Copy \u7684\u7279\u8272\uff0c\u5728\u6b64\u7279\u8272\u52a0\u6301\u4e0b\uff0c\u539f\u5148\u61c9\u7528\u7a0b\u5f0f\u7684\u6548\u80fd\u63d0\u5347\u4e86\u591a\u5c11\u3002\u672c\u6587\u7684\u6a19\u984c\u662f Towards Zero Copy Dataflows using RDMA, \u5176\u5167\u5bb9\u8ddf AI \u7684\u8a13\u7df4\u904e\u7a0b\u6709\u95dc\uff0c\u63a1\u7528\u4e86\u7531 Google \u958b\u6e90\u7684\u8a13\u7df4\u6846\u67b6\uff0c Ternsorflow, \u4e26\u4e14\u5206\u6790\u4e86\u5728\u539f\u5148\u5206\u6563\u5f0f\u7684\u8a13\u7df4\u6a21\u578b\u4e2d\uff0c\u8cc7\u6599\u4e0d\u8ad6\u5728 CPU/GPU UserSpace/KernelSpace \u751a\u81f3\u7bc0\u9ede\u9593\u90fd\u6709\u5927\u91cf\u7684\u8cc7\u6599\u8907\u88fd\u884c\u70ba\u3002\u900f\u904e RDMA \u7684\u5e6b\u5fd9\u6e1b\u5c11\u4e86\u9019\u4e9b\u884c\u70ba\u6700\u5f8c\u8b49\u660e\u4e86\u6574\u9ad4\u5206\u6563\u5f0f\u8a13\u7df4\u7684\u6642\u9593\u5927\u5e45\u5ea6\u7e2e\u77ed\uff0c\u662f\u500b\u975e\u5e38\u6709\u8da3\u7684\u77ed\u6587."},sidebar:"techPost",previous:{title:"[netfilter] Dig Into Docker Bridge Network By iptables/ebtables",permalink:"/docs/2018/netfilter-eiptables-iii"},next:{title:"NCurses Disk Usage(ncdu)",permalink:"/docs/2018/tools-ncdu"}},s={},m=[{value:"System &amp; Library",id:"system--library",level:2},{value:"Dataflow",id:"dataflow",level:2},{value:"Environment (Hardware)",id:"environment-hardware",level:3},{value:"Environment (Software)",id:"environment-software",level:3},{value:"Target",id:"target",level:3},{value:"Metric",id:"metric",level:3},{value:"Result",id:"result",level:3}],i={toc:m},k="wrapper";function g(t){let{components:e,...r}=t;return(0,a.kt)(k,(0,n.Z)({},i,r,{components:e,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"preface"},"Preface"),(0,a.kt)("p",null,"2017 SICCOM \u4e0a\u9762\u51fa\u73fe\u4e86\u4e00\u7bc7\u4ee4\u4eba\u611f\u5230\u6709\u8da3\u7684\u8ad6\u6587\uff0c\u5167\u5bb9\u662f ",(0,a.kt)("strong",{parentName:"p"},"Towards Zero Copy Dataflows using RDMA"),"\uff0c\u53ef\u4ee5\u5230 ",(0,a.kt)("a",{parentName:"p",href:"https://dl.acm.org/citation.cfm?id=3131975"},"\u9019\u908a")," \u95b1\u8b80\u8a72\u7bc7\u8ad6\u6587\u5167\u5bb9\u3002"),(0,a.kt)("p",null,"\u518d\u770b\u4e00\u7bc7\u8ad6\u6587\u524d\uff0c\u6700\u91cd\u8981\u7684\u5c31\u662f\u5176\u6458\u8981\uff0c\u6839\u64da\u5176\u6458\u8981\u6211\u5011\u53ef\u4ee5\u5feb\u901f\u7684\u5c0d\u8a72\u7bc7\u8ad6\u6587\u6709\u4e00\u500b\u57fa\u672c\u7684\u8a8d\u8b58\uff0c\u6240\u4ee5\u5148\u4f86\u770b\u4e00\u4e0b\u8a72\u7bc7\u8ad6\u6587\u7684\u6458\u8981"),(0,a.kt)("h1",{id:"abstract"},"ABSTRACT"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Remote Direct Memory Access (RDMA) offers ultra-low latency and\nCPU bypass networking to application programmers. Existing applications\nare often designed around socket based software stack that\nmanages application buffers separately from networking buffers\nand do memory copies between them when sending/receiving data.")),(0,a.kt)("p",null,"\u5148\u5927\u6982\u4ecb\u7d39\u4e86\u4e00\u4e0b RDMA \u7684\u7279\u6027\u8207\u50f9\u503c\uff0c\u60f3\u8981\u77ad\u89e3\u66f4\u591a\u95dc\u65bc RDMA \u7684\u53ef\u4ee5\u53c3\u8003",(0,a.kt)("a",{parentName:"p",href:"https://www.hwchiu.com/docs/2017/rdma-introduction-i"},"\u9019\u7bc7\u6587\u7ae0"),"\u3002"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"With large sized (up to hundreds MB) application buffers, the cost of\nsuch copies adds non trivial overhead to the end-to-end communication\npipeline.")),(0,a.kt)("p",null,"\u9019\u7bc7\u5c31\u662f\u554f\u984c\u7684\u91cd\u9ede\uff0c\u5927\u6a94\u6848\u8cc7\u6599\u5728\u8907\u88fd\u904e\u7a0b\u4e2d\u7522\u751f\u7684\u8ca0\u64d4\uff0c\u4e5f\u662f\u672c\u7bc7\u8ad6\u6587\u60f3\u8981\u89e3\u6c7a\u7684\u554f\u984c\u3002"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"In this work, we made an attempt to design a zero copy\ntransport for distribute dataflow frameworks that unifies application\nand networking buffer management and completely eliminates\nunnecessary memory copies.")),(0,a.kt)("p",null,"\u9019\u88e1\u63d0\u5230\uff0c\u9019\u7bc7\u8ad6\u6587\u600e\u9ebc\u89e3\u6c7a\u4e0a\u8ff0\u554f\u984c\uff0c\u800c\u4e14\u76f4\u63a5\u77ad\u7576\u7684\u8aaa\u660e\u5176\u65b9\u6cd5\u5c31\u662f\uff0c",(0,a.kt)("strong",{parentName:"p"},"zero copy transport for distrubute dataflow frameworks"),"."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Our prototype on top of TensorFlow\nshows 2.43x performance improvement over gRPC based transport\nand 1.21x performance improvement over an alternative RDMA\ntransport with private buffers and memory copies.")),(0,a.kt)("p",null,"\u6700\u5f8c\u8aaa\u660e\u4e0a\u8ff0\u7684 ",(0,a.kt)("strong",{parentName:"p"},"distrubute dataflow frameworks")," \u63a1\u7528\u7684\u662f ",(0,a.kt)("strong",{parentName:"p"},"tensorflow"),"\uff0c\u4e26\u4e14\u8a55\u6bd4\u4e86\u4e00\u4e0b\u6548\u80fd ((job \u5b8c\u6210\u7684\u6642\u9593))\u3002\n\u9019\u908a\u6bd4\u8f03\u7684\u662f\u539f\u751f\u7684 gRPC \u7248\u672c\uff0c\u4ee5\u53ca ",(0,a.kt)("strong",{parentName:"p"},"Yahoo")," \u6240\u958b\u767c\u7684\u7248\u672c\n\u5176\u4e2d Yahoo\u3000\u958b\u767c\u7684\u7248\u672c\u53ef\u4ee5\u5728 ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/yahoo/TensorFlowOnSpark"},"Github")," \u9019\u908a\u770b\u5230"),(0,a.kt)("p",null,"\u8a72\u7bc7\u8ad6\u6587\u5167\u5bb9\u6eff\u7c21\u77ed\u7684\uff0c\u53ea\u6709\u77ed\u77ed\u7684\u4e09\u9801\uff0c\u5927\u62b5\u4e0a\u5206\u6210"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u6709\u4ec0\u9ebc\u554f\u984c"),(0,a.kt)("li",{parentName:"ol"},"\u9019\u500b\u554f\u984c\u53ef\u4ee5\u600e\u9ebc\u89e3\u6c7a"),(0,a.kt)("li",{parentName:"ol"},"\u6548\u80fd\u8a55\u4f30")),(0,a.kt)("p",null,"\u8a73\u7d30\u7684\u5be6\u4f5c\u5167\u5bb9\u8ddf\u67b6\u69cb\u8a2d\u8a08\u90fd\u7528\u7528\u77ed\u77ed\u7684\u6587\u5b57\u5e36\u904e\u800c\u5df2\uff0c\u6240\u4ee5\u5728\u770b\u9019\u7bc7\u8ad6\u6587\u7684\u6642\u5019\uff0c\u5fc5\u9808\u8981\u6709\u4e00\u5b9a\u7684\u80cc\u666f\u77e5\u8b58\uff0c\u624d\u80fd\u5920\u66f4\u5bb9\u6613\u5730\u53bb\u60f3\u50cf\u4f5c\u8005\u60f3\u8981\u8868\u9054\u7684\u610f\u601d\u3002"),(0,a.kt)("h1",{id:"tensorflow"},"Tensorflow"),(0,a.kt)("p",null,"\u7531\u65bc\u9019\u7bc7\u6587\u7ae0\u8457\u4f7f\u7528\u7684 ",(0,a.kt)("strong",{parentName:"p"},"tensorflow"),",\u4e26\u4e14\u662f\u57fa\u65bc\u5206\u6563\u5f0f\u904b\u7b97\u7684 ",(0,a.kt)("strong",{parentName:"p"},"tensorflow"),"\uff0c\u6240\u4ee5\u5728\u958b\u59cb\u672c\u6587\u4e4b\u524d\uff0c\u5fc5\u9808\u8981\u5148\u4f86\u8907\u7fd2\u4e00\u4e0b\u5206\u6563\u5f0f\u7684 ",(0,a.kt)("strong",{parentName:"p"},"tensorflow"),"\u67b6\u69cb\uff0c\u4e26\u4e14\u4e86\u89e3\u4e00\u4e0b\u5176\u57fa\u672c\u7684\u904b\u4f5c\u884c\u70ba\u8207\u6982\u5ff5\u3002\n\u9019\u908a\u5c31\u4e0d\u4ecb\u7d39\uff0c\u53ef\u4ee5\u76f4\u63a5\u53c3\u8003 ",(0,a.kt)("a",{parentName:"p",href:"https://kairen.github.io/2017/04/10/tensorflow/intro/"},"TensorFlow \u57fa\u672c\u4f7f\u7528\u8207\u5206\u6563\u5f0f\u6982\u5ff5")," \u9019\u7bc7\u6587\u7ae0\u4f86\u5b78\u7fd2"),(0,a.kt)("h1",{id:"introduction"},"INTRODUCTION"),(0,a.kt)("p",null,"\u8fd1\u5e74\u4f86\uff0c\u4e0d\u8ad6\u662f\u5c0f/\u4e2d/\u5927\u4f01\u696d\uff0c\u6216\u662f\u8cc7\u6599\u4e2d\u5fc3\u5167\u90e8\u7684\u7db2\u8def\u4ea4\u63db\u6a5f\u90fd\u8f49\u63db\u621010G/40G\uff0c\u751a\u81f3\u662f100G\uff0c\u6108\u4f86\u6108\u591a\u9ad8\u901f\u7db2\u8def\u7684\u9700\u6c42\u3002\u518d\u8edf\u9ad4\u65b9\u9762\uff0c\u70ba\u4e86\u80fd\u5920\u9054\u5230\u9019\u4e9b\u9ad8\u901f\u7db2\u8def(\u9ad8\u6d41\u91cf\uff0c\u4f4e\u5ef6\u9072\u6027)\uff0c\u6709\u5f88\u591a\u76f8\u95dc\u7684\u6280\u8853\u90fd\u88ab\u767c\u5c55\u51fa\u4f86\uff0c\u8b6c\u5982 Intel \u7684 ",(0,a.kt)("strong",{parentName:"p"},"DPDK"),"\uff0c Mellanox \u63a8\u51fa\u7684 ",(0,a.kt)("strong",{parentName:"p"},"ASAP2")," \u4ee5\u53ca\u672c\u6587\u7684\u4e3b\u89d2 ",(0,a.kt)("strong",{parentName:"p"},"RDMA(Remote Directly Memory Access)"),"\u3002\n\u7136\u800c\u4e16\u754c\u4e0a\u5927\u90e8\u5206\u904b\u884c\u65bc ",(0,a.kt)("strong",{parentName:"p"},"Linux")," \u4e0a\u7684\u7db2\u8def\u61c9\u7528\u7a0b\u5f0f\uff0c\u5e7e\u4e4e\u90fd\u662f\u63a1\u7528 ",(0,a.kt)("strong",{parentName:"p"},"BSD")," \u898f\u7bc4\u7684 ",(0,a.kt)("strong",{parentName:"p"},"SocketAPI")," \u4f86\u9032\u884c\u7db2\u8def\u7a0b\u5f0f\u958b\u767c\uff0c\u9019\u610f\u5473\u8005"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u6240\u6709\u7684\u7db2\u8def\u5c01\u5305\u90fd\u662f\u4f9d\u8cf4 ",(0,a.kt)("strong",{parentName:"li"},"Linux Kernel")," \u7684 ",(0,a.kt)("strong",{parentName:"li"},"TCP/IP")," \u4f86\u9032\u884c\u8655\u7406"),(0,a.kt)("li",{parentName:"ol"},"\u6bcf\u500b\u5f9e\u61c9\u7528\u7a0b\u5f0f\u9001\u51fa\u53bb\u7684\u5c01\u5305\u90fd\u8981\u518d ",(0,a.kt)("strong",{parentName:"li"},"User-Space")," \u8207 ",(0,a.kt)("strong",{parentName:"li"},"Kernel-Space")," \u50b3\u905e\uff0c\u6bcf\u6b21\u7684\u50b3\u905e\u90fd\u727d\u626f\u5230\u8cc7\u6599\u7684\u4ea4\u63db\u3002\n\u7136\u800c\u4e0a\u8ff0\u63d0\u5230\u7684\u76f8\u95dc\u6280\u8853\uff0c\u672c\u8eab\u65bc\u7a0b\u5f0f\u64b0\u5beb\u65b9\u9762\u90fd\u6703\u6709\u7279\u5225\u7684 ",(0,a.kt)("strong",{parentName:"li"},"API")," \u8981\u4f7f\u7528\uff0c\u56e0\u70ba\u5927\u90e8\u5206\u7684\u6982\u5ff5\u90fd\u662f\u8da8\u8fd1\u65bc ",(0,a.kt)("strong",{parentName:"li"},"Kernel Bypass"),"\uff0c\u6574\u500b\u5c01\u5305\u7684\u6d41\u7a0b\u90fd\u6703\u8df3\u904e ",(0,a.kt)("strong",{parentName:"li"},"Kernel"),"\uff0c\u6240\u4ee5\u6c92\u6709\u8fa6\u6cd5\u76f4\u63a5\u4f7f\u7528\u50b3\u7d71 ",(0,a.kt)("strong",{parentName:"li"},"BSD")," \u7684 ",(0,a.kt)("strong",{parentName:"li"},"API"),"\u3002\n\u4ee5 ",(0,a.kt)("strong",{parentName:"li"},"RDMA")," \u4f86\u8aaa\uff0c\u70ba\u4e86\u8b93\u73fe\u6709\u7684\u61c9\u7528\u7a0b\u5f0f\u80fd\u5920\u7c21\u55ae\u7684\u76f4\u63a5\u8f49\u79fb\u5230 ",(0,a.kt)("strong",{parentName:"li"},"RDMA")," \u7684\u4f7f\u7528\uff0c\u6709\u4e86\u5982 ",(0,a.kt)("strong",{parentName:"li"},"RSocket")," \u6216 ",(0,a.kt)("strong",{parentName:"li"},"SDP")," \u9019\u985e\u8a2d\u8a08\u4f86\u6a21\u64ec\u50b3\u7d71 ",(0,a.kt)("strong",{parentName:"li"},"BSD API")," \u63a5\u53e3\u7684 ",(0,a.kt)("strong",{parentName:"li"},"API"),"\u3002\n\u6839\u64da\u672c\u6587\u4f5c\u8005\u7684\u63cf\u8ff0\uff0c\u9019\u985e\u578b\u7684 ",(0,a.kt)("strong",{parentName:"li"},"API")," \u4e26\u6c92\u6709\u8fa6\u6cd5\u5b8c\u5168\u7684\u4f7f\u7528\u5230 ",(0,a.kt)("strong",{parentName:"li"},"RDMA")," \u7684\u512a\u52e2\uff0c\u9084\u662f\u6709\u4e00\u4e9b\u984d\u5916\u7684\u8ca0\u64d4\u7522\u751f\u4f7f\u5f97\u5c01\u5305\u5ef6\u9072\u6027\u63d0\u9ad8\u3002")),(0,a.kt)("p",null,"\u9664\u4e86\u7db2\u8def\u4e4b\u5916\uff0c\u518d ",(0,a.kt)("strong",{parentName:"p"},"AI"),"\u767c\u5c55\u65b9\u9762\uff0c",(0,a.kt)("strong",{parentName:"p"},"Dataflow")," \u9019\u7a2e\u67b6\u69cb\u5728\u8fd1\u5e74\u7684\u8edf\u9ad4\u4e2d\u53ef\u662f\u84ec\u52c3\u767c\u5c55\u4e26\u88ab\u4f7f\u7528\uff0c\u4e0d\u8ad6\u662f ",(0,a.kt)("strong",{parentName:"p"},"Spark"),", ",(0,a.kt)("strong",{parentName:"p"},"Naiad"),", ",(0,a.kt)("strong",{parentName:"p"},"Hadoop")," \u4ee5\u53ca ",(0,a.kt)("strong",{parentName:"p"},"Tensorflow")," \u9019\u4e9b\u6846\u67b6\u5167\u90fd\u6709 ",(0,a.kt)("strong",{parentName:"p"},"Dataflow")," \u7684\u6982\u5ff5\u5b58\u5728\u3002\n",(0,a.kt)("strong",{parentName:"p"},"Dataflow")," \u672c\u8eab\u662f\u4e00\u500b\u6709\u5411\u7121\u8ff4\u5708\u7684\u5716\uff0c\u5982\u4e0b\u5716\n",(0,a.kt)("img",{parentName:"p",src:"https://i.imgur.com/IYecwlJ.png",alt:null}),"\n\u5176\u4e2d\u6211\u5011\u7a31\u6c92\u6709\u4efb\u4f55\u8f38\u5165\u7684\u9ede\u53eb\u505a ",(0,a.kt)("strong",{parentName:"p"},"Source"),", \u800c\u6c92\u6709\u4efb\u4f55\u8f38\u51fa\u7684\u9ede\u7a31\u70ba ",(0,a.kt)("strong",{parentName:"p"},"Sink")),(0,a.kt)("p",null,"\u5728\u8a72\u5716\u4e2d\uff0c\u6bcf\u4e00\u500b\u7bc0\u9ede\u90fd\u610f\u5473\u8005\u4e00\u500b\u64cd\u4f5c/\u904b\u7b97\uff0c\u800c\u6bcf\u500b\u7bc0\u9ede\u7684\u8f38\u51fa\u90fd\u6703\u662f\u4e0b\u4e00\u500b\u7bc0\u9ede\u7684\u8f38\u5165\uff0c\u6240\u4ee5\u518d\u5206\u6563\u5f0f\u7684\u67b6\u69cb\u4e2d\uff0c\u9019\u4e9b\u5716\u5c31\u6703\u69cb\u5efa\u6210\u6574\u500b\u8cc7\u6599\u50b3\u8f38\u7684\u8def\u5f91\u3002\n\u6839\u64da\u4f5c\u8005\u7684\u89c0\u5bdf\uff0c\u518d\u4e00\u4e9b\u5178\u578b\u7684\u4f7f\u7528\u60c5\u5883\u4e2d\uff0c\u9019\u4e9b\u8f38\u5165/\u8f38\u51fa\u7684\u8cc7\u6599\u90fd\u662f\u4e00\u4e9b\u5927\u578b\u4e14\u4e0d\u6703\u8b8a\u52d5\u7684\u8cc7\u6599\u3002\n\u800c\u4e14\u6839\u64da\u4e0a\u8ff0\u6240\u8a00\uff0c\u9019\u4e9b\u8cc7\u6599\u5728\u7576\u524d\u7684\u7db2\u8def\u61c9\u7528\u7a0b\u5f0f\u8a2d\u8a08\u4e2d\uff0c\u90fd\u6703\u727d\u626f\u5230\u591a\u6b21\u7684\u8907\u88fd\u3002\u800c\u9019\u4e9b\u591a\u6b21\u7684\u8907\u88fd\u884c\u70ba\u5c31\u6703\u7522\u751f\u8ca0\u64d4\uff0c\u5c0d\u65bc\u6574\u500b\u50b3\u8f38\u884c\u70ba\u9020\u6210\u4e0d\u5c0f\u7684\u5f71\u97ff\u3002"),(0,a.kt)("p",null,"\u6240\u4ee5\u662f\u5426\u80fd\u5920\u900f\u904e\u4e0a\u8ff0\u7684\u6280\u8853\uff0c\u900f\u904e ",(0,a.kt)("strong",{parentName:"p"},"Kernel Bypass")," \u6216\u662f ",(0,a.kt)("strong",{parentName:"p"},"Zero Copy")," \u7b49\u6982\u5ff5\u4f86\u89e3\u6c7a\u4e0a\u8ff0\u554f\u984c\uff0c\u4e26\u4e14\u63d0\u5347\u6574\u9ad4\u7684\u50b3\u8f38\u6548\u7387\u5c31\u662f\u672c\u6587\u7684\u60f3\u8981\u89e3\u6c7a\u554f\u984c\u7684\u65b9\u6cd5\u3002"),(0,a.kt)("p",null,"\u5728\u672c\u6587\u4e2d\uff0c\u4f5c\u8005\u4f7f\u7528\u4e86 ",(0,a.kt)("strong",{parentName:"p"},"RDMA")," \u7684\u65b9\u5f0f\u4f86\u5b8c\u6210\u7684",(0,a.kt)("strong",{parentName:"p"},"\u9ede\u5c0d\u9ede"),"\u4e4b\u9593\u7684 ",(0,a.kt)("strong",{parentName:"p"},"Zero Copy"),"\uff0c\u5176\u5be6\u4f5c\u7684\u91cd\u9ede\u5982\u4e0b"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u57fa\u65bc Tensorflow"),(0,a.kt)("li",{parentName:"ol"},"\u8a2d\u8a08\u4e00\u6b3e\u65b0\u7684 ",(0,a.kt)("strong",{parentName:"li"},"Memory Allocator"),"\uff0c\u80fd\u5920\u89e3\u6790\u7576\u524d\u5206\u6563\u5f0f\u67b6\u69cb\u4e2d\u7684\u5716\u8868\u8cc7\u8a0a\uff0c\u4e26\u4e14\u6536\u96c6\u7de9\u885d\u5340\u4f7f\u7528\u7684\u76f8\u95dc\u8cc7\u8a0a\u3002\u85c9\u7531\u9019\u500b\u8fa6\u6cd5\u8207 ",(0,a.kt)("strong",{parentName:"li"},"RDMA")," \u7684\u6574\u5408\uff0c\u79fb\u9664\u7cfb\u7d71\u4e2d\u6c92\u5fc5\u8981\u7684\u8a18\u61b6\u9ad4\u8907\u88fd\u884c\u70ba"),(0,a.kt)("li",{parentName:"ol"},"\u6839\u64da\u6548\u80fd\u8a55\u6e2c (job \u5b8c\u6210\u7684\u6642\u9593)\uff0c\u82e5\u6bd4\u8f03\u5c0d\u8c61\u70ba\u539f\u751f\u57fa\u65bc TCP/IP \u8207 gRPC \u7684 ",(0,a.kt)("strong",{parentName:"li"},"Tensorflow"),"\uff0c\u5176\u6548\u80fd\u80fd\u5920\u63d0\u5347 2.43 \u500d\uff0c\u6240\u6bd4\u8f03\u5c0d\u8c61\u662f ",(0,a.kt)("strong",{parentName:"li"},"YAHOO")," \u6240\u958b\u767c\u7684 ",(0,a.kt)("strong",{parentName:"li"},"Tensorflow"),"\uff0c\u5176\u6548\u80fd\u4e5f\u80fd\u5920\u63d0\u5347 1.21 \u500d\u3002")),(0,a.kt)("h1",{id:"design"},"DESIGN"),(0,a.kt)("h2",{id:"system--library"},"System & Library"),(0,a.kt)("p",null,"\u76ee\u524d\u73fe\u5b58\u7684 ",(0,a.kt)("strong",{parentName:"p"},"dataflow")," \u76f8\u95dc\u61c9\u7528\u7a0b\u5f0f\u518d\u5e95\u5c64\u50b3\u8f38\u8cc7\u6599\u6642\uff0c\u5927\u62b5\u4e0a\u5206\u6210\u5169\u7a2e\u65b9\u5f0f\u50b3\u8f38\uff0c\u4e00\u7a2e\u662f\u63a1\u7528 ",(0,a.kt)("strong",{parentName:"p"},"RPC")," \u7684\u65b9\u5f0f\u53bb\u8a2d\u8a08\u6536\u9001\u7684\u8cc7\u6599\u683c\u5f0f\uff0c\u53e6\u5916\u4e00\u7a2e\u5247\u662f\u57fa\u65bc\u6a94\u6848\u5340\u584a(File Block)\u9032\u884c\u50b3\u8f38\u3002\n\u8209\u4f8b\u4f86\u8aaa\uff0c ",(0,a.kt)("strong",{parentName:"p"},"Tensorflow")," \u4ee5\u53ca\u65e9\u671f\u7248\u672c\u7684 ",(0,a.kt)("strong",{parentName:"p"},"Spark")," \u5c31\u662f\u4f7f\u7528 ",(0,a.kt)("strong",{parentName:"p"},"RPC")," \u7684\u65b9\u5f0f\u9032\u884c\u8de8\u7bc0\u9ede\u7684\u8cc7\u6599\u50b3\u8f38\u3002\u5f8c\u671f\u7248\u672c\u7684 ",(0,a.kt)("strong",{parentName:"p"},"Spark")," \u4ee5\u53ca ",(0,a.kt)("strong",{parentName:"p"},"Hadoop (MapReduces)")," \u5247\u662f\u5c07\u6a94\u6848\u8f38\u51fa\u5230\u672c\u5730\u7684\u6a94\u6848\u7cfb\u7d71\uff0c\u7136\u5f8c\u518d\u5c07\u8a72\u6a94\u6848\u5340\u584a\u50b3\u8f38\u5230\u5176\u4ed6\u7bc0\u9ede\u3002\n\u4f5c\u8005\u8a8d\u70ba\uff0c",(0,a.kt)("strong",{parentName:"p"},"RPC")," \u65bc\u50b3\u8f38\u6709\u8005\u6548\u80fd\u4e0a\u7684\u7f3a\u5931\uff0c\u4e3b\u8981\u6b78\u548e\u65bc ",(0,a.kt)("strong",{parentName:"p"},"RPC")," \u7684\u8acb\u6c42/\u56de\u5fa9(Request/Response) \u672c\u8eab\u4e0d\u4f46\u6709\u5927\u91cf\u7684\u8cc7\u6599\u8907\u88fd\uff0c\u540c\u6642\u4e5f\u6709\u53ef\u80fd\u6709\u52a0\u89e3\u5bc6(Encoding/Decoding)\u3002\n\u9019\u4e9b\u884c\u70ba\u90fd\u6703\u56b4\u91cd\u7684\u6d88\u8017 ",(0,a.kt)("strong",{parentName:"p"},"CPU"),"\u904b\u7b97\uff0c\u4e26\u4e14\u964d\u4f4e\u9ede\u5230\u9ede\u7684\u50b3\u8f38\u901f\u5ea6\u8207\u63d0\u9ad8\u5ef6\u9072\u6027\u3002\n\u81f3\u65bc\u6a94\u6848\u5340\u584a(File Block)\u901a\u5e38\u90fd\u6703\u5c07\u6a94\u6848\u5b58\u5230\u5916\u90e8\u7684\u6a94\u6848\u7cfb\u7d71\uff0c\u5373\u4f7f\u662f ",(0,a.kt)("strong",{parentName:"p"},"RAMFS(Memory Based File System)")," \u4e5f\u662f\u6703\u727d\u626f\u5230\u5f88\u591a\u8cc7\u6599\u8907\u88fd\u7684\u884c\u70ba\u3002"),(0,a.kt)("p",null,"\u4f5c\u8005\u8a8d\u70ba\u4e0a\u8ff0\u7684\u554f\u984c\u4e3b\u8981\u5728\u65bc",(0,a.kt)("strong",{parentName:"p"},"API"),"\u7684\u8a2d\u8a08\u884c\u70ba\uff0c\u6b64\u884c\u70ba\u5c0e\u81f4\u8a08\u7b97(",(0,a.kt)("strong",{parentName:"p"},"computation"),")\u8207\u50b3\u8f38(",(0,a.kt)("strong",{parentName:"p"},"communication"),")\u5169\u500b\u5b50\u7cfb\u7d71\u90fd\u81ea\u884c\u7ba1\u7406\u81ea\u5df1\u7684\u8a18\u61b6\u9ad4\u7a7a\u9593\uff0c\u5f7c\u6b64\u6c92\u6709\u5171\u4eab\u3002\n\u9019\u7a2e\u60c5\u6cc1\u4e0b\u5f88\u96e3\u771f\u6b63\u53bb\u5be6\u73fe\u9ede\u5c0d\u9ede\u7684 ",(0,a.kt)("strong",{parentName:"p"},"Zero Copy")," \u7684\u8cc7\u6599\u50b3\u8f38\uff0c(\u9019\u908a\u4e5f\u547c\u61c9\u524d\u9762\u7684 rSOCKET\u7684\u8a2d\u8a08\u4f9d\u7136\u6703\u6709\u975e\u5fc5\u8981\u7684\u8cc7\u6599\u8907\u88fd\u884c\u70ba)\u3002\n\u4f5c\u8005\u8a8d\u70ba\u5728\u9019\u7a2e\u67b6\u69cb\u4e0b\uff0c\u4e0d\u8ad6\u9019\u5169\u500b\u5b50\u7cfb\u7d71\u90fd\u8a2d\u8a08\u4e86\u591a\u826f\u597d\u7684\u7de9\u885d\u5340\u7ba1\u7406(Buffer Management)\uff0c\u90fd\u81f3\u5c11\u6703\u6709\u4e00\u6b21\u7684\u8cc7\u6599\u8907\u88fd\u884c\u70ba\u3002\n\u8209\u4f8b\u4f86\u8aaa\uff0c\u5047\u5982\u6211\u5011\u63a1\u7528\u4e86\u6700\u5ee3\u70ba\u6d41\u884c\u7684 ",(0,a.kt)("strong",{parentName:"p"},"TCP/IP")," \u7cfb\u7d71\uff0c\u5728 ",(0,a.kt)("strong",{parentName:"p"},"Linux Kernel")," \u5167\u90e8\u6703\u63a1\u7528 ",(0,a.kt)("strong",{parentName:"p"},"sk_buff")," \u7684\u7d50\u69cb\u4f86\u5132\u5b58\u7db2\u8def\u5c01\u5305\uff0c\u800c\u4e14\u5728\u5e95\u5c64\u5927\u90e8\u5206\u91dd\u5c0d\u7db2\u8def\u5c01\u5305\u64cd\u4f5c\u7684\u884c\u70ba\u90fd\u662f\u57fa\u65bc\u6307\u6a19\u53bb\u64cd\u4f5c\uff0c\u96d6\u7136\u9019\u985e\u770b\u8d77\u4f86\u90fd\u662f\u6307\u6a19\u64cd\u4f5c\u7684\u884c\u70ba\u7684\u78ba\u907f\u514d\u4e86\u4efb\u4f55\u8cc7\u6599\u8907\u88fd\u7684\u52d5\u4f5c\u3002\n\u4f46\u662f\u8cc7\u6599\u8981\u5f9e ",(0,a.kt)("strong",{parentName:"p"},"User Space")," \u8f49\u9001\u5230 ",(0,a.kt)("strong",{parentName:"p"},"Kernel Space")," \u9084\u662f\u9700\u8981\u7d93\u904e\u4e00\u6b21\u7684\u8f49\u63db\u3002\n\u9019\u985e\u578b\u7684\u554f\u984c\u4e0d\u8ad6\u662f\u5728\u5404\u7a2e ",(0,a.kt)("strong",{parentName:"p"},"RPC")," \u6216\u662f \u51fd\u5f0f\u5eab(",(0,a.kt)("strong",{parentName:"p"},"Library"),")\u5167\u90fd\u6709\u51fa\u73fe\u3002"),(0,a.kt)("h2",{id:"dataflow"},"Dataflow"),(0,a.kt)("p",null,"\u5c0d\u65bc ",(0,a.kt)("strong",{parentName:"p"},"Dataflow")," \u4f86\u8aaa\uff0c\u4f5c\u8005\u8a8d\u70ba\u82e5\u5728\u9ad8\u901f\u7db2\u8def\u74b0\u5883\u4e2d\u540c\u6642\u6eff\u8db3\u4e0b\u5217\u5169\u7a2e\u60c5\u5f62\uff0c\u5247\u8a18\u61b6\u9ad4\u8907\u88fd\u5c31\u6709\u6a5f\u6703\u662f\u6574\u9ad4\u7684\u6548\u80fd\u74f6\u9838\u3002"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u4f5c\u8005\u8a8d\u70ba\u82e5\u61c9\u7528\u7a0b\u5f0f\u7684\u7de9\u885d\u5340\u592a\u5927\uff0c\u6c92\u6709\u8fa6\u6cd5\u7b26\u5408\u7576\u524d\u7cfb\u7d71\u67b6\u69cb\u4e0a\u7684 ",(0,a.kt)("strong",{parentName:"li"},"L1/L2/L3")," \u5feb\u53d6\u3002"),(0,a.kt)("li",{parentName:"ol"},"\u5f88\u5c11\u6709\u55ae\u4e00\u61c9\u7528\u7a0b\u5f0f\u6709\u8fa6\u6cd5\u628a\u6574\u500b\u7db2\u8def\u74b0\u5883\u4e2d\u7684\u983b\u5bec\u90fd\u5403\u6eff\uff0c\u9020\u6210\u58c5\u585e\u3002")),(0,a.kt)("p",null,"\u9996\u5148\uff0c\u91dd\u5c0d\u7b2c\u4e00\u500b\u60c5\u5f62\u4f86\u8aaa\uff0c\u6211\u5011\u8981\u5148\u63a2\u8a0e\u8907\u88fd\u5927\u6a94\u6848\u8ddf\u8907\u88fd\u5f88\u591a\u5c0f\u6a94\u6848\u7684\u5dee\u8ddd\u3002\n\u4f5c\u8005\u8a8d\u70ba\u7576\u7d93\u904e\u4e00\u4e9b\u904b\u7b97\u6642\u5019\uff0c\u5f8c\u8005(\u5f88\u591a\u5c0f\u6a94\u6848)\u6703\u66f4\u6709\u6a5f\u6703\u7559\u5728\u5feb\u53d6\u4e2d\u7e7c\u7e8c\u4f7f\u7528\uff0c\u800c\u5927\u6a94\u6848\u5f88\u5bb9\u6613\u5c31\u6703\u767c\u751f ",(0,a.kt)("strong",{parentName:"p"},"Cache-Miss"),"\u7684\u4e8b\u4ef6\u800c\u6700\u7d42\u8981\u5f9e ",(0,a.kt)("strong",{parentName:"p"},"Memory")," \u4e2d\u8b80\u53d6\u3002\n\u4f5c\u8005\u4e5f\u63d0\u5230\uff0c\u5c0d\u5f88\u591a ",(0,a.kt)("strong",{parentName:"p"},"RDMA")," \u76f8\u95dc\u7684\u61c9\u7528\u7a0b\u5f0f(\u8b6c\u5982 ",(0,a.kt)("strong",{parentName:"p"},"FaSST")," )\u4f86\u8aaa\uff0c\u91dd\u5c0d\u5c0f\u6a94\u6848\u7684\u6a94\u6848\u8907\u88fd\uff0c\u6703\u7279\u5225\u8655\u7406\u3002\u8a72\u61c9\u7528\u7a0b\u5f0f\u5167\u6703\u7279\u5225\u6e96\u5099\u4e00\u584a\u7a7a\u9593\u4f86\u8655\u7406\u9019\u4e9b\u5c0f\u6a94\u6848\u7684\u8907\u88fd\uff0c\u800c\u9019\u584a\u7a7a\u9593\u662f\u500b ",(0,a.kt)("strong",{parentName:"p"},"page-locked")," \u7684\u8a18\u61b6\u9ad4\u7a7a\u9593\u3002\u85c9\u7531\u9019\u500b\u884c\u70ba\u6e1b\u5c11\u6bcf\u6b21\u5c0d\u65bc\u5c0f\u6a94\u6848\u90fd\u8981\u53bb\u9032\u884c\u6240\u8b02\u7684 ",(0,a.kt)("strong",{parentName:"p"},"pinning memroy"),"(\u5f9e\u865b\u64ec\u8a18\u61b6\u9ad4\u7a7a\u9593\u6620\u5c04\u5230\u5be6\u969b\u8a18\u61b6\u9ad4\u7a7a\u9593)\u7522\u751f\u7684\u6d88\u8017\u3002\n\u63a5\u4e0b\u4f86\u63a2\u8a0e\u7b2c\u4e8c\u500b\u60c5\u5f62\uff0c\u6709\u4e00\u4e9b\u61c9\u7528\u7a0b\u5f0f(\u8b6c\u5982 ",(0,a.kt)("strong",{parentName:"p"},"KV")," )\u662f\u7279\u5225\u95dc\u6ce8\u5728\u5c01\u5305\u5ef6\u9072\u6027\u65b9\u9762\u7684\uff0c\u9019\u7a2e\u61c9\u7528\u7a0b\u5f0f\u901a\u5e38\u90fd\u4e0d\u6703\u6d88\u8017\u6574\u500b\u7db2\u8def\u983b\u5bec\uff0c\u5176\u8981\u6c42\u7684\u9ede\u90fd\u662f\u5728\u65bc",(0,a.kt)("strong",{parentName:"p"},"\u6bcf\u79d2\u80fd\u5920\u8655\u7406\u591a\u5c11\u5c01\u5305"),"\uff0c\u800c\u5927\u90e8\u5206\u60c5\u6cc1\u4e0b\uff0c",(0,a.kt)("strong",{parentName:"p"},"Key"),"/",(0,a.kt)("strong",{parentName:"p"},"Value"),"\u9019\u4e9b\u8cc7\u6599\u90fd\u662f\u5c0f\u5c01\u5305\uff0c\u5927\u6982\u662f\u6578",(0,a.kt)("strong",{parentName:"p"},"KB"),"\u5de6\u53f3\u3002\n\u6b64\u5916\uff0c\u4f5c\u8005\u9084\u63d0\u4f9b\u4e86\u4e00\u500b\u6578\u64da\u4f86\u5f37\u8abf\u9019\u500b\u60c5\u6cc1\u3002\n\u7576\u50b3\u8f38\u7684\u7de9\u885d\u5340\u5927\u5c0f\u662f ",(0,a.kt)("strong",{parentName:"p"},"4KB")," \u5de6\u53f3\u7684\uff0c\u9019\u6642\u5019\u5927\u6982\u50b3\u8f38\u53ef\u4ee5\u9054\u5230 ",(0,a.kt)("strong",{parentName:"p"},"20-30 GB/s"),"\uff0c\u800c\u82e5\u7de9\u885d\u5340\u7684\u5927\u5c0f\u662f\u8d85\u904e ",(0,a.kt)("strong",{parentName:"p"},"4MB")," \u6642\uff0c\u9019\u6642\u5019\u7684\u50b3\u8f38\u53ea\u5269\u4e0b ",(0,a.kt)("strong",{parentName:"p"},"2-4 GB/s"),",\u4e3b\u8981\u662f\u7de9\u885d\u5340\u592a\u5927\u7684\u6642\u5019\uff0c\u9019\u4e9b\u5c01\u5305\u90fd\u6c92\u6709\u8fa6\u6cd5\u7b26\u5408\u5feb\u53d6\u7684\u5927\u5c0f\uff0c\u5c0e\u81f4\u5927\u91cf\u8907\u88fd\u884c\u70ba\u6700\u7d42\u4f7f\u5f97\u50b3\u8f38\u901f\u5ea6\u4e0b\u964d\u3002\n\u6240\u4ee5\u7d50\u8ad6\u4e00\u4e0b\uff0c\u53ea\u8981\u7576\u7de9\u7a97\u5340\u7684\u5927\u5c0f\u904e\u5927\u7684\u6642\u5019\uff0c\u9019\u6642\u5019\u5f88\u5bb9\u6613\u56e0\u70ba ",(0,a.kt)("strong",{parentName:"p"},"Cache Miss"),"\u800c\u7522\u751f\u5404\u7a2e\u8907\u88fd\u7684\u884c\u70ba\uff0c\u800c\u9019\u4e9b\u8907\u88fd\u884c\u70ba\u5c31\u6703\u5c0e\u81f4\u6574\u9ad4\u6548\u80fd\u4e0b\u964d\u3002"),(0,a.kt)("p",null,"\u70ba\u4e86\u89e3\u6c7a\u9019\u500b\u554f\u984c\uff0c\u4f5c\u8005\u63d0\u51fa\u4e86\u4e00\u500b ",(0,a.kt)("strong",{parentName:"p"},"Unified Memory Alloccator")," \u7684\u6a5f\u5236\uff0c\u9019\u500b\u6a5f\u5236\u6703\u53bb\u540c\u6642\u63a7\u7ba1\u8a08\u7b97(",(0,a.kt)("strong",{parentName:"p"},"computation"),")\u8207\u50b3\u8f38(",(0,a.kt)("strong",{parentName:"p"},"communication"),")\u5169\u500b\u5b50\u7cfb\u7d71\u5167\u7684\u7de9\u885d\u5340\u914d\u7f6e\u3002\n\u9019\u500b\u6a5f\u5236\u6709\u5169\u5927\u91cd\u9ede"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u5be6\u4f5c\u4e0d\u540c\u985e\u578b\u7684\u8a18\u61b6\u9ad4\u914d\u7f6e\uff0c\u8b6c\u5982\u7576\u524d\u8a18\u61b6\u9ad4\u662f\u8981\u7d66 ",(0,a.kt)("strong",{parentName:"li"},"RDMA")," \u4f7f\u7528\uff0c\u9084\u662f\u7576\u524d\u672c\u7cfb\u7d71\u7684 ",(0,a.kt)("strong",{parentName:"li"},"DMA"),"\u3002"),(0,a.kt)("li",{parentName:"ol"},"\u89e3\u6790 ",(0,a.kt)("strong",{parentName:"li"},"dataflow graph")," \u4e2d\u7684\u8cc7\u8a0a\u4f86\u6c7a\u5b9a\u7576\u524d\u7bc0\u9ede\u7684\u8cc7\u6599\u662f\u8981\u4f7f\u7528\u4f55\u7a2e\u8a18\u61b6\u9ad4\u914d\u7f6e\u3002")),(0,a.kt)("p",null,"\u6b64\u5916\uff0c\u4e0d\u8ad6\u662f ",(0,a.kt)("strong",{parentName:"p"},"RDMA")," \u6216\u662f ",(0,a.kt)("strong",{parentName:"p"},"DMA")," \u6240\u7522\u751f\u7684\u7de9\u885d\u5340\u90fd\u6703\u540c\u6642\u5728\u8a08\u7b97(",(0,a.kt)("strong",{parentName:"p"},"computation"),")\u8207\u50b3\u8f38(",(0,a.kt)("strong",{parentName:"p"},"communication"),")\u5169\u500b\u5b50\u7cfb\u7d71\u5167\u5171\u540c\u4f7f\u7528\uff0c\u76f4\u5230\u5169\u500b\u7cfb\u7d71\u90fd\u4e0d\u518d\u4f7f\u7528\u8a72\u7a7a\u9593\u6642\uff0c\u624d\u6703\u5c07\u8a72\u7a7a\u9593\u7d66\u91cb\u653e\u51fa\u4f86\u3002"),(0,a.kt)("p",null,"\u6240\u4ee5\u770b\u5230\u9019\u908a\u53ef\u4ee5\u5927\u6982\u60f3\u50cf\u4e00\u4e0b\u4f5c\u8005\u5230\u5e95\u8981\u600e\u9ebc\u505a\u4e86\u3002\n\u5206\u6790\u6574\u500b ",(0,a.kt)("strong",{parentName:"p"},"dataflow graph")," \u4e2d\u7684\u8cc7\u6599\u8d70\u5411\uff0c\u76e1\u53ef\u80fd\u7684\u8b93\u76f8\u540c\u4f7f\u7528\u7684\u8cc7\u6599\u53ea\u8981\u4f7f\u7528\u4e00\u4efd\u7de9\u885d\u5340\u7a7a\u9593\u5373\u53ef\uff0c\u7136\u5f8c\u900f\u904e ",(0,a.kt)("strong",{parentName:"p"},"RDMA")," \u6216\u662f ",(0,a.kt)("strong",{parentName:"p"},"DMA")," \u7b49\u6280\u8853\u4f86\u50b3\u905e\u8cc7\u6599\uff0c\u6e1b\u5c11\u6574\u500b\u904e\u7a0b\u4e2d\u7684\u8cc7\u6599\u8907\u88fd\u884c\u70ba\u3002"),(0,a.kt)("h1",{id:"implementation"},"IMPLEMENTATION"),(0,a.kt)("p",null,"\u4f5c\u8005\u63a1\u7528\u7684 ",(0,a.kt)("strong",{parentName:"p"},"dataflow")," \u662f\u57fa\u65bc ",(0,a.kt)("strong",{parentName:"p"},"tensorflow"),"\uff0c\u56e0\u6b64\u8a72 ",(0,a.kt)("strong",{parentName:"p"},"Unified Memory Alloccator")," \u672c\u8eab\u4e5f\u662f\u5be6\u4f5c\u5728 ",(0,a.kt)("strong",{parentName:"p"},"tensorflow")," \u88e1\u9762\uff0c\u53ef\u4ee5\u76f4\u63a5\u5230",(0,a.kt)("a",{parentName:"p",href:"https://github.com/tensorflow/tensorflow/pull/11392"},"\u4e0b\u5217\u4f4d\u7f6e"),"\u89c0\u770b\u4f5c\u8005\u8207 ",(0,a.kt)("strong",{parentName:"p"},"tenforflow")," \u7dad\u8b77\u8005\u7684\u6e9d\u901a\u4ee5\u53ca\u7a0b\u5f0f\u78bc\u7684\u4fee\u6539\u3002\n\u4f5c\u8005\u65b0\u589e\u4e86\u4e00\u7a2e ",(0,a.kt)("strong",{parentName:"p"},"memory allocator")," \u5230\u6574\u9ad4\u7684\u7a0b\u5f0f\u78bc\u5167\uff0c\u8981\u4f7f\u7528\u6642\u53ea\u8981\u6253\u958b\u76f8\u95dc\u9078\u9805\u5373\u53ef(\u524d\u63d0\u662f\u8981\u5148\u91dd\u5c0d\u6709 ",(0,a.kt)("strong",{parentName:"p"},"RDMA")," \u91cd\u65b0\u7de8\u8b6f\u6574\u500b\u5c08\u6848)\u3002"),(0,a.kt)("p",null,"\u5728\u4f5c\u8005\u7684\u5be6\u4f5c\u7684\u8a18\u61b6\u9ad4\u5206\u914d\u5668\u4e2d\uff0c\u6703\u81ea\u52d5\u7684\u53bb\u89e3\u6790 ",(0,a.kt)("strong",{parentName:"p"},"tensorflow")," \u7684 ",(0,a.kt)("strong",{parentName:"p"},"computational grpah")," \u4ee5\u53ca ",(0,a.kt)("strong",{parentName:"p"},"distributed graph partition"),"\uff0c\u6240\u4ee5\u53ea\u6709\u6eff\u8db3\u4e0b\u5217\u5169\u7a2e\u689d\u4ef6\u7684\u5f35\u91cf ",(0,a.kt)("strong",{parentName:"p"},"tensor")," \u624d\u6703\u53bb\u8a72\u8a18\u61b6\u9ad4\u5206\u914d\u5668\u4e2d\u88ab\u9078\u64c7\u4f7f\u7528 ",(0,a.kt)("strong",{parentName:"p"},"RDMA"),"\u3002"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5fc5\u9808\u662fsource node(\u51fa\u767c\u7aef\u9ede) \u6216\u662f sink node(\u7d50\u5c3e\u7aef\u9ede)"),(0,a.kt)("li",{parentName:"ul"},"\u8a72\u64cd\u4f5c\u5fc5\u9808\u662f send/receive \u540c\u6642\u8981\u8de8\u5be6\u9ad4\u6a5f\u5668\n\u9019\u4e5f\u5f88\u5408\u7406\uff0c\u56e0\u70ba\u8de8\u6a5f\u5668\u9593\u7684\u50b3\u8f38\u6703\u7528\u5230\u7db2\u8def\uff0c\u6240\u4ee5\u624d\u6703\u9700\u8981\u7528\u5230 ",(0,a.kt)("strong",{parentName:"li"},"RDMA")," \u4f86\u50b3\u8f38\u8cc7\u6599\u3002")),(0,a.kt)("p",null,"\u5728\u6700\u539f\u59cb\u7684 ",(0,a.kt)("strong",{parentName:"p"},"TenforFlow")," \u7684\u7248\u672c\u4e2d\uff0c\u4f7f\u7528\u4e86\u57fa\u65bc ",(0,a.kt)("strong",{parentName:"p"},"HTTP/2")," \u7684 ",(0,a.kt)("strong",{parentName:"p"},"gRPC")," \u683c\u5f0f\u4f5c\u70ba ",(0,a.kt)("strong",{parentName:"p"},"Tensor")," \u9593\u7684\u50b3\u8f38\u3002\u800c\u4f5c\u8005\u4fee\u6539\u4e86\u9019\u908a\u7684\u7a0b\u5f0f\u78bc\uff0c\u4f7f\u5f97\u9019\u908a\u6703\u76f4\u63a5\u8df3\u904e ",(0,a.kt)("strong",{parentName:"p"},"RPC")," \u7684\u547c\u53eb\uff0c\u6539\u4f7f\u7528 ",(0,a.kt)("strong",{parentName:"p"},"RDMA")," \u4f86\u50b3\u8f38\u8cc7\u6599\u3002\n\u6b64\u5916\uff0c\u70ba\u4e86\u5b8c\u6574\u652f\u63f4\u80fd\u5920\u900f\u904e ",(0,a.kt)("strong",{parentName:"p"},"RDMA")," \u4f86\u4f7f\u7528\u672c\u5730\u7aef\u6216\u662f\u9060\u7aef\u7684 ",(0,a.kt)("strong",{parentName:"p"},"GPU")," \u8cc7\u6e90\uff0c\u4f5c\u8005\u9084\u4f7f\u7528\u4e86 ",(0,a.kt)("strong",{parentName:"p"},"GPU direct RDMA")," \u7684\u6280\u8853\u4f86\u5b8c\u6210\u9019\u4e9b\u4e8b\u60c5\u3002\u85c9\u7531\u9019\u500b\u6280\u8853\u4efb\u4f55 ",(0,a.kt)("strong",{parentName:"p"},"PCI-e")," \u7684\u7b2c\u4e09\u65b9\u88dd\u7f6e(\u8b6c\u5982 ",(0,a.kt)("strong",{parentName:"p"},"NIC")," )\u90fd\u53ef\u4ee5\u76f4\u63a5\u8b80\u53d6 ",(0,a.kt)("strong",{parentName:"p"},"GPU")," \u4e0a\u9762\u7684\u8a18\u61b6\u9ad4\u7a7a\u9593\u3002\n\u6b64\u5916\u4f5c\u8005\u4e5f\u89c0\u5bdf\u5230\u7576 ",(0,a.kt)("strong",{parentName:"p"},"GPU direct RDMA")," \u7684\u8def\u5f91\u6703\u7d93\u904e ",(0,a.kt)("strong",{parentName:"p"},"CPU-socket")," (\u8b6c\u5982\u8655\u65bc\u4e0d\u540c\u7684 ",(0,a.kt)("strong",{parentName:"p"},"NUMA NODE"),") \u6703\u767c\u751f\u56b4\u91cd\u7684\u6548\u80fd\u554f\u984c\u3002\n\u56e0\u70ba\u5728\u9019\u7a2e\u60c5\u6cc1\u4e0b\uff0c\u9019\u4e9b\u8cc7\u6599\u6703\u5148\u88ab\u9001\u5230\u8a18\u61b6\u9ad4\u5167\uff0c\u7136\u5f8c\u5728\u88ab\u8907\u88fd\u51fa\u4f86\uff0c\u6700\u5f8c\u624d\u6703\u771f\u6b63\u7684\u9001\u5230 ",(0,a.kt)("strong",{parentName:"p"},"NIC")," \u6216\u662f ",(0,a.kt)("strong",{parentName:"p"},"GPU")," \u4e0a\u53bb\u8655\u7406\uff0c\u5c0e\u81f4\u4e86\u4e0d\u5fc5\u8981\u7684\u6d88\u8017\u3002"),(0,a.kt)("p",null,"\u7c21\u55ae\u4f86\u8aaa\uff0c\u4f5c\u8005\u900f\u904e\u5206\u6790\u7136\u5f8c\u6c7a\u5b9a\u90a3\u4e9b\u8a18\u61b6\u9ad4\u7a7a\u9593\u8981\u5171\u7528\uff0c\u90a3\u4e9b\u7528",(0,a.kt)("strong",{parentName:"p"},"DMA"),"\uff0c\u90a3\u4e9b\u7528",(0,a.kt)("strong",{parentName:"p"},"RDMA"),"\uff0c\u540c\u6642\u900f\u904e ",(0,a.kt)("strong",{parentName:"p"},"GPU direct RDMA")," \u7684\u6280\u8853\u76f4\u63a5\u5b58\u53d6\u9060\u65b9\u6a5f\u5668\u4e0a\u9762 ",(0,a.kt)("strong",{parentName:"p"},"GPU")," \u7684\u8a18\u61b6\u9ad4\uff0c\u85c9\u6b64\u964d\u4f4e\u5927\u91cf\u7684\u8cc7\u6599\u8907\u88fd\u884c\u70ba\u3002"),(0,a.kt)("h1",{id:"evaluation"},"EVALUATION"),(0,a.kt)("h3",{id:"environment-hardware"},"Environment (Hardware)"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"4 servers \u90fd\u9023\u63a5\u4e0a Mellanox MSN2100-BB2F 40Gbe RoCE Switch (For RDMA)"),(0,a.kt)("li",{parentName:"ol"},"\u6bcf\u500b server \u90fd\u914d\u7f6e\u4e0b\u5217\u786c\u9ad4",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Mellanox MT27500 40GbE NIC"),(0,a.kt)("li",{parentName:"ul"},"Dual6-core Intel Xeon E5-2603v4 CPU"),(0,a.kt)("li",{parentName:"ul"},"4 NVidia Tesla K40m GPUs"),(0,a.kt)("li",{parentName:"ul"},"256 GB DDR4-2400MHz"))),(0,a.kt)("li",{parentName:"ol"},"Switch \u672c\u8eab\u6709\u914d\u7f6e ",(0,a.kt)("strong",{parentName:"li"},"PFC")," \u4f86\u63a7\u7ba1\u50b3\u8f38\u6d41\u91cf\u964d\u4f4e\u5c01\u5305\u6389\u843d\u6a5f\u7387")),(0,a.kt)("h3",{id:"environment-software"},"Environment (Software)"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u4f5c\u8005\u8a13\u7df4\u4e86\u5206\u6563\u5f0f\u7248\u672c\u7684 ",(0,a.kt)("strong",{parentName:"li"},"VGG16")," CNN \u6a21\u578b\u3002"),(0,a.kt)("li",{parentName:"ol"},"\u6a21\u7d44\u7684\u53c3\u6578\u5927\u5c0f\u662f 528 MB"),(0,a.kt)("li",{parentName:"ol"},"\u63a1\u7528\u4e86 ",(0,a.kt)("strong",{parentName:"li"},"synchronous")," \u6a21\u5f0f")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"parameter servers")," \u7684\u6578\u91cf\u8ddf ",(0,a.kt)("strong",{parentName:"p"},"Workers")," \u7684\u6578\u91cf\u4e00\u81f3\uff0c\u540c\u6642\n\u91dd\u5c0d\u6bcf\u4e00\u53f0\u6a5f\u5668\u4e0a\u9762\u7684 ",(0,a.kt)("strong",{parentName:"p"},"Worker")," \u90fd\u6703\u540c\u6642\u4f7f\u7528 ",(0,a.kt)("strong",{parentName:"p"},"CPU")," \u8207 ",(0,a.kt)("strong",{parentName:"p"},"GPU")," \u4f86\u9032\u884c\u904b\u7b97\uff0c\u800c ",(0,a.kt)("strong",{parentName:"p"},"parameter server (PS)")," \u5247\u53ea\u6703\u4f7f\u7528 ",(0,a.kt)("strong",{parentName:"p"},"CPU")," \u914d\u4e0a\u7cfb\u7d71\u4e0a\u7684\u8a18\u61b6\u9ad4\u4f86\u6536\u96c6\u8cc7\u8a0a\u3002"),(0,a.kt)("h3",{id:"target"},"Target"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u4f5c\u8005\u4fee\u6539\u5f8c\u7684 ",(0,a.kt)("strong",{parentName:"li"},"TensorFlow")),(0,a.kt)("li",{parentName:"ol"},"\u5b98\u65b9\u672a\u4fee\u6539\u7684 ",(0,a.kt)("strong",{parentName:"li"},"TensorFlow"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"v1.2.1"))),(0,a.kt)("li",{parentName:"ol"},"Yahoo \u81ea\u884c\u4fee\u6539\u5f8c\u7684 ",(0,a.kt)("strong",{parentName:"li"},"TensorFlow"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\u4e5f\u652f\u63f4 RDMA\uff0c\u4f46\u662f\u6a5f\u5236\u6c92\u6709\u4f5c\u8005\u5b8c\u5584\uff0c\u9084\u662f\u6709\u4e0d\u5c11\u7684\u8907\u88fd\u884c\u70ba")))),(0,a.kt)("h3",{id:"metric"},"Metric"),(0,a.kt)("p",null,"\u4f5c\u8005\u60f3\u89c0\u5bdf\u7684\u662f\u5b8c\u6210\u8a13\u7df4\u6240\u6d88\u8017\u7684\u6642\u9593\uff0c"),(0,a.kt)("h3",{id:"result"},"Result"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u6bd4\u8f03\u7684\u7d50\u679c\u4f86\u770b\uff0c(1) \u6bd4 (2) \u5feb\u4e0a\u4e86 ",(0,a.kt)("strong",{parentName:"li"},"2.43")," \u500d, \u800c (1) \u6bd4 (3) \u5feb\u4e0a\u4e86 ",(0,a.kt)("strong",{parentName:"li"},"1.21")," \u500d"),(0,a.kt)("li",{parentName:"ol"},"16\u9846 ",(0,a.kt)("strong",{parentName:"li"},"GPU")," \u8207 1\u9846 ",(0,a.kt)("strong",{parentName:"li"},"GPU")," \u7684\u6bd4\u8f03\u8d77\u4f86\uff0c\u6548\u80fd\u63d0\u5347\u4e86 ",(0,a.kt)("strong",{parentName:"li"},"13.8"),"\u500d")),(0,a.kt)("h1",{id:"summary"},"Summary"),(0,a.kt)("p",null,"\u4f5c\u8005\u89c0\u5bdf\u5230\u5728 ",(0,a.kt)("strong",{parentName:"p"},"dataflow")," \u4e2d\u4e4b\u9593\u7684\u50b3\u8f38\u5927\u5c0f\u4e0d\u5c0f\uff0c\u540c\u6642\u9019\u4e9b\u8cc7\u6599\u6703\u5728\u7cfb\u7d71\u4e2d\u6709\u5927\u91cf\u7684\u8cc7\u6599\u8907\u88fd\u884c\u70ba\uff0c\u56e0\u6b64\u5f15\u9032\u4e86 ",(0,a.kt)("strong",{parentName:"p"},"DMA"),"\uff0c",(0,a.kt)("strong",{parentName:"p"},"RDMA")," \u4ee5\u53ca ",(0,a.kt)("strong",{parentName:"p"},"GPU direct RDMA")," \u7b49\u6280\u8853\u4f86\u6e1b\u5c11\u6574\u9ad4\u7684\u8cc7\u6599\u8907\u88fd\u884c\u70ba\uff0c\u4e26\u4e14\u4e5f\u5c07\u6574\u9ad4\u7684\u7a0b\u5f0f\u78bc\u5b8c\u5168\u8ca2\u737b\u56de ",(0,a.kt)("strong",{parentName:"p"},"TensorFlow")," \u5167\uff0c\u672a\u4f86\u4efb\u4f55\u4eba\u60f3\u8981\u5617\u8a66\u9019\u500b\u6a5f\u5236\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u3002"))}g.isMDXComponent=!0}}]);
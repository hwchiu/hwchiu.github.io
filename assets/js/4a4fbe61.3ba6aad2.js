"use strict";(self.webpackChunkhwchiu=self.webpackChunkhwchiu||[]).push([[34004],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>g});var r=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var c=r.createContext({}),s=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=s(e.components);return r.createElement(c.Provider,{value:n},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},u=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=s(t),u=a,g=m["".concat(c,".").concat(u)]||m[u]||d[u]||i;return t?r.createElement(g,o(o({ref:n},p),{},{components:t})):r.createElement(g,o({ref:n},p))}));function g(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=u;var l={};for(var c in n)hasOwnProperty.call(n,c)&&(l[c]=n[c]);l.originalType=e,l[m]="string"==typeof e?e:a,o[1]=l;for(var s=2;s<i;s++)o[s]=t[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},25638:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var r=t(87462),a=(t(67294),t(3905));const i={title:"\u81ea\u67b6 Registry \u8207 Kubernetes \u7684\u6574\u5408",sidebar_position:22,tags:["iThome","DevOps","Kubernetes"],description:"iThome-2020 \u7cfb\u5217\u6587\u7ae0",date:new Date("2021-01-10T21:51:49.000Z")},o=void 0,l={unversionedId:"2020/iThome_Challenge/cicd-22",id:"2020/iThome_Challenge/cicd-22",title:"\u81ea\u67b6 Registry \u8207 Kubernetes \u7684\u6574\u5408",description:"iThome-2020 \u7cfb\u5217\u6587\u7ae0",source:"@site/docs/2020/iThome_Challenge/cicd-22.md",sourceDirName:"2020/iThome_Challenge",slug:"/2020/iThome_Challenge/cicd-22",permalink:"/docs/2020/iThome_Challenge/cicd-22",draft:!1,tags:[{label:"iThome",permalink:"/docs/tags/i-thome"},{label:"DevOps",permalink:"/docs/tags/dev-ops"},{label:"Kubernetes",permalink:"/docs/tags/kubernetes"}],version:"current",lastUpdatedBy:"HungWei Chiu",sidebarPosition:22,frontMatter:{title:"\u81ea\u67b6 Registry \u8207 Kubernetes \u7684\u6574\u5408",sidebar_position:22,tags:["iThome","DevOps","Kubernetes"],description:"iThome-2020 \u7cfb\u5217\u6587\u7ae0",date:"2021-01-10T21:51:49.000Z"},sidebar:"techPost",previous:{title:"\u81ea\u67b6 Registry - Harbor",permalink:"/docs/2020/iThome_Challenge/cicd-21"},next:{title:"Secret \u7684\u90e8\u7f72\u554f\u984c\u8207\u53c3\u8003\u89e3\u6cd5(\u4e0a)",permalink:"/docs/2020/iThome_Challenge/cicd-23"}},c={},s=[],p={toc:s},m="wrapper";function d(e){let{components:n,...t}=e;return(0,a.kt)(m,(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"\u4e0a\u7bc7\u8b1b\u8ff0\u4e86\u5982\u4f55\u900f\u904e Harbor \u4f86\u67b6\u8a2d\u5c6c\u65bc\u81ea\u5df1\u7684 Container Registry\uff0c\u800c\u672c\u7bc7\u6211\u5011\u5c31\u8981\u5c07\u5176\u8207\u4e4b\u524d\u90e8\u7f72\u7684 Kubernetes \u6574\u5408"),(0,a.kt)("p",null,"\u57fa\u672c\u4e0a\u5b98\u65b9\u6587\u4ef6 ",(0,a.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/"},"Pulling Image Private Registry")," \u6709\u6e05\u695a\u7684\u63cf\u8ff0\u8981\u57f7\u884c\u54ea\u4e9b\u6b65\u9a5f\uff0c\u56e0\u6b64\u672c\u7bc7\u6587\u7ae0\u5c31\u4f86\u5c07\u9019\u4e9b\u6b65\u9a5f\u8a73\u7d30\u7684\u8dd1\u4e00\u6b21"),(0,a.kt)("p",null,"\u4f46\u662f\u9019\u908a\u8981\u6ce8\u610f\u7684\uff0c\u5982\u679c\u4f60\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"Container Registry")," \u4f7f\u7528\u7684\u662f\u81ea\u7c3d\u7684\u6191\u8b49\uff0c\u751a\u81f3\u662f\u6839\u672c\u6c92\u6709 HTTPS \u4fdd\u8b77\uff0c\u90a3\u6574\u500b\u6b65\u9a5f\u6703\u8b8a\u5f97\u975e\u5e38\u9ebb\u7169\u3002"),(0,a.kt)("p",null,"\u5047\u8a2d\u4f60\u7684 Kubernetes \u53e2\u96c6\u9810\u8a2d\u4f7f\u7528\u7684\u90fd\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"docker container")," \u4f5c\u70ba\u4f60\u7684\u5bb9\u5668\u89e3\u6c7a\u65b9\u6848\uff0c\u4f60\u5fc5\u9808\u8981\u8b93\u4f60\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"dockerd")," \u4fe1\u8cf4\u9019\u4e9b ",(0,a.kt)("inlineCode",{parentName:"p"},"\u4e0d\u77e5\u9053\u80fd\u4e0d")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"\u80fd\u4fe1\u8cf4\u7684 container registry"),"\u3002 docker \u5b98\u65b9\u4e5f\u6709\u9801\u9762 ",(0,a.kt)("a",{parentName:"p",href:"https://docs.docker.com/registry/insecure/#use-self-signed-certificates"},"use-self-signed-certificates")," \u5c08\u9580\u4ecb\u7d39\u8981\u5982\u4f55\u8b93\u4f60\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"dockerd")," \u53bb\u8655\u7406\u9019\u4e9b\u52d5\u4f5c\u3002"),(0,a.kt)("p",null,"\u5982\u679c\u4eca\u5929\u53ea\u6709\u4e00\u53f0\u6a5f\u5668\u7684\u8a71\uff0c\u9019\u4e9b\u6b65\u9a5f\u90fd\u9084\u7b97\u7c21\u55ae\uff0c\u9084\u53ef\u4ee5\u8655\u7406\uff0c\u4f46\u662f\u7576\u9019\u4e9b\u6a5f\u5668\u6578\u91cf\u5f88\u591a\uff0c\u540c\u6642\u6709\u53ef\u80fd\u662f\u52d5\u614b\u5275\u5efa\u7684\uff0c\u90a3\u6211\u5011\u5c31\u5fc5\u9808\u8981"),(0,a.kt)("p",null,"\u60f3\u8fa6\u6cd5\u53bb\u8a2d\u5b9a\u9019\u4e9b\u6a5f\u5668\u4e0a\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"dockerd"),"\uff0c\u9019\u6a23\u9019\u4e9b\u6a5f\u5668\u52a0\u5165\u5230 Kubernetes \u53e2\u96c6\u5f8c\uff0c\u624d\u6709\u8fa6\u6cd5\u53bb\u9023\u63a5\u5230\u4f60\u81ea\u884c\u67b6\u8a2d\u4f46\u662f",(0,a.kt)("inlineCode",{parentName:"p"},"\u6c92\u6709\u53ef\u4fe1\u8cf4\u6191\u8b49\u7684 ")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"container registry"),"\u3002"),(0,a.kt)("p",null,"\u63a5\u4e0b\u4f86\u7684\u6b65\u9a5f\u90fd\u662f\u57fa\u65bc\u4f60\u7684 Container Registry \u672c\u8eab\u6709\u4e00\u500b\u53ef\u4fe1\u8cf4\u7684\u6191\u8b49\uff0c\u540c\u6642\u6240\u6709\u7684\u5bb9\u5668\u89e3\u6c7a\u65b9\u6848\u90fd\u662f\u57fa\u65bc ",(0,a.kt)("inlineCode",{parentName:"p"},"docker"),"\u3002"),(0,a.kt)("h1",{id:"kubernetes"},"Kubernetes"),(0,a.kt)("p",null,"\u5982\u679c\u4eca\u5929\u8981\u5f9e\u672c\u5730\u7aef\u53bb\u6293\u53d6\u4e00\u500b private container registry\uff0c\u6211\u5011\u7b2c\u4e00\u4ef6\u8981\u505a\u7684\u4e8b\u60c5\u5c31\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"docekr login"),"\uff0c\u53ef\u4ee5\u53c3\u95b1 Docker \u5b98\u65b9",(0,a.kt)("a",{parentName:"p",href:"https://docs.docker.com/engine/reference/commandline/login/"},"docker login"),"\u4f86\u770b\u66f4\u591a\u8aaa\u660e\u8207\u4f7f\u7528\u3002"),(0,a.kt)("p",null,"\u5c0d\u65bc Kubernetes \u4f86\u8aaa\uff0c\u5176\u6703\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"secret")," \u7684\u7279\u6b8a\u578b\u614b ",(0,a.kt)("inlineCode",{parentName:"p"},"docker-registry")," \u4f5c\u70ba\u767b\u5165\u4efb\u4f55 private container registry \u7684\u5e33\u865f\u5bc6\u78bc\u4f86\u6e90\u3002"),(0,a.kt)("p",null,"\u9019\u908a\u6709\u5169\u7a2e\u65b9\u5f0f\u53ef\u4ee5\u4f7f\u7528"),(0,a.kt)("p",null,"\u7b2c\u4e00\u7a2e\u662f\u5148\u900f\u904e docker login \u767b\u5165\uff0c\u4e4b\u5f8c\u5c07\u767b\u5165\u5f8c\u7684\u8a2d\u5b9a\u6a94\u6848\u9001\u7d66 Kubernetes secret \u7269\u4ef6"),(0,a.kt)("p",null,"\u7b2c\u4e8c\u7a2e\u5247\u662f\u5275\u5efa Kubernetes secret \u6642\u4f7f\u7528\u660e\u78bc\u7684\u5e33\u865f\u5bc6\u78bc"),(0,a.kt)("p",null,"\u63a5\u4e0b\u4f86\u7684\u7bc4\u4f8b\u6703\u91dd\u5c0d(1)\u53bb\u4f7f\u7528\uff0c\u5c0d\u7b2c\u4e8c\u7a2e\u7bc4\u4f8b\u6709\u8208\u8da3\u53ef\u4ee5\u53c3\u95b1 ",(0,a.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/#create-a-secret-by-providing-credentials-on-the-command-line"},"Create a Secret by providing credentials on the command line")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'$  docker login --username admin --password Harbor12345  https://registry.hwchiu.com\nWARNING! Using --password via the CLI is insecure. Use --password-stdin.\nWARNING! Your password will be stored unencrypted in /home/ubuntu/.docker/config.json.\nConfigure a credential helper to remove this warning. See\nhttps://docs.docker.com/engine/reference/commandline/login/#credentials-store\n\nLogin Succeeded\n$ cat ~/.docker/config.json\n{\n        "auths": {\n                "registry.hwchiu.com": {\n                        "auth": "YWRtaW46SGFyYm9yMTIzNDU="\n                }\n        },\n        "HttpHeaders": {\n                "User-Agent": "Docker-Client/19.03.12 (linux)"\n        }\n')),(0,a.kt)("p",null,"\u63a5\u4e0b\u4f86\u628a\u9019\u500b\u6a94\u6848\uff0c\u9001\u7d66 Kubernetes \u53bb\u4f7f\uff0c\u9019\u908a\u8981\u6ce8\u610f\u7684\u662f\u6211\u5011\u4f7f\u7528\u7684\u662f\u57fa\u65bc ",(0,a.kt)("inlineCode",{parentName:"p"},"dockerconfigjson")," \u9019\u500b\u985e\u578b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"kubectl create secret generic regcred \\\n    --from-file=.dockerconfigjson=~/.docker/config.json> \\\n    --type=kubernetes.io/dockerconfigjson\n")),(0,a.kt)("p",null,"\u5982\u679c\u60f3\u8981\u4f7f\u7528 Yaml \u53bb\u7dad\u8b77\u7684\u8a71\uff0c\u53ef\u4ee5\u900f\u904e base64 \u53bb\u7de8\u78bc\u8a72config\uff0c\u8b6c\u5982"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"$ cat harbor_secret.yaml\napiVersion: v1\nkind: Secret\nmetadata:\n  name: myregistrykey\ndata:\n  .dockerconfigjson: ewoJImF1dGhzIjogewoJCSJyZWdpc3RyeS5od2NoaXUuY29tIjogewoJCQkiYXV0aCI6ICJZV1J0YVc0NlNHRnlZbTl5TVRJek5EVT0iCgkJfQoJfSwKCSJIdHRwSGVhZGVycyI6IHsKCQkiVXNlci1BZ2VudCI6ICJEb2NrZXItQ2xpZW50LzE5LjAzLjEyIChsaW51eCkiCgl9Cn0=\ntype: kubernetes.io/dockerconfigjson\n")),(0,a.kt)("p",null,"\u5982\u679c\u60f3\u8981\u9a57\u8b49\u5230\u5e95\u81ea\u5df1\u7684 secret \u662f\u5426\u6b63\u78ba\uff0c\u6211\u5011\u53ef\u4ee5\u5c07 secret \u7684\u5167\u5bb9\u6293\u51fa\u4f86\uff0c\u91cd\u65b0\u7528 base64 \u89e3\u7de8\u78bc\uff0c\u4e26\u4e14\u8ddf\u672c\u4f86\u7684 ~/.docker/config.json \u9032\u884c\u6bd4\u8f03"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'$ kubectl get secret regcred --output="jsonpath={.data.\\.dockerconfigjson}" | base64 --decode\n{\n        "auths": {\n                "registry.hwchiu.com": {\n                        "auth": "YWRtaW46SGFyYm9yMTIzNDU="\n                }\n        },\n        "HttpHeaders": {\n                "User-Agent": "Docker-Client/19.03.12 (linux)"\n        }\n$ kubectl get myregistrykey --output="jsonpath={.data.\\.dockerconfigjson}" | base64 --decode\n{\n        "auths": {\n                "registry.hwchiu.com": {\n                        "auth": "YWRtaW46SGFyYm9yMTIzNDU="\n                }\n        },\n        "HttpHeaders": {\n                "User-Agent": "Docker-Client/19.03.12 (linux)"\n        }\n')),(0,a.kt)("p",null,"\u78ba\u8a8d\u8cc7\u6599\u90fd\u6c92\u6709\u6b63\u78ba\u5f8c\uff0c\u6211\u5011\u5c31\u53ef\u4ee5\u4f86\u6e96\u5099\u90e8\u7f72\u7684\u6211\u5011\u7684 Pod \u904b\u7b97\u8cc7\u6e90\u4e86!"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'$ cat deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: ithome-private-1\n  namespace: default\n  labels:\n      name: "ithome-private-1"\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: ithome-private-1\n  template:\n    metadata:\n      name: ithome-private-1\n      labels:\n        app: ithome-private-1\n    spec:\n      containers:\n        - image: registry.hwchiu.com/ithome/netutils:latest\n          name: ithome\n      imagePullSecrets:\n        - name: regcred\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: ithome-private-2\n  namespace: default\n  labels:\n      name: "ithome-private-2"\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: ithome-private-2\n  template:\n    metadata:\n      name: ithome-private-2\n      labels:\n        app: ithome-private-2\n    spec:\n      containers:\n        - image: registry.hwchiu.com/ithome/netutils:latest\n          name: ithome\n      imagePullSecrets:\n        - name: myregistrykey\n')),(0,a.kt)("p",null,"\u9019\u908a\u53ea\u6709\u4e00\u500b\u8981\u6ce8\u610f\uff0c\u5c31\u662f\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"imagePullSecrets")," \u9019\u908a\u6307\u5b9a\u4f60\u8981\u4f7f\u7528\u7684 secret \u5373\u53ef\uff0c\u6211\u5011\u4e0a\u8ff0\u7684\u7bc4\u4f8b\u6709 ",(0,a.kt)("inlineCode",{parentName:"p"},"regcred")," \u4ee5\u53ca ",(0,a.kt)("inlineCode",{parentName:"p"},"myregistrykey")," \u5169\u500b\uff0c\u6240\u4ee5\u6211\u5011\u5c31\u5275\u9020\u5169\u500b deployment \u4f46\u662f\u4f7f\u7528\u4e0d\u540c\u7684 secret \u4f86\u8a66\u8a66\u770b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"$ kubectl apply -f deployment.yaml\ndeployment.apps/ithome-private-1 created\ndeployment.apps/ithome-private-2 created\n$ kubectl get pods\nNAME                                READY   STATUS    RESTARTS   AGE\nithome-private-1-765997748-2gttp    1/1     Running   0          4s\nithome-private-1-765997748-c8fdz    1/1     Running   0          4s\nithome-private-1-765997748-mgpfx    1/1     Running   0          4s\nithome-private-2-84c74f8c6d-5tws8   1/1     Running   0          4s\nithome-private-2-84c74f8c6d-cz6rq   1/1     Running   0          4s\nithome-private-2-84c74f8c6d-xkvjt   1/1     Running   0          4s\n")),(0,a.kt)("p",null,"\u5230\u9019\u908a\u5c31\u9806\u5229\u7684\u8b93 Kubernetes \u9023\u63a5\u5230\u525b\u525b\u67b6\u8a2d\u7684 Harbor Registry \u4e86\u3002"),(0,a.kt)("p",null,"\u9019\u908a\u8981\u7279\u5225\u6ce8\u610f\uff0c\u5982\u679c\u4eca\u5929 secret \u6709\u4e00\u4e9b\u554f\u984c\uff0c\u8981\u9664\u932f\u7684\u8a71\u9664\u4e86\u900f\u904e ",(0,a.kt)("inlineCode",{parentName:"p"},"kubectl describe")," \u53bb\u770b\u4e4b\u5916\uff0c\u53e6\u5916\u4e00\u7a2e\u65b9\u5f0f\u5c31\u662f\u5230 Kubernetes \u7bc0\u9ede\u4e0a\u9762\u53bb\u770b\u76f8\u95dc\u7684 container log\uff0c\u88e1\u9762\u6703\u6709\u66f4\u8a73\u7d30\u70ba\u4ec0\u9ebc\u6703 pull image \u5931\u6557\uff0c\u770b\u662f\u6191\u8b49\u554f\u984c\uff0c\u5e33\u865f\u5bc6\u78bc\u8a8d\u8b49\u5931\u6557\u7b49\u3002\u6709\u4e9b\u592a\u5e95\u5c64\u7684\u539f\u56e0 kubectl \u662f\u770b\u4e0d\u5230\u4e86\u3002"),(0,a.kt)("h1",{id:"helm-chart-3"},"Helm Chart 3"),(0,a.kt)("p",null,"\u6700\u5f8c\u6211\u5011\u4f86\u793a\u7bc4\u5982\u4f55\u5c07 Helm Chart (v3) \u8207 Harbor \u6574\u5408\uff0c\u4e26\u4e14\u8b93\u5176\u63a8\u5411\u5230\u9060\u65b9\u7684 Kubernetes \u53e2\u96c6\u4e2d\uff0c\u6574\u500b\u6d41\u7a0b\u662f"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u8b93 Helm Chart \u767b\u5165\u5230\u9060\u65b9 Harbor Registry"),(0,a.kt)("li",{parentName:"ol"},"\u5275\u5efa\u4e00\u500b\u6e2c\u8a66\u7528\u7684 nginx Helm Chart."),(0,a.kt)("li",{parentName:"ol"},"\u6253\u5305 nginx Helm Chart"),(0,a.kt)("li",{parentName:"ol"},"\u5c07 nginx Helm Chart \u63a8\u5230 Harbor Registry"),(0,a.kt)("li",{parentName:"ol"},"\u780d\u6389\u672c\u5730\u7684 nginx Helm Chart \u8cc7\u6599\u593e\uff0c\u4e26\u4e14\u79fb\u52d5\u5230\u5176\u4ed6\u8cc7\u6599\u593e"),(0,a.kt)("li",{parentName:"ol"},"\u5c07\u9060\u65b9\u7684 charts \u8907\u88fd\u4e00\u4efd\u5230\u672c\u5730\u7aef\u4e26\u4e14\u4f7f\u7528 helm \u5de5\u5177\u5c07\u5176\u5b89\u88dd\u5230  Kubernetes")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"$ export HELM_EXPERIMENTAL_OCI=1\n$ helm registry login -u admin registry.hwchiu.com\nPassword:\nLogin succeeded\n$ helm create nginx\n$ cd nginx\n$ helm chart save . registry.hwchiu.com/ithome/nginx:ithome\nref:     registry.hwchiu.com/ithome/nginx:ithome\ndigest:  477087f52e48bcba75370928b0895735bc0c3c1d7612d82740dd69c2b70bbba4\nsize:    3.5 KiB\nname:    nginx\nversion: 0.1.0\n$ helm chart push registry.hwchiu.com/ithome/nginx:ithome\nThe push refers to repository [registry.hwchiu.com/ithome/nginx]\nref:     registry.hwchiu.com/ithome/nginx:ithome\ndigest:  477087f52e48bcba75370928b0895735bc0c3c1d7612d82740dd69c2b70bbba4\nsize:    3.5 KiB\nname:    nginx\nversion: 0.1.0\nithome: pushed to remote (1 layer, 3.5 KiB total)\n\n")),(0,a.kt)("p",null,"\u7576\u4e0a\u8ff0\u6307\u4ee4\u57f7\u884c\u5b8c\u7562\u5f8c\uff0c\u53ef\u4ee5\u770b\u5230 Harbor \u5167\u591a\u51fa\u4e86\u76f8\u95dc\u7684 repo, \u540d\u7a31\u8ddf\u6211\u5011\u525b\u525b\u900f\u904e Helm \u53bb\u6253\u5305\u7684\u540d\u7a31\u4e00\u81f4"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://i.imgur.com/0pyplqg.png",alt:null})),(0,a.kt)("p",null,"\u9032\u53bb\u5230\u88e1\u9762\u89c0\u770b\u7d30\u7bc0\uff0c\u53ef\u4ee5\u770b\u5230\u88e1\u9762\u73fe\u5728\u986f\u793a\u7684\u8cc7\u8a0a\u5305\u542b\u4e86 Charts \u7684\u8cc7\u6599\uff0c\u9084\u6709\u5176\u76f8\u95dc\u7684 values.yaml \u90fd\u6709\uff0c\u5be6\u5be6\u5728\u5728\u7684\u900f\u904e Harbor \u9019\u5957 registry \u4f86\u4fdd\u5b58\u6211\u5011\u7684 Helm Charts\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://i.imgur.com/KNJlJyf.png",alt:null})),(0,a.kt)("p",null,"\u63a5\u4e0b\u4f86\u6211\u5011\u5c31\u5617\u8a66\u628a\u9060\u65b9\u7684 charts \u7d66\u8907\u88fd\u5230\u672c\u5730\uff0c\u4e26\u4e14\u7528 helm install \u4f86\u5b89\u88dd\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"$ cd ../\n$ rm -rf nginx\n$ helm chart export registry.hwchiu.com/ithome/nginx:ithome\nref:     registry.hwchiu.com/ithome/nginx:ithome\ndigest:  477087f52e48bcba75370928b0895735bc0c3c1d7612d82740dd69c2b70bbba4\nsize:    3.5 KiB\nname:    nginx\nversion: 0.1.0\nExported chart to nginx/\n$ helm install ithome nginx/\n$ helm ls\nNAME    NAMESPACE       REVISION        UPDATED                                 STATUS          CHART           APP VERSION\nithome  default         1               2020-09-13 23:49:47.200022078 +0000 UTC deployed        nginx-0.1.0     1.16.0\n")),(0,a.kt)("p",null,"\u5230\u9019\u908a\u5c31\u6709\u4e00\u500b\u7c21\u6613\u7684\u5c55\u793a\uff0c\u5982\u4f55\u5c07 Helm3 & Harbor & Kubernetes \u9032\u884c\u6574\u5408\uff0c\u900f\u904e\u9019\u500b\u529f\u80fd\u6211\u5011\u53ef\u4ee5\u53ea\u9700\u8981\u7528\u4e00\u500b\u4f3a\u670d\u5668\u5c31\u6eff\u8db3 Helm & Container Image\u3002\u6211\u500b\u4eba\u8a8d\u70ba\u9019\u500b\u5728\u672a\u4f86\u61c9\u8a72\u6703\u8b8a\u6210\u4e3b\u6d41\uff0c\u7562\u7adf\u53ea\u8981\u5920\u7a69\u5b9a\uff0c\u80fd\u5920\u6e1b\u5c11\u8981\u7dad\u8b77\u7684\u4f3a\u670d\u5668\u6578\u91cf\u53ef\u4ee5\u66f4\u5c11\uff0c\u548c\u6a02\u4e0d\u70ba\uff1f"))}d.isMDXComponent=!0}}]);
"use strict";(self.webpackChunkhwchiu=self.webpackChunkhwchiu||[]).push([[89261],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>d});var a=t(67294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var l=a.createContext({}),s=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},u=function(e){var n=s(e.components);return a.createElement(l.Provider,{value:n},e.children)},c="mdxType",k={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),c=s(t),m=i,d=c["".concat(l,".").concat(m)]||c[m]||k[m]||r;return t?a.createElement(d,o(o({ref:n},u),{},{components:t})):a.createElement(d,o({ref:n},u))}));function d(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var r=t.length,o=new Array(r);o[0]=m;var p={};for(var l in n)hasOwnProperty.call(n,l)&&(p[l]=n[l]);p.originalType=e,p[c]="string"==typeof e?e:i,o[1]=p;for(var s=2;s<r;s++)o[s]=t[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},10026:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>k,frontMatter:()=>r,metadata:()=>p,toc:()=>s});var a=t(87462),i=(t(67294),t(3905));const r={title:"11\u500b\u4fdd\u8b77\u4f60 Kubernetes \u96c6\u7fa4\u7684\u6280\u5de7\u8207\u89c0\u5ff5(\u4e0b)",tags:["Kubernetes","Security"],date:new Date("2018-07-29T17:51:49.000Z"),description:'\u5728\u7ba1\u7406 Kubernetes \u96c6\u7fa4\u65b9\u9762\uff0c\u5927\u90e8\u5206\u7684\u73a9\u5bb6\u53ca\u7ba1\u7406\u8005\u4e00\u958b\u59cb\u6700\u5728\u610f\u7684\u4e00\u5b9a\u6703\u662f\u81ea\u5df1\u7684\u670d\u52d9\u80fd\u4e0d\u80fd\u5920\u9806\u5229\u904b\u884c\u8d77\u4f86\uff0c\u540c\u6642\u80fd\u4e0d\u80fd\u85c9\u7531 kubernetes \u7684\u8af8\u591a\u7279\u6027\uff0c\u5982 service/configmap/deployment/daemonset \u7b49\u5404\u5f0f\u5404\u6a23\u7684\u8cc7\u6e90\u4f86\u52a0\u5f37\u81ea\u8eab\u7684\u670d\u52d9\u80fd\u529b\u3002\u7136\u800c\u5c0d\u65bc\u4e00\u500b\u771f\u6b63\u904b\u884c\u7522\u54c1\u7684\u96c6\u7fa4\u4f86\u8aaa\u662f\u5b8c\u5168\u4e0d\u5920\u7684\uff0c\u9664\u4e86\u670d\u52d9\u7684\u529f\u80fd\u4ee5\u53ca\u7a69\u5b9a\u5916\uff0c\u9084\u6709\u8af8\u591a\u76f8\u95dc\u7684\u8b70\u984c\u90fd\u9700\u8981\u4e00\u4f75\u8003\u616e\u4e26\u4e14\u8655\u7406\u3002\u5728\u6b64\u8b70\u984c\u4e0b\u7279\u5225\u91cd\u8981\u7684\u5c31\u662f Security \u7684\u8655\u7406\uff0c Security \u8655\u7406\u7684\u4e0d\u7576\uff0c\u53ef\u80fd\u6703\u9020\u6210\u4f7f\u7528\u8005\u7684\u8cc7\u6599\u88ab\u7aca\u53d6\uff0c\u66f4\u56b4\u91cd\u751a\u81f3\u6574\u500b\u96c6\u6b0a\u7684\u7ba1\u7406\u6b0a\u9650\u90fd\u88ab\u5916\u4eba\u53d6\u5f97\u3002\u56e0\u6b64\u9019\u6b21\u7279\u5225\u5206\u4eab\u4e00\u7bc7 "11 Ways Not to Get Hacked" \u7684\u6587\u7ae0\uff0c\u91dd\u5c0d\u88e1\u9762\u63d0\u51fa\u7684 11 \u500b\u4fdd\u8b77\u597d\u4f60 kubernetes \u96c6\u7fa4\u7684\u65b9\u5411\u9032\u884c\u7814\u7a76\uff0c\u4e26\u4e14\u914d\u4e0a\u81ea\u5df1\u7684\u5fc3\u5f97\u8207\u6574\u7406\u3002'},o=void 0,p={unversionedId:"2018/k8s-security-11tips-ii",id:"2018/k8s-security-11tips-ii",title:"11\u500b\u4fdd\u8b77\u4f60 Kubernetes \u96c6\u7fa4\u7684\u6280\u5de7\u8207\u89c0\u5ff5(\u4e0b)",description:'\u5728\u7ba1\u7406 Kubernetes \u96c6\u7fa4\u65b9\u9762\uff0c\u5927\u90e8\u5206\u7684\u73a9\u5bb6\u53ca\u7ba1\u7406\u8005\u4e00\u958b\u59cb\u6700\u5728\u610f\u7684\u4e00\u5b9a\u6703\u662f\u81ea\u5df1\u7684\u670d\u52d9\u80fd\u4e0d\u80fd\u5920\u9806\u5229\u904b\u884c\u8d77\u4f86\uff0c\u540c\u6642\u80fd\u4e0d\u80fd\u85c9\u7531 kubernetes \u7684\u8af8\u591a\u7279\u6027\uff0c\u5982 service/configmap/deployment/daemonset \u7b49\u5404\u5f0f\u5404\u6a23\u7684\u8cc7\u6e90\u4f86\u52a0\u5f37\u81ea\u8eab\u7684\u670d\u52d9\u80fd\u529b\u3002\u7136\u800c\u5c0d\u65bc\u4e00\u500b\u771f\u6b63\u904b\u884c\u7522\u54c1\u7684\u96c6\u7fa4\u4f86\u8aaa\u662f\u5b8c\u5168\u4e0d\u5920\u7684\uff0c\u9664\u4e86\u670d\u52d9\u7684\u529f\u80fd\u4ee5\u53ca\u7a69\u5b9a\u5916\uff0c\u9084\u6709\u8af8\u591a\u76f8\u95dc\u7684\u8b70\u984c\u90fd\u9700\u8981\u4e00\u4f75\u8003\u616e\u4e26\u4e14\u8655\u7406\u3002\u5728\u6b64\u8b70\u984c\u4e0b\u7279\u5225\u91cd\u8981\u7684\u5c31\u662f Security \u7684\u8655\u7406\uff0c Security \u8655\u7406\u7684\u4e0d\u7576\uff0c\u53ef\u80fd\u6703\u9020\u6210\u4f7f\u7528\u8005\u7684\u8cc7\u6599\u88ab\u7aca\u53d6\uff0c\u66f4\u56b4\u91cd\u751a\u81f3\u6574\u500b\u96c6\u6b0a\u7684\u7ba1\u7406\u6b0a\u9650\u90fd\u88ab\u5916\u4eba\u53d6\u5f97\u3002\u56e0\u6b64\u9019\u6b21\u7279\u5225\u5206\u4eab\u4e00\u7bc7 "11 Ways Not to Get Hacked" \u7684\u6587\u7ae0\uff0c\u91dd\u5c0d\u88e1\u9762\u63d0\u51fa\u7684 11 \u500b\u4fdd\u8b77\u597d\u4f60 kubernetes \u96c6\u7fa4\u7684\u65b9\u5411\u9032\u884c\u7814\u7a76\uff0c\u4e26\u4e14\u914d\u4e0a\u81ea\u5df1\u7684\u5fc3\u5f97\u8207\u6574\u7406\u3002',source:"@site/docs/2018/k8s-security-11tips-ii.md",sourceDirName:"2018",slug:"/2018/k8s-security-11tips-ii",permalink:"/docs/2018/k8s-security-11tips-ii",draft:!1,tags:[{label:"Kubernetes",permalink:"/docs/tags/kubernetes"},{label:"Security",permalink:"/docs/tags/security"}],version:"current",lastUpdatedBy:"HWC",frontMatter:{title:"11\u500b\u4fdd\u8b77\u4f60 Kubernetes \u96c6\u7fa4\u7684\u6280\u5de7\u8207\u89c0\u5ff5(\u4e0b)",tags:["Kubernetes","Security"],date:"2018-07-29T17:51:49.000Z",description:'\u5728\u7ba1\u7406 Kubernetes \u96c6\u7fa4\u65b9\u9762\uff0c\u5927\u90e8\u5206\u7684\u73a9\u5bb6\u53ca\u7ba1\u7406\u8005\u4e00\u958b\u59cb\u6700\u5728\u610f\u7684\u4e00\u5b9a\u6703\u662f\u81ea\u5df1\u7684\u670d\u52d9\u80fd\u4e0d\u80fd\u5920\u9806\u5229\u904b\u884c\u8d77\u4f86\uff0c\u540c\u6642\u80fd\u4e0d\u80fd\u85c9\u7531 kubernetes \u7684\u8af8\u591a\u7279\u6027\uff0c\u5982 service/configmap/deployment/daemonset \u7b49\u5404\u5f0f\u5404\u6a23\u7684\u8cc7\u6e90\u4f86\u52a0\u5f37\u81ea\u8eab\u7684\u670d\u52d9\u80fd\u529b\u3002\u7136\u800c\u5c0d\u65bc\u4e00\u500b\u771f\u6b63\u904b\u884c\u7522\u54c1\u7684\u96c6\u7fa4\u4f86\u8aaa\u662f\u5b8c\u5168\u4e0d\u5920\u7684\uff0c\u9664\u4e86\u670d\u52d9\u7684\u529f\u80fd\u4ee5\u53ca\u7a69\u5b9a\u5916\uff0c\u9084\u6709\u8af8\u591a\u76f8\u95dc\u7684\u8b70\u984c\u90fd\u9700\u8981\u4e00\u4f75\u8003\u616e\u4e26\u4e14\u8655\u7406\u3002\u5728\u6b64\u8b70\u984c\u4e0b\u7279\u5225\u91cd\u8981\u7684\u5c31\u662f Security \u7684\u8655\u7406\uff0c Security \u8655\u7406\u7684\u4e0d\u7576\uff0c\u53ef\u80fd\u6703\u9020\u6210\u4f7f\u7528\u8005\u7684\u8cc7\u6599\u88ab\u7aca\u53d6\uff0c\u66f4\u56b4\u91cd\u751a\u81f3\u6574\u500b\u96c6\u6b0a\u7684\u7ba1\u7406\u6b0a\u9650\u90fd\u88ab\u5916\u4eba\u53d6\u5f97\u3002\u56e0\u6b64\u9019\u6b21\u7279\u5225\u5206\u4eab\u4e00\u7bc7 "11 Ways Not to Get Hacked" \u7684\u6587\u7ae0\uff0c\u91dd\u5c0d\u88e1\u9762\u63d0\u51fa\u7684 11 \u500b\u4fdd\u8b77\u597d\u4f60 kubernetes \u96c6\u7fa4\u7684\u65b9\u5411\u9032\u884c\u7814\u7a76\uff0c\u4e26\u4e14\u914d\u4e0a\u81ea\u5df1\u7684\u5fc3\u5f97\u8207\u6574\u7406\u3002'},sidebar:"techPost",previous:{title:"11\u500b\u4fdd\u8b77\u4f60 Kubernetes \u96c6\u7fa4\u7684\u6280\u5de7\u8207\u89c0\u5ff5(\u4e0a)",permalink:"/docs/2018/k8s-security-11tips-i"},next:{title:"[Kubernetes] DNS Setting When DnsPolicy Is Default",permalink:"/docs/2018/kubernetes-dns-ii"}},l={},s=[{value:"Preface",id:"preface",level:2},{value:"Workloads",id:"workloads",level:2},{value:"Use Linux Security Features and PodSecurityPolicies",id:"use-linux-security-features-and-podsecuritypolicies",level:3},{value:"Linux Capability",id:"linux-capability",level:4},{value:"AppArmor",id:"apparmor",level:4},{value:"SELinux",id:"selinux",level:4},{value:"Seccomp",id:"seccomp",level:4},{value:"Statically Analyse YAML",id:"statically-analyse-yaml",level:3},{value:"Run Containers as a Non-Root User",id:"run-containers-as-a-non-root-user",level:3},{value:"Use Network Policies",id:"use-network-policies",level:3},{value:"Scan Images and Run IDS",id:"scan-images-and-run-ids",level:3},{value:"The Future",id:"the-future",level:2},{value:"Summary",id:"summary",level:2}],u={toc:s},c="wrapper";function k(e){let{components:n,...t}=e;return(0,i.kt)(c,(0,a.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"preface"},"Preface"),(0,i.kt)("p",null,"\u672c\u7bc7\u6587\u7ae0\u7684\u539f\u6587\u70ba ",(0,i.kt)("a",{parentName:"p",href:"https://kubernetes.io/blog/2018/07/18/11-ways-not-to-get-hacked/#11-run-a-service-mesh"},"11 Ways Not to Get Hacked")),(0,i.kt)("p",null,"\u672c\u6587\u4f5c\u8005\u5c07\u9019 11 \u500b\u6280\u5de7\u8207\u89c0\u5ff5\u5206\u6210\u4e09\u5927\u90e8\u5206\u4f86\n\u5206\u5225\u662f"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"The Control Plane"),(0,i.kt)("li",{parentName:"ol"},"Workloads"),(0,i.kt)("li",{parentName:"ol"},"The Future")),(0,i.kt)("p",null,"\u672c\u7bc7\u6587\u7ae0\u5ef6\u7e8c ",(0,i.kt)("a",{parentName:"p",href:"https://www.hwchiu.com/docs/2018/k8s-security-11tips-i"},"11\u500b\u4fdd\u8b77\u4f60 Kubernetes \u96c6\u7fa4\u7684\u6280\u5de7\u8207\u89c0\u5ff5(\u4e0a)")),(0,i.kt)("p",null,"\u7e7c\u7e8c\u63a2\u8a0e\u539f\u6587\u4f5c\u8005\u5f8c\u534a\u90e8\u5206\u7684\u6982\u5ff5"),(0,i.kt)("p",null,"\u5728\u4e0a\u7bc7\u6587\u7ae0\u4e2d\uff0c\u6211\u5011\u5c08\u6ce8\u65bc ",(0,i.kt)("inlineCode",{parentName:"p"},"The Control Plane")," \u9019\u908a\u76f8\u95dc\u7684\u5b89\u5168\u7ba1\u7406\uff0c\u800c\u672c\u7bc7\u6587\u7ae0\u6211\u5011\u5247\u6703\u5c08\u6ce8\u65bc\u5f8c\u7e8c\u7684\u5169\u500b\u65b9\u5411\uff0c\u5206\u5225\u662f ",(0,i.kt)("inlineCode",{parentName:"p"},"Workloads")," \u4ee5\u53ca ",(0,i.kt)("inlineCode",{parentName:"p"},"The Future"),"\u3002"),(0,i.kt)("h2",{id:"workloads"},"Workloads"),(0,i.kt)("p",null,"\u76f8\u5c0d\u65bc ",(0,i.kt)("inlineCode",{parentName:"p"},"The Control Plane")," \u8457\u91cd\u65bc\u6574\u500b\u96c6\u7fa4\u67b6\u69cb\u4e0a\u7684\u5b89\u5168\u554f\u984c\uff0c ",(0,i.kt)("inlineCode",{parentName:"p"},"Workloads")," \u5247\u662f\u8457\u91cd\u65bc\u904b\u884c\u65bc ",(0,i.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u5167\u7684\u5404\u7a2e\u5de5\u4f5c\u670d\u52d9\uff0c\u5982 ",(0,i.kt)("inlineCode",{parentName:"p"},"Pods"),",",(0,i.kt)("inlineCode",{parentName:"p"},"Deployments"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"Jobs")," \u7b49\n\u96d6\u7136\u9019\u4e9b\u5de5\u4f5c\u670d\u52d9\u5728\u90e8\u7f72\u968e\u6bb5\u662f\u53d7\u5230 ",(0,i.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u7d93\u904e\u6aa2\u67e5\u78ba\u8a8d\u5408\u6cd5\u624d\u6703\u5f80\u4e0b\u57f7\u884c\u7684\uff0c\u4f46\u662f\u7531\u65bc\u9019\u4e9b\u5de5\u4f5c\u670d\u52d9\u90fd\u6703\u76f4\u63a5\u9762\u5411\u4f7f\u7528\u8005\uff0c\u82e5\u9019\u4e9b\u5de5\u4f5c\u5bb9\u5668\u5167\u672c\u8eab\u7684\u6b0a\u9650\u904e\u9ad8\u4e14\u906d\u53d7\u5230\u975e\u9810\u671f\u7684\u653b\u64ca\u6642\uff0c\u5c31\u6703\u884d\u751f\u51fa\u5176\u4ed6\u7684\u5b89\u5168\u6027\u554f\u984c\u3002"),(0,i.kt)("p",null,"\u56e0\u6b64\u4f5c\u8005\u8a8d\u70ba\uff0c\u91dd\u5c0d\u9019\u4e9b\u5bb9\u5668\u76f8\u95dc\u7684\u90e8\u7f72\uff0c\u5176\u6b0a\u9650\u80fd\u5920\u6108\u4f4e\u6108\u597d\uff0c\u91dd\u5c0d\u5176\u7528\u9014\u958b\u555f\u7279\u5b9a\u6b0a\u9650\uff0c\u4e0d\u80fd\u70ba\u4e86\u65b9\u4fbf\u5077\u61f6\u5c31\u5c07\u5168\u90e8\u7684\u6b0a\u9650\u958b\u555f\u3002"),(0,i.kt)("h3",{id:"use-linux-security-features-and-podsecuritypolicies"},"Use Linux Security Features and PodSecurityPolicies"),(0,i.kt)("p",null,"\u91dd\u5c0d ",(0,i.kt)("inlineCode",{parentName:"p"},"Linuux")," \u76f8\u95dc\u7684\u5bb9\u5668\u4f86\u8aaa\uff0c",(0,i.kt)("inlineCode",{parentName:"p"},"Linux Kernel")," \u5176\u5be6\u63d0\u4f9b\u4e86\u4e0d\u5c11\u5b89\u5168\u63a7\u7ba1\u7684\u6a5f\u5236\uff0c\u8b6c\u5982"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Linux Capability"),(0,i.kt)("li",{parentName:"ol"},"AppArmor"),(0,i.kt)("li",{parentName:"ol"},"SELinux"),(0,i.kt)("li",{parentName:"ol"},"seccomp")),(0,i.kt)("h4",{id:"linux-capability"},"Linux Capability"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"http://man7.org/linux/man-pages/man7/capabilities.7.html"},"Linux Capability")," \u662f\u91dd\u5c0d Thread \u70ba\u55ae\u4f4d\u7684\u6b0a\u9650\u63a7\u7ba1\uff0c\u90e8\u5206\u8ddf\u7cfb\u7d71\u5e95\u5c64\u7684\u64cd\u4f5c\u90fd\u9700\u8981\u7279\u5b9a\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"capability")," \u624d\u80fd\u5920\u64cd\u4f5c\uff0c\u8b6c\u5982\u64c1\u6709 ",(0,i.kt)("inlineCode",{parentName:"p"},"NET_ADMIN")," \u80fd\u529b\u7684\u5247\u53ef\u4ee5\u900f\u904e\u76f8\u95dc\u6307\u4ee4\u53bb\u4fee\u6539\u7cfb\u7d71\u4e0a\u7684\u7db2\u8def\u8a2d\u5b9a(Routing/Interface), \u800c\u64c1\u6709 ",(0,i.kt)("inlineCode",{parentName:"p"},"NET_RAW")," \u7684\u5247\u6709\u80fd\u529b\u53ef\u4ee5\u53bb\u807d\u53d6 ",(0,i.kt)("inlineCode",{parentName:"p"},"Raw Socket")," \u7684\u5c01\u5305\u3002\n\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"Kubernetes")," \u5167\u4e5f\u53ef\u4ee5\u900f\u904e ",(0,i.kt)("inlineCode",{parentName:"p"},"SecurityContext")," \u5c0d\u6bcf\u500b ",(0,i.kt)("inlineCode",{parentName:"p"},"Container")," \u53bb\u9032\u884c\u76f8\u95dc\u7684\u6b0a\u9650\u8a2d\u5b9a.\n\u985e\u4f3c\u7528\u6cd5\u5982\u4e0b"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yml"},'pods/security/security-context-4.yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: security-context-demo-4\nspec:\n  containers:\n  - name: sec-ctx-4\n    image: gcr.io/google-samples/node-hello:1.0\n    securityContext:\n      capabilities:\n        add: ["NET_ADMIN", "SYS_TIME"]\n\n')),(0,i.kt)("h4",{id:"apparmor"},"AppArmor"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/tutorials/clusters/apparmor/"},"AppArmor")," \u5247\u662f\u4e00\u7a2e\u57fa\u65bc ",(0,i.kt)("inlineCode",{parentName:"p"},"Process")," \u7a0b\u5e8f\u70ba\u55ae\u4f4d\u53bb\u9650\u5236\u5176\u5b58\u53d6\u6a94\u6848\u53ca\u64cd\u4f5c\u7684\u4e00\u7a2e\u6a5f\u5236\u3002\n\u91dd\u5c0d\u6bcf\u500b ",(0,i.kt)("inlineCode",{parentName:"p"},"Process")," \u53ef\u4ee5\u53bb\u63cf\u8ff0\u53ea\u80fd\u5b58\u53d6\u54ea\u4e9b\u6a94\u6848\uff0c\u85c9\u6b64\u964d\u4f4e\u8a72\u7a0b\u5e8f\u88ab\u653b\u64ca\u6642\u6240\u9020\u6210\u7684\u50b7\u5bb3."),(0,i.kt)("p",null,"\u5c0d\u65bc ",(0,i.kt)("inlineCode",{parentName:"p"},"Kubernetes"),"\u4f86\u8aaa\uff0c\u81ea\u5f9e ",(0,i.kt)("inlineCode",{parentName:"p"},"1.4.0")," \u958b\u59cb\u5c31\u6709\u652f\u63f4 ",(0,i.kt)("inlineCode",{parentName:"p"},"AppArmor")," \u76f8\u95dc\u7684\u529f\u80fd\uff0c\u53ef\u4ee5\u4e8b\u5148\u5728\u6bcf\u500b\u7bc0\u9ede\u4e0a\u5b89\u88dd ",(0,i.kt)("inlineCode",{parentName:"p"},"AppArmor")," \u4e26\u4e14\u900f\u904e ",(0,i.kt)("inlineCode",{parentName:"p"},"Profile")," \u7684\u65b9\u5f0f\u53bb\u8a2d\u5b9a ",(0,i.kt)("inlineCode",{parentName:"p"},"AppArmor")," \u7684\u6b0a\u9650\uff0c\u7136\u5f8c\u6bcf\u500b ",(0,i.kt)("inlineCode",{parentName:"p"},"Pod")," \u900f\u904e ",(0,i.kt)("inlineCode",{parentName:"p"},"Annotation")," \u7684\u65b9\u5f0f\u53bb\u639b\u8f09\u7279\u5b9a\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"AppArmor")," \u4f86\u9650\u5236\u8a72\u5bb9\u5668\u7684\u6b0a\u9650\u3002\n\u8a73\u7d30\u7684\u7bc4\u4f8b\u53ef\u4ee5\u53c3\u8003\u5b98\u7db2\u7684\u7bc4\u4f8b",(0,i.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/tutorials/clusters/apparmor/"},"Kubernetes AppArmor")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yml"},'apiVersion: v1\nkind: Pod\nmetadata:\n  name: hello-apparmor\n  annotations:\n    # Tell Kubernetes to apply the AppArmor profile "k8s-apparmor-example-deny-write".\n    # Note that this is ignored if the Kubernetes node is not running version 1.4 or greater.\n    container.apparmor.security.beta.kubernetes.io/hello: localhost/k8s-apparmor-example-deny-write\nspec:\n  containers:\n  - name: hello\n    image: busybox\n    command: [ "sh", "-c", "echo \'Hello AppArmor!\' && sleep 1h" ]\n')),(0,i.kt)("h4",{id:"selinux"},"SELinux"),(0,i.kt)("p",null,"Security-Enhanced Linux (SELinux) \u4e3b\u65e8\u5728\u65bc\u63d0\u4f9b\u66f4\u5f37\u5b89\u5168\u6027\u7684 Linux \u7cfb\u7d71\uff0c\u85c9\u7531\u53d6\u4ee3\u539f\u5148\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"\u81ea\u4e3b\u5f0f\u5b58\u53d6\u63a7\u5236 (Discretionary Access Control, DAC)")," \u70ba ",(0,i.kt)("inlineCode",{parentName:"p"},"\u59d4\u4efb\u5f0f\u5b58\u53d6\u63a7\u5236 (Mandatory Access Control, MAC) \u7684\u65b9\u6cd5")," \u4f86\u91dd\u5c0d\u7279\u5b9a\u7684\u61c9\u7528\u7a0b\u5f0f\u8207\u7279\u5b9a\u7684\u4f7f\u7528\u8005\u9054\u6210\u66f4\u7d30\u90e8\u7684\u6b0a\u9650\u7ba1\u7406\uff0c\u53ef\u9054\u6210\u5373\u4f7f\u662f ",(0,i.kt)("inlineCode",{parentName:"p"},"root")," \u8eab\u4efd\u5728\u57f7\u884c\u7279\u5b9a\u6a94\u6848/\u6307\u4ee4\u6642\u4e5f\u6703\u88ab\u964d\u6b0a\u6210\u975e",(0,i.kt)("inlineCode",{parentName:"p"},"root"),"\u6b0a\u9650\u3002"),(0,i.kt)("p",null,"\u5c0d\u61c9\u65bc ",(0,i.kt)("inlineCode",{parentName:"p"},"Kubernetes")," \u4f86\u8aaa\uff0c\u9996\u5148\u8981\u5148\u5728\u7bc0\u9ede\u4e0a\u9762\u958b\u555f ",(0,i.kt)("inlineCode",{parentName:"p"},"SELinux")," \u76f8\u95dc\u7684\u529f\u80fd\uff0c\u4e26\u4e14\u6b63\u78ba\u8a2d\u5b9a\u5b8c\u7562\u3002\n\u63a5\u4e0b\u4f86\u5c0d\u65bc\u8981\u63a1\u7528\u8a72 ",(0,i.kt)("inlineCode",{parentName:"p"},"SELinux")," \u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Pod")," \u4e2d\u53bb\u8a2d\u5b9a ",(0,i.kt)("inlineCode",{parentName:"p"},"SecurityContext"),"\uff0c\u4e26\u4e14\u900f\u904e ",(0,i.kt)("inlineCode",{parentName:"p"},"seLinuxOptions")," \u7684\u65b9\u5f0f\u4f86\u8a2d\u5b9a\u76f8\u95dc\u7684\u53c3\u6578\n\u6574\u9ad4\u7684\u53c3\u6578\u7d50\u69cb\u53ef\u4ee5\u53c3\u8003 ",(0,i.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.11/#selinuxoptions-v1-core"},"Kubernetes API Reference"),"\u800c\u4f7f\u7528\u7bc4\u4f8b\u53ef\u53c3\u8003\u5982\u4e0b"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yml"},'...\nsecurityContext:\n  seLinuxOptions:\n    level: "s0:c123,c456"\n')),(0,i.kt)("h4",{id:"seccomp"},"Seccomp"),(0,i.kt)("p",null,"seccomp-bpf \u662f\u4e00\u5957\u4ee5 ",(0,i.kt)("inlineCode",{parentName:"p"},"process")," \u7a0b\u5e8f\u70ba\u55ae\u4f4d\u53bb\u9650\u5236\u5176\u80fd\u5920\u547c\u53eb ",(0,i.kt)("inlineCode",{parentName:"p"},"Linux Kernel System Call")," \u7684\u6a5f\u5236\u3002\n\u4e00\u822c\u7684\u61c9\u7528\u7a0b\u5f0f\u5927\u90e8\u5206\u53ef\u80fd\u90fd\u53ea\u6703\u7528\u5230 ",(0,i.kt)("inlineCode",{parentName:"p"},"Read"),",",(0,i.kt)("inlineCode",{parentName:"p"},"Write")," \u7b49\u57fa\u672c\u529f\u80fd\uff0c\u518d\u4f86\u53ef\u80fd\u6703\u727d\u626f\u5230 ",(0,i.kt)("inlineCode",{parentName:"p"},"Fork/Clone")," \u9019\u985e\u578b\uff0c\u66f4\u751a\u81f3\u6703\u727d\u626f\u5230\u7db2\u8def\u76f8\u95dc\u7684\u7db2\u5361\u7d81\u5b9a\u3002"),(0,i.kt)("p",null,"\u56e0\u6b64\u900f\u904e ",(0,i.kt)("inlineCode",{parentName:"p"},"seccomp")," \u7684\u529f\u80fd\u53bb\u9650\u5236\u80fd\u5920\u57f7\u884c\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"System Call")," \u4e5f\u80fd\u5920\u5927\u5e45\u7684\u964d\u4f4e\u7576\u61c9\u7528\u7a0b\u5f0f\u88ab\u653b\u64ca\u6642\u6240\u9020\u6210\u7684\u50b7\u5bb3\u3002"),(0,i.kt)("p",null,"\u5c0d\u61c9\u65bc ",(0,i.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u4f86\u8aaa\uff0c\u8a72\u529f\u80fd\u76ee\u524d\u9084\u662f\u5c6c\u65bc ",(0,i.kt)("inlineCode",{parentName:"p"},"Alpha")," \u968e\u6bb5\uff0c\u76ee\u524d\u7684\u4f7f\u7528\u65b9\u5f0f\u5927\u6982\u662f"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"\u5728\u5c0d\u61c9\u7684\u7bc0\u9ede\u4e0a\u653e\u7f6e\u76f8\u95dc\u7684 ",(0,i.kt)("inlineCode",{parentName:"li"},"seccomp")," \u7684\u6a94\u6848\uff0c\u7528\u4f86\u63cf\u8ff0\u76f8\u95dc\u7684\u8a2d\u5b9a"),(0,i.kt)("li",{parentName:"ol"},"\u5728\u904b\u884c\u7684 ",(0,i.kt)("inlineCode",{parentName:"li"},"Pod")," \u7684\u6a94\u6848\u5167\uff0c\u900f\u904e ",(0,i.kt)("inlineCode",{parentName:"li"},"Annotation")," \u7684\u65b9\u5f0f\u5c07\u8a72 ",(0,i.kt)("inlineCode",{parentName:"li"},"Pod")," \u8207\u5c0d\u61c9\u7684 ",(0,i.kt)("inlineCode",{parentName:"li"},"seccomp")," \u8a2d\u5b9a\u6a94\u9023\u7d50\u4f86\u9054\u5230\u9650\u5236\u7684\u529f\u7528\u3002\n\u8a73\u7d30\u7684\u64cd\u4f5c\u53ef\u4ee5\u53c3\u8003",(0,i.kt)("a",{parentName:"li",href:"https://kubernetes.io/docs/concepts/policy/pod-security-policy"},"Kubernetes Pod-Security-Policy"))),(0,i.kt)("p",null,"\u9664\u4e86\u4e0a\u8ff0\u63d0\u5230\u8ddf ",(0,i.kt)("inlineCode",{parentName:"p"},"Linux Kernel")," \u63d0\u4f9b\u7684\u5b89\u5168\u6a5f\u5236\u5916\uff0c",(0,i.kt)("inlineCode",{parentName:"p"},"Kubernetes")," v1.11 \u672c\u8eab\u4e5f\u63d0\u4f9b\u4e86\u4e00\u500b\u65b0\u7684\u6a5f\u5236 ",(0,i.kt)("inlineCode",{parentName:"p"},"Pod Securirt Policy"),"(Beta)."),(0,i.kt)("p",null,"\u8a72\u6a5f\u5236\u63d0\u4f9b\u4e86\u4e00\u7a2e",(0,i.kt)("inlineCode",{parentName:"p"},"Cluster-Wide"),"\u7684\u5b89\u5168\u6027\u8a2d\u5b9a\uff0c\u80fd\u5920\u5c07\u76f8\u95dc\u7684\u5b89\u5168\u6027\u8a2d\u5b9a\u8a2d\u5b9a\u6210\u4e00\u4efd\u5168\u57df\u7684\u8a2d\u5b9a\u6a94\u6848\uff0c\u900f\u904e ",(0,i.kt)("inlineCode",{parentName:"p"},"RBAC")," \u4ee5\u53ca ",(0,i.kt)("inlineCode",{parentName:"p"},"ServiceAccount")," \u7684\u7d81\u5b9a\uff0c\u5c31\u53ef\u4ee5\u8b93\u6240\u6709\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Pod")," \u81ea\u52d5\u5957\u7528\u9019\u4e9b\u5b89\u5168\u6027\u8a2d\u5b9a\uff0c\u6e1b\u5c11\u4e86\u6bcf\u500b\u55ae\u7368\u8a2d\u5b9a\u7684\u7e41\u7463\u7a0b\u5e8f\u3002\n\u76f8\u50cf\u7684\u6587\u4ef6\u53ef\u4ee5\u53c3\u8003",(0,i.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/concepts/policy/pod-security-policy"},"Kubernetes Pod-Security-Policy")),(0,i.kt)("h3",{id:"statically-analyse-yaml"},"Statically Analyse YAML"),(0,i.kt)("p",null,"\u76f8\u5c0d\u65bc\u524d\u9762\u63d0\u5230\u9019\u7a2e",(0,i.kt)("inlineCode",{parentName:"p"},"RunTime"),"\u6642\u671f\u7684\u5b89\u5168\u6027\u6aa2\u67e5\uff0c\u9019\u908a\u8981\u4ecb\u7d39\u7684\u5247\u662f\u4e00\u7a2e\u76f8\u8f14\u76f8\u6210\u7684\u6982\u5ff5\uff0c",(0,i.kt)("inlineCode",{parentName:"p"},"Statiscally Analyse YAML"),"\uff0c\u91dd\u5c0d\u90e8\u7f72\u670d\u52d9\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Yaml")," \u8a2d\u5b9a\u6a94\u6848\u53bb\u5206\u6790\uff0c\u8a55\u4f30\u8a72 ",(0,i.kt)("inlineCode",{parentName:"p"},"Yaml")," \u5167\u7684\u8a2d\u5b9a\u662f\u5426\u8db3\u5920\u5b89\u5168\u3002"),(0,i.kt)("p",null,"\u4f5c\u8005\u8a8d\u70ba\u654f\u611f\u6a5f\u5bc6\u7684\u8cc7\u8a0a\u4e0d\u61c9\u8a72\u88ab\u653e\u5728\u4efb\u4f55\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Yaml")," \u5167\u5bb9\u4e4b\u4e2d\uff0c\u82e5\u63a1\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"ConfigMap")," \u4ee5\u53ca ",(0,i.kt)("inlineCode",{parentName:"p"},"Secret")," \u7b49\u65b9\u5f0f\u4f86\u5b58\u653e\u4efb\u4f55\u6a5f\u5bc6\u8cc7\u8a0a\u7684\u8a71\uff0c\u4e5f\u5fc5\u9808\u8981\u5c07\u9019\u4e9b\u8cc7\u6599\u900f\u904e\u4e00\u4e9b\u5de5\u5177\u4f86\u9032\u884c\u52a0\u5bc6\uff0c\u8b6c\u5982 ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/coreos/vault-operator"},"Valut(with CoreOS's operator"),", ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/AGWA/git-crypt"},"git-crypt"),", ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/bitnami-labs/sealed-secrets"},"sealed secrets")," \u4ee5\u53ca ",(0,i.kt)("a",{parentName:"p",href:"https://cloud.google.com/kms/"},"cloud procider KMS")),(0,i.kt)("p",null,"\u6b64\u5916\uff0c\u9019\u908a\u4e5f\u63d0\u51fa\u4e86\u53e6\u5916\u4e00\u5957\u6211\u89ba\u5f97\u6eff\u6709\u8da3\u7684\u5de5\u5177 ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/stefanprodan/kubectl-kubesec"},"kubectl-kubesec"),"\n\u8a72\u5de5\u5177\u662f\u4e00\u500b kubelet \u7684 plugin, \u80fd\u5920\u91dd\u5c0d\u90e8\u7f72\u8cc7\u6e90\u7684 Yaml \u6a94\u6848\u5c07\u884c\u6383\u63cf\uff0c\u6839\u64da\u5b89\u5168\u6027\u76f8\u95dc\u7684\u8a2d\u5b9a\u7d66\u4e88\u8a55\u5206\uff0c\u8b93\u7ba1\u7406\u8005\u80fd\u5920\u77e5\u9053\u76e1\u53ef\u80fd\u5730\u5c07\u5b89\u5168\u6027\u76f8\u95dc\u7684\u6b0a\u9650\u7d66\u6fc3\u7e2e\u5230\u6700\u5c0f\uff0c\u6e1b\u5c11\u88ab\u60e1\u610f\u653b\u64ca\u6642\u80fd\u5920\u9020\u6210\u7684\u50b7\u5bb3\u3002\n\u8209\u4f8b\u4f86\u8aaa\u91dd\u5c0d ",(0,i.kt)("inlineCode",{parentName:"p"},"kubernetes-dashboard")," \u7684\u90e8\u7f72\uff0c\u5f97\u5230\u4e0b\u5217\u7d50\u679c\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'kubernetes-dashboard kubesec.io score 7\n-----------------\nAdvise\n1. containers[] .securityContext .runAsNonRoot == true\nForce the running image to run as a non-root user to ensure least privilege\n2. containers[] .securityContext .capabilities .drop\nReducing kernel capabilities available to a container limits its attack surface\n3. containers[] .securityContext .readOnlyRootFilesystem == true\nAn immutable root filesystem can prevent malicious binaries being added to PATH and increase attack cost\n4. containers[] .securityContext .runAsUser > 10000\nRun as a high-UID user to avoid conflicts with the host\'s user table\n5. containers[] .securityContext .capabilities .drop | index("ALL")\nDrop all capabilities and add only those required to reduce syscall attack surface\n')),(0,i.kt)("p",null,"\u5176\u5efa\u8b70\u5927\u6982\u5982\u4e0b"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"\u4e0d\u8981\u7528 ",(0,i.kt)("inlineCode",{parentName:"li"},"Root"),"\u53bb\u904b\u884c\uff0c\u61c9\u8a72\u4fee\u6539 Container \u6539\u6210 ",(0,i.kt)("inlineCode",{parentName:"li"},"non-root")," \u5c31\u53ef\u4ee5\u57f7\u884c"),(0,i.kt)("li",{parentName:"ol"},"Linux Capabilityes \u61c9\u8a72\u8981\u79fb\u9664\u6389\u6c92\u6709\u7528\u5230\u7684\u90e8\u5206"),(0,i.kt)("li",{parentName:"ol"},"\u91dd\u5c0d ",(0,i.kt)("inlineCode",{parentName:"li"},"/")," Root File System \u61c9\u8a72\u53ea\u80fd\u5920\u552f\u7368\u5c31\u597d"),(0,i.kt)("li",{parentName:"ol"},"\u57f7\u884c User \u7684 UID \u61c9\u8a72\u8981\u8d85\u904e 10000\uff0c\u53ef\u4ee5\u907f\u514d\u8a72 UID \u8207\u672c\u6a5f\u7aef\u7684 Host \u885d\u7a81(\u4e3b\u8981\u662f\u56e0\u70ba User Namespace \u9084\u6c92\u6709\u5b8c\u5168\u5be6\u4f5c\u65bc ",(0,i.kt)("inlineCode",{parentName:"li"},"k8s")," container \u4e2d)")),(0,i.kt)("h3",{id:"run-containers-as-a-non-root-user"},"Run Containers as a Non-Root User"),(0,i.kt)("p",null,"\u4f5c\u8005\u8aaa\u9053\uff0c\u5927\u90e8\u5206\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"Root")," \u53bb\u904b\u884c\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Container")," \u61c9\u7528\u7a0b\u5f0f\u5176\u5be6\u6839\u672c\u90fd\u4e0d\u9700\u8981 ",(0,i.kt)("inlineCode",{parentName:"p"},"Root")," \u9019\u9ebc\u5927\u7684\u6b0a\u9650\uff0c\u4ee5 ",(0,i.kt)("inlineCode",{parentName:"p"},"Root")," \u8eab\u4efd\u53bb\u57f7\u884c\u64c1\u6709\u7684\u6b0a\u9650\u5df2\u7d93\u8d85\u904e\u7684\u8a72\u61c9\u7528\u7a0b\u5f0f\u771f\u6b63\u9700\u8981\u7684\u6b0a\u9650\uff0c\u9019\u6a23\u7684\u8a2d\u5b9a\u6703\u8b93\u4efb\u4f55\u60e1\u610f\u7684\u653b\u64ca\u8005\u5728\u6210\u529f\u7a81\u5165\u5f8c\u6709\u66f4\u5927\u7684\u6b0a\u9650\u53bb\u5c0d\u7cfb\u7d71\u9020\u6210\u66f4\u5927\u7684\u50b7\u5bb3\u3002"),(0,i.kt)("p",null,"\u9996\u5148\uff0c\u76ee\u524d\u7684 Linux \u5728\u91dd\u5c0d\u6a94\u6848\u6b0a\u9650\u7684\u90e8\u5206\u9810\u8a2d\u9084\u662f\u63a1\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"\u81ea\u4e3b\u5f0f\u5b58\u53d6\u63a7\u5236 (Discretionary Access Control, DAC)")," \u9019\u7a2e\u4f9d\u64da\u6a94\u6848\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"User/Group UID/GID")," \u5c0d\u61c9\u7684\u65b9\u5f0f\u4f86\u5224\u5225\u662f\u5426\u6709\u6b0a\u9650\u9032\u884c\u8b80\u5beb\u3002"),(0,i.kt)("p",null,"\u540c\u6642\uff0c\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"Kubernetes")," \u7684\u74b0\u5883\u4e0b\uff0c\u5275\u5efa\u5404\u5f0f\u5404\u6a23\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Container")," \u7684\u540c\u6642\u4e26\u6c92\u6709\u555f\u52d5",(0,i.kt)("inlineCode",{parentName:"p"},"User namespace")," \u7684\u9694\u96e2\uff0c\u9019\u610f\u5473\u8005\u5bb9\u5668\u5167\u4f7f\u7528\u8005\u7684ID (UID) \u5be6\u969b\u4e0a\u662f\u53ef\u4ee5\u5c0d\u61c9\u5230\u5916\u9762\u7bc0\u9ede\u4e0a\u7684\u4f7f\u7528\u8005\u8cc7\u6599\u96c6\u4e2d\u3002"),(0,i.kt)("p",null,"\u4ee5\u5be6\u969b\u7684\u6848\u4f8b\u4f86\u8aaa\u660e\u4e0a\u8ff0\u7684\u60c5\u6cc1\u5c31\u662f\u82e5\u4ee5 ",(0,i.kt)("inlineCode",{parentName:"p"},"Root")," \u7684\u8eab\u4efd\u53bb\u904b\u884c\u4e00\u500b\u5bb9\u5668\u65bc ",(0,i.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u96c6\u7fa4\u4e4b\u4e2d\uff0c\u5728\u5c0d\u61c9\u7684\u5de5\u4f5c\u7bc0\u9ede\u4e0a\u53ef\u4ee5\u89c0\u5bdf\u5230\u5be6\u969b\u4e0a\u4e5f\u662f\u7528\u4e00\u500b",(0,i.kt)("inlineCode",{parentName:"p"},"Root"),"\u7684\u8eab\u4efd\u53bb\u904b\u884c\u8a72\u5bb9\u5668\u7684\u61c9\u7528\u7a0b\u5f0f\u3002\n\u4ee5\u4e0b\u9762\u7684\u7bc4\u4f8b\u4f86\u8aaa\uff0c\u6211\u5011\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u7bc0\u9ede\u4e0a\u53ef\u4ee5\u89c0\u5bdf\u5230 ",(0,i.kt)("inlineCode",{parentName:"p"},"coredns")," \u9019\u500b ",(0,i.kt)("inlineCode",{parentName:"p"},"pod")," \u5be6\u969b\u4e0a\u662f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"root")," \u8eab\u4efd\u5728\u7bc0\u9ede\u4e0a\u53bb\u904b\u884c\u5c0d\u61c9\u7684\u61c9\u7528\u7a0b\u5f0f\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ps axuw |grep dns\nvagrant   4656  0.0  0.0  12916   936 pts/3    S+   07:38   0:00 grep --color=auto dns\nroot      7886  0.2  0.5  45224 21924 ?        Ssl  Jul27   5:56 /coredns -conf /etc/coredns/Corefile\nroot      8011  0.2  0.5  45224 22180 ?        Ssl  Jul27   6:04 /coredns -conf /etc/coredns/Corefile\n")),(0,i.kt)("p",null,"\u96d6\u7136\u76ee\u524d\u5df2\u7d93\u6709\u5f88\u591a\u7684\u6280\u8853\u88ab\u63d0\u51fa\u4f86\u907f\u514d ",(0,i.kt)("inlineCode",{parentName:"p"},"Container")," \u5167\u7684\u61c9\u7528\u7a0b\u5f0f\u53ef\u4ee5\u7a81\u7834\u9650\u5236\u9032\u800c\u5f71\u97ff\u5916\u90e8\u5bbf\u4e3b\u6a5f\u4e0a\u9762\u7684\u8cc7\u6e90\uff0c\u4f46\u662f\u4f5c\u8005\u8a8d\u70ba\u80fd\u5920\u907f\u514d\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"Root")," \u53bb\u57f7\u884c\u9084\u662f\u907f\u514d\u4f7f\u7528\uff0c\u7562\u7adf\u5b89\u5168\u6027\u9019\u7a2e\u6771\u897f\u6c92\u6709\u5b8c\u7f8e\u7684\u4e00\u5929\u3002"),(0,i.kt)("p",null,"\u6b64\u5916\uff0c\u5927\u90e8\u5206\u7684\u5bb9\u5668\u61c9\u7528\u7a0b\u5f0f\u90fd\u6703\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"Root")," \u7684\u8eab\u4efd\u57f7\u884c\u7b2c\u4e00\u500b\u61c9\u7528\u7a0b\u5f0f\uff0c\u4e5f\u5c31\u662f ",(0,i.kt)("inlineCode",{parentName:"p"},"PID=1")," \u7684\u61c9\u7528\u7a0b\u5e8f\u3002\u5982\u679c\u8a72\u61c9\u7528\u7a0b\u5f0f\u88ab\u653b\u64ca\u8005\u638c\u63a7\u4e86\u4e5f\u5c31\u610f\u5473\u8005\u653b\u64ca\u8005\u7372\u5f97\u4e86 ",(0,i.kt)("inlineCode",{parentName:"p"},"Root"),"\u7684\u6b0a\u9650\uff0c\u56e0\u6b64\u653b\u64ca\u8005\u5c31\u80fd\u5920\u57f7\u884c\u66f4\u9032\u4e00\u6b65\u7684\u64cd\u4f5c\u3002"),(0,i.kt)("p",null,"\u6587\u4e2d\u7279\u5225\u63d0\u53ca\u4e00\u7bc7\u6587\u7ae0 ",(0,i.kt)("a",{parentName:"p",href:"https://engineering.bitnami.com/articles/running-non-root-containers-on-openshift.html"},"Running Non-Root Containers On Openshift"),", \u8aaa\u5230 ",(0,i.kt)("inlineCode",{parentName:"p"},"Bitnami")," \u5c07\u4ed6\u5011\u7528\u5230\u7684 Container \u5f9e ",(0,i.kt)("inlineCode",{parentName:"p"},"Root")," \u8f49\u79fb\u5230 ",(0,i.kt)("inlineCode",{parentName:"p"},"Non-Root")," \u7684\u904e\u7a0b\u4ee5\u53ca\u65b9\u6cd5\uff0c\u4e26\u4e14\u8aaa\u660e\u70ba\u4ec0\u9ebc\u8981\u8f49\u79fb\u5230 ",(0,i.kt)("inlineCode",{parentName:"p"},"Non-Root")," \u7684\u57f7\u884c\u74b0\u5883\u3002"),(0,i.kt)("p",null,"\u6700\u5f8c\uff0c\u4f5c\u8005\u5728\u6b64\u63d0\u5230\u4e86 ",(0,i.kt)("inlineCode",{parentName:"p"},"kubernetes")," v1.11 \u7684\u65b0\u529f\u80fd (PodSecuurityPolicy),\n\u4f7f\u7528\u4e86\u4e00\u500b\u7c21\u55ae\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Yaml"),"  \u4f86\u63cf\u8ff0\u5982\u4f55\u9650\u5236\u6240\u6709\u7684 Pod \u90fd\u5fc5\u9808\u8981\u4ee5 ",(0,i.kt)("inlineCode",{parentName:"p"},"Non-Root")," \u7684\u8eab\u4efd\u4f86\u57f7\u884c"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"# Required to prevent escalations to root.\nallowPrivilegeEscalation: false\nrunAsUser:\n  # Require the container to run without root privileges.\n  rule: 'MustRunAsNonRoot'\n")),(0,i.kt)("p",null,"\u6700\u5f8c\u4f5c\u8005\u63d0\u5230\uff0c\u5230 ",(0,i.kt)("inlineCode",{parentName:"p"},"User Namespace")," \u9694\u96e2\u7684\u529f\u80fd\u5b8c\u6210\u4e4b\u524d\uff0c\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"Non-Root")," \u8eab\u4efd\u53bb\u904b\u884c\u5bb9\u5668\u4f9d\u7136\u662f\u4e00\u500b\u5fc5\u8981\u4e14\u4e0d\u53ef\u4ee5\u907f\u514d\u7684\u9078\u64c7\uff0c\u70ba\u4e86\u6574\u500b\u96c6\u7fa4\u4ee5\u53ca\u5bb9\u5668\u7684\u5b89\u5168\u6027\uff0c\u9084\u662f\u9700\u8981\u591a\u82b1\u6642\u9593\u9032\u884c\u8f49\u63db\u3002"),(0,i.kt)("h3",{id:"use-network-policies"},"Use Network Policies"),(0,i.kt)("p",null,"\u8b1b\u5b8c\u4e86\u8ddf\u5bb9\u5668\u90e8\u7f72\u7684\u5b89\u5168\u6027\u4e4b\u5f8c\uff0c\u63a5\u4e0b\u4f86\u8981\u63a2\u8a0e\u7684\u662f",(0,i.kt)("inlineCode",{parentName:"p"},"Pod"),"\u4e4b\u9593\u4e92\u76f8\u5b58\u53d6\u7684\u5b89\u5168\u6027\u554f\u984c\n\u5728\u9810\u8a2d\u7684\u60c5\u6cc1\u4e0b\uff0c",(0,i.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u96c6\u7fa4\u5167\u7684",(0,i.kt)("inlineCode",{parentName:"p"},"Pod"),"\u5f7c\u6b64\u90fd\u53ef\u4ee5\u4e92\u76f8\u900f\u904e\u7db2\u8def\u5b58\u53d6\uff0c\u5373\u4f7f\u662f\u4e0d\u540c ",(0,i.kt)("inlineCode",{parentName:"p"},"namespace")," \u7684\u5bb9\u6613\u4e5f\u53ef\u4ee5\u3002"),(0,i.kt)("p",null,"\u5982\u679c\u60f3\u8981\u9650\u5236",(0,i.kt)("inlineCode",{parentName:"p"},"Pod"),"\u9593\u7684\u7db2\u8def\u5b58\u53d6\uff0c\u9019\u908a\u53ef\u4ee5\u5f15\u5165 ",(0,i.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u63d0\u4f9b\u7684\u529f\u80fd ",(0,i.kt)("inlineCode",{parentName:"p"},"Network Policy"),", \u900f\u904e ",(0,i.kt)("inlineCode",{parentName:"p"},"Network Policy"),", \u7ba1\u7406\u8005\u53ef\u4ee5\u9650\u5236",(0,i.kt)("inlineCode",{parentName:"p"},"Pod"),"\u9593\u7684\u5b58\u53d6\u898f\u5247\uff0c\u9664\u4e86\u55ae\u7d14\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Pod")," \u4e4b\u5916\uff0c\u9084\u53ef\u4ee5\u9650\u5236\u9023\u63a5\u57e0,",(0,i.kt)("inlineCode",{parentName:"p"},"Namespace")," \u4ee5\u53ca\u76f8\u95dc\u7684\u7db2\u8def\u5354\u5b9a (TCP/UDP)."),(0,i.kt)("p",null,"\u4f46\u662f\u56e0\u70ba ",(0,i.kt)("inlineCode",{parentName:"p"},"Network Policy")," \u5be6\u969b\u4e0a\u4e26\u4e0d\u662f ",(0,i.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u81ea\u884c\u5be6\u4f5c\u7684\u5167\u5bb9\uff0c\u9019\u90e8\u5206\u8981\u4ef0\u8cf4 ",(0,i.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u96c6\u7fa4\u4f7f\u7528\u7684 CNI(Container Network Interface).\n\u5982\u679c\u60f3\u8981\u5690\u9bae\u7684\u4eba\u53ef\u4ee5\u8003\u616e\u4f7f\u7528\u770b\u770b ",(0,i.kt)("inlineCode",{parentName:"p"},"Calico"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"Weave")," \u7b49\u6709\u652f\u63f4 ",(0,i.kt)("inlineCode",{parentName:"p"},"Network Policy")," \u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"CNI"),"\u3002"),(0,i.kt)("p",null,"\u5c31\u5982\u540c\u4e4b\u524d\u6240\u63d0\u4f9b\u7684\u6982\u5ff5\u4e00\u6a23\uff0c\u91dd\u5c0d\u5b89\u5168\u6027\u7684\u90e8\u5206\u90fd\u662f\u76e1\u53ef\u80fd\u7684\u7e2e\u5c0f\u6b0a\u9650\uff0c\u975e\u5fc5\u8981\u7684\u5c31\u4e0d\u8981\u958b\u555f\u3002\n\u5957\u7528\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"Network Policy")," \u9019\u908a\u5247\u662f\u975e\u5fc5\u8981\u7684\u9023\u7dda\u90fd\u4e0d\u5141\u8a31\u901a\u904e\uff0c\u6240\u4ee5\u4e00\u958b\u59cb\u53ef\u4ee5\u5148\u8b1b\u6240\u6709\u7684\u9023\u7dda\u5168\u90e8\u90fd\u963b\u64cb\u8d77\u4f86\uff0c\u518d\u6839\u64da\u9700\u8981\u7684\u9023\u7dda\u4e00\u689d\u4e00\u689d\u7684\u898f\u5247\u6253\u958b\u3002\n\u9019\u6a23\u7684\u505a\u6cd5\u807d\u8d77\u4f86\u6709\u6548\uff0c\u7136\u800c\u537b\u975e\u5e38\u7684\u8907\u96dc\u8207\u7e41\u7463\uff0c\u56e0\u6b64\u9019\u908a\u53c8\u4ecb\u7d39\u53e6\u5916\u4e00\u500b\u6709\u8da3\u7684\u5de5\u5177\n",(0,i.kt)("a",{parentName:"p",href:"https://github.com/controlplaneio/netassert"},"netassert"),",\u4e00\u5957\u57fa\u65bc ",(0,i.kt)("inlineCode",{parentName:"p"},"nmap"),"\u7684\u5de5\u5177\uff0c\u53ef\u4ee5\u6839\u64da\u8a2d\u5b9a\u53bb\u6e2c\u8a66\u7576\u524d\u7684\u5c01\u5305\u8d70\u5411\u662f\u5426\u904b\u4f5c\uff0c\u85c9\u6b64\u6e1b\u5c11\u64b0\u5beb ",(0,i.kt)("inlineCode",{parentName:"p"},"NetworkPolicy")," \u6642\u8981\u4e0d\u505c\u7684\u6253\u6d41\u91cf\u4f86\u6e2c\u8a66\u7576\u524d\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Network Policy"),"\u662f\u5426\u5982\u8a2d\u5b9a\u822c\u904b\u4f5c\u3002"),(0,i.kt)("h3",{id:"scan-images-and-run-ids"},"Scan Images and Run IDS"),(0,i.kt)("p",null,"\u6700\u5f8c\u4e00\u500b\u8981\u63a2\u8a0e\u7684\u5b89\u5168\u90e8\u5206\u5247\u662f\u91dd\u5c0d ",(0,i.kt)("inlineCode",{parentName:"p"},"Image")," \u672c\u8eab\u9032\u884c\u5b89\u5168\u6027\u7684\u63a2\u8a0e\u3002\n\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u7684\u6d41\u7a0b\u4e2d\uff0c\u7576 ",(0,i.kt)("inlineCode",{parentName:"p"},"Pod")," \u672c\u8eab\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"yaml")," \u9001\u9032\u5230 ",(0,i.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u96c6\u7fa4\u4e2d\u5f8c\uff0c\u6703\u53d7\u5230 ",(0,i.kt)("inlineCode",{parentName:"p"},"Admission Controllers"),"  \u4e00\u7cfb\u5217\u7684\u6aa2\u67e5\uff0c\u53bb\u78ba\u4fdd\u9019\u6b21\u8cc7\u6e90\u7684\u90e8\u5c6c\u662f\u5408\u6cd5\u7684\u3002\n\u9019\u4e2d\u9593\u7684\u6aa2\u67e5\uff0c\u6709\u4e00\u500b\u975e\u5e38\u6709\u8da3\u7684\u5c31\u662f ",(0,i.kt)("inlineCode",{parentName:"p"},"webhook"),". \u900f\u904e ",(0,i.kt)("inlineCode",{parentName:"p"},"webhook"),", \u6211\u5011\u53ef\u4ee5\u900f\u904e\u7b2c\u4e09\u65b9\u7684\u61c9\u7528\u7a0b\u5f0f\u53bb\u6aa2\u67e5\u7576\u524d\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Image")," \u5b89\u5168\u8207\u5426\uff0c\u82e5\u4e0d\u5b89\u5168\u5c31\u963b\u64cb\u4e0b\u4f86\uff0c\u8b93\u8a72 ",(0,i.kt)("inlineCode",{parentName:"p"},"Pod")," \u6c92\u6709\u6a5f\u6703\u88ab\u90e8\u7f72\u5230 ",(0,i.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u96c6\u7fa4\u5167\u3002"),(0,i.kt)("p",null,"\u95dc\u65bc ",(0,i.kt)("inlineCode",{parentName:"p"},"webhook")," \u7684\u4f7f\u7528\u65b9\u6cd5\uff0c\u53ef\u4ee5\u53c3\u8003\u5b98\u65b9\u6587\u4ef6\u7684\u8aaa\u660e ",(0,i.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/reference/access-authn-authz/webhook/"},"kuubernetes webhook"),"."),(0,i.kt)("p",null,(0,i.kt)("del",{parentName:"p"},"\u81f3\u65bc\u6aa2\u67e5 ",(0,i.kt)("inlineCode",{parentName:"del"},"Image")," \u9019\u500b\u884c\u70ba\uff0c\u6211\u5011\u66ab\u6642\u7a31\u4f5c IDS(Intrusion Detection System), \u9019\u908a\u4f5c\u8005\u63d0\u4f9b\u4e86\u5169\u5957\u76f8\u95dc\u7684\u5de5\u5177\u4f86\u63d0\u4f9b\u9019\u985e\u578b\u7684\u670d\u52d9\uff0c\u5206\u5225\u662f ",(0,i.kt)("a",{parentName:"del",href:"https://github.com/coreos/clair"},"Clair")," \u4ee5\u53ca ",(0,i.kt)("a",{parentName:"del",href:"https://github.com/aquasecurity/microscanner"},"Micro Scanner"),".")),(0,i.kt)("p",null,"\u611f\u8b1d\u7db2\u53cb",(0,i.kt)("inlineCode",{parentName:"p"},"SCLin"),"\u6307\u6b63\uff0c\u4e0a\u8ff0\u7684\u8aaa\u6cd5\u6709\u8aa4\uff0c",(0,i.kt)("a",{parentName:"p",href:"https://github.com/coreos/clair"},"Clair")," \u4ee5\u53ca ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/aquasecurity/microscanner"},"Micro Scanner")," \u9019\u5169\u500b\u670d\u52d9\u90fd\u662f\u5305\u5728 Image \u968e\u6bb5\u57f7\u884c Vulnerability assessment \u4ee5\u53ca static code analysis \u7684\u5de5\u5177\u3002"),(0,i.kt)("p",null,"\u800c\u771f\u6b63\u7b26\u5408 IDS(Intrustion Detection System) \u7684\u5de5\u5177\u5247\u662f",(0,i.kt)("a",{parentName:"p",href:"https://github.com/draios/falco"},"Sysdig's Falco"),"\u9019\u500b Project.\n\u8a72 Project \u7684\u4ecb\u7d39\u5c31\u662f ",(0,i.kt)("inlineCode",{parentName:"p"},"Behavioral Activity Monitoring"),", \u8a72 IDS \u5de5\u5177\u80fd\u5920\u5075\u6e2c\u4e0b\u5217\u7684\u884c\u70ba"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"A shell is run inside a container"),(0,i.kt)("li",{parentName:"ul"},"A container is running in privileged mode, or is mounting a sensitive path like /proc from the host."),(0,i.kt)("li",{parentName:"ul"},"A server process spawns a child process of an unexpected type"),(0,i.kt)("li",{parentName:"ul"},"Unexpected read of a sensitive file (like /etc/shadow)"),(0,i.kt)("li",{parentName:"ul"},"A non-device file is written to /dev"),(0,i.kt)("li",{parentName:"ul"},"A standard system binary (like ls) makes an outbound network connection")),(0,i.kt)("p",null,"\u9664\u4e86\u4e0a\u8ff0\u5de5\u5177\u5916\uff0c\u4f5c\u8005\u4e5f\u63d0\u5230\u53e6\u5916\u4e00\u500b\u670d\u52d9\u7684\u6982\u5ff5, ",(0,i.kt)("a",{parentName:"p",href:"https://grafeas.io/"},"grafeas"),", \u8a72\u670d\u52d9\u6703\u7dad\u8b77\u4e00\u500b\u8cc7\u6599\u5eab\uff0c\u8a72\u8cc7\u6599\u5eab\u5167\u6703\u4ee5\u6bcf\u500b Image \u7684 Hash tag \u4f5c\u70ba\u7d22\u5f15\u8cc7\u6599\uff0c\u4f86\u8a18\u4f4f\u5c0d\u61c9\u7684 Image \u662f\u5426\u6709\u4efb\u4f55\u5b89\u5168\u6027\u7684\u554f\u984c\u3002\n\u6240\u4ee5\u53ef\u4ee5\u85c9\u7531\u6b64\u5de5\u5177\u4f86\u6383\u63cf\u7576\u524d\u6240\u5c6c\u7684 Image \u662f\u5426\u5167\u90e8\u7e7c\u627f\u4e86\u4efb\u4f55\u6709\u554f\u984c\u7684 Image \u4f86\u5224\u65b7\u662f\u5426\u6709\u4efb\u4f55\u5b89\u5168\u6027\u554f\u984c\u3002"),(0,i.kt)("p",null,"\u81f3\u65bc ",(0,i.kt)("inlineCode",{parentName:"p"},"Zero Day")," \u9019\u7a2e\u985e\u578b\u7684\u5b89\u5168\u6027\u554f\u984c\u4e5f\u6709\u76f8\u95dc\u7684\u5de5\u5177\u53ef\u4ee5\u5e6b\u5fd9\u8655\u7406\uff0c\u5982",(0,i.kt)("a",{parentName:"p",href:"https://www.twistlock.com/"},"twistlock"),",",(0,i.kt)("a",{parentName:"p",href:"https://www.aquasec.com/"},"aquasec")," \u4ee5\u53ca ",(0,i.kt)("a",{parentName:"p",href:"https://sysdig.com/product/secure/"},"Sysdig Secure")),(0,i.kt)("h2",{id:"the-future"},"The Future"),(0,i.kt)("p",null,"\u6700\u5f8c\uff0c\u5728\u5b78\u7fd2\u4e86 ",(0,i.kt)("inlineCode",{parentName:"p"},"Control-Plane")," \u4ee5\u53ca ",(0,i.kt)("inlineCode",{parentName:"p"},"Workload")," \u9019\u7a2e\u5169\u985e\u578b\u76f8\u95dc\u7684\u5b89\u5168\u6027\u9632\u8b77\u5f8c\uff0c\u4f5c\u8005\u8a8d\u70ba\u63a5\u4e0b\u4f86\u7684\u8da8\u52e2\u5247\u662f ",(0,i.kt)("inlineCode",{parentName:"p"},"Service Mesh"),"."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Service Mesh")," \u7c21\u55ae\u4f86\u8aaa\u5c31\u662f\u5728\u4e0d\u4fee\u6539\u6240\u6709\u5df2\u7d93\u5b58\u5728\u7684\u5fae\u670d\u52d9\u5bb9\u5668\u524d\u63d0\u4e0b\uff0c\u900f\u904e\u4e00\u4e9b\u7b2c\u4e09\u65b9\u7684\u61c9\u7528\u7a0b\u5f0f\u8b93\u4f60\u5728\u4e0d\u540c\u5bb9\u5668\u4e2d\u9593\u5efa\u7acb\u4e00\u689d\u52a0\u5bc6\u7684\u9023\u7dda\uff0c\u5c07\u9019\u4e9b\u670d\u52d9\u4e32\u8d77\u4f86\u3002"),(0,i.kt)("p",null,"\u6b64\u5916\u9019\u4e9b\u5bb9\u5668\u7684\u9023\u7dda\u4e2d\u4e5f\u6709\u6240\u8b02\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Zero Trust"),"\u9023\u7dda\uff0c\u85c9\u7531 ",(0,i.kt)("inlineCode",{parentName:"p"},"TLS")," \u76f8\u95dc\u7684\u52a0\u5bc6\u8655\u7406\u5b89\u5168\u6027\u554f\u984c\uff0c\u6e1b\u5c11\u4e86\u9700\u8981 ",(0,i.kt)("inlineCode",{parentName:"p"},"Network Policy")," \u984d\u5916\u7684\u5c01\u5305\u8655\u7406\u3002"),(0,i.kt)("p",null,"\u57fa\u672c\u4e0a\u73fe\u5728\u6700\u706b\u7d05\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Service Mesh")," \u670d\u52d9\u5c31\u662f ",(0,i.kt)("inlineCode",{parentName:"p"},"Istio"),"\uff0c\u9019\u90e8\u5206\u7684\u6982\u5ff5\u8207\u7528\u6cd5\u975e\u5e38\u9f90\u5927\uff0c\u77ed\u77ed\u4e00\u7bc7\u6587\u7ae0\u6c92\u6709\u8fa6\u6cd5\u8a34\u8aaa\u5b8c\u7562\uff0c\u4e4b\u5f8c\u82e5\u6709\u6642\u9593\u53ef\u4ee5\u518d\u597d\u597d\u7684\u5beb\u4e00\u7bc7\u6587\u7ae0\u4f86\u4ecb\u7d39 ",(0,i.kt)("inlineCode",{parentName:"p"},"Istio \u7684\u6982\u5ff5\u8207\u7528\u6cd5"),"\u3002"),(0,i.kt)("h2",{id:"summary"},"Summary"),(0,i.kt)("p",null,"\u7e3d\u7b97\u5c07\u9019\u4e00\u7bc7\u5b89\u5168\u6027\u76f8\u95dc\u7684\u6587\u7ae0\u7d66\u5538\u5b8c\u4e86\uff0c\u88e1\u9762\u7684\u5167\u5bb9\u5176\u5be6\u5f88\u77ed\uff0c\u4f46\u662f\u9019 11 \u500b\u91cd\u9ede\u5176\u5be6\u6bcf\u4e00\u500b\u90fd\u53ef\u4ee5\u7368\u7acb\u5beb\u6210\u4e00\u7bc7\u6587\u7ae0\u4f86\u4ed4\u7d30\u63a2\u8a0e\u3002"),(0,i.kt)("p",null,"\u4f5c\u8005\u5c07\u6574\u500b\u5b89\u5168\u6027\u5206\u6210\u4e09\u500b\u90e8\u5206\uff0c\u7e3d\u5171 11 \u9ede\u4f86\u63a2\u8a0e\uff0c\u9019 11 \u9ede\u9664\u4e86\u4ecb\u7d39\u6982\u5ff5\u4e4b\u5916\uff0c\u4e5f\u90fd\u63d0\u4f9b\u4e86\u4e0d\u5c11\u76f8\u95dc kubernetes \u7684\u7528\u6cd5\u6216\u662f\u984d\u5916\u7684\u5de5\u5177\u4f86\u5354\u52a9\u5404\u5f0f\u5404\u6a23\u7684\u5b89\u5168\u6027\u554f\u984c\u3002"),(0,i.kt)("p",null,"\u6700\u5f8c\uff0c\u6211\u8a8d\u70ba\u5b89\u5168\u6027\u771f\u7684\u5f88\u91cd\u8981\uff0c\u5982\u679c\u4eca\u5929\u4f60\u8981\u63d0\u4f9b\u4e00\u500b",(0,i.kt)("inlineCode",{parentName:"p"},"kubernetes"),"\u5e73\u53f0\u4f9b\u5916\u90e8\u4f7f\u7528\u8005\u4f7f\u7528\u7684\u8a71\uff0c\u5728\u6700\u5f8c\u9032\u884c\u5230 ",(0,i.kt)("inlineCode",{parentName:"p"},"Production")," \u524d\u4e00\u5b9a\u8981\u82b1\u6642\u9593\u6ce8\u610f\u7576\u524d\u96c6\u7fa4\u5167\u7684\u5b89\u5168\u6027\u554f\u984c\uff0c\u5b58 ",(0,i.kt)("inlineCode",{parentName:"p"},"Control-Plane")," \u5148\u78ba\u4fdd\u57fa\u790e\u67b6\u8a2d\u7684\u5b89\u5168\uff0c\u63a5\u4e0b\u4f86\u5f9e ",(0,i.kt)("inlineCode",{parentName:"p"},"Workloads")," \u65b9\u9762\u53bb\u9650\u5236\u76f8\u95dc\u8cc7\u6e90\u90e8\u7f72\u7684\u6b0a\u9650\u554f\u984c\uff0c\u4f7f\u7528\u6700\u5c0f\u7684\u6b0a\u9650\u4f86\u57f7\u884c\u6240\u9700\u8981\u7684\u61c9\u7528\u7a0b\u5f0f\uff0c\u964d\u4f4e\u554f\u984c\u767c\u751f\u6642\u7684\u50b7\u5bb3\u3002"))}k.isMDXComponent=!0}}]);
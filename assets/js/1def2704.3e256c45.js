"use strict";(self.webpackChunkhwchiu=self.webpackChunkhwchiu||[]).push([[90075],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>c});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),s=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):p(p({},t),e)),n},d=function(e){var t=s(e.components);return r.createElement(l.Provider,{value:t},e.children)},k="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),k=s(n),m=a,c=k["".concat(l,".").concat(m)]||k[m]||u[m]||i;return n?r.createElement(c,p(p({ref:t},d),{},{components:n})):r.createElement(c,p({ref:t},d))}));function c(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,p=new Array(i);p[0]=m;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[k]="string"==typeof e?e:a,p[1]=o;for(var s=2;s<i;s++)p[s]=n[s];return r.createElement.apply(null,p)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},77268:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>p,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>s});var r=n(87462),a=(n(67294),n(3905));const i={title:"11\u500b\u4fdd\u8b77\u4f60 Kubernetes \u96c6\u7fa4\u7684\u6280\u5de7\u8207\u89c0\u5ff5(\u4e0a)",tags:["Kubernetes","Security"],date:new Date("2018-07-24T18:04:31.000Z"),description:'\u5728\u7ba1\u7406 Kubernetes \u96c6\u7fa4\u65b9\u9762\uff0c\u5927\u90e8\u5206\u7684\u73a9\u5bb6\u53ca\u7ba1\u7406\u8005\u4e00\u958b\u59cb\u6700\u5728\u610f\u7684\u4e00\u5b9a\u6703\u662f\u81ea\u5df1\u7684\u670d\u52d9\u80fd\u4e0d\u80fd\u5920\u9806\u5229\u904b\u884c\u8d77\u4f86\uff0c\u540c\u6642\u80fd\u4e0d\u80fd\u85c9\u7531 kubernetes \u7684\u8af8\u591a\u7279\u6027\uff0c\u5982 service/configmap/deployment/daemonset \u7b49\u5404\u5f0f\u5404\u6a23\u7684\u8cc7\u6e90\u4f86\u52a0\u5f37\u81ea\u8eab\u7684\u670d\u52d9\u80fd\u529b\u3002\u7136\u800c\u5c0d\u65bc\u4e00\u500b\u771f\u6b63\u904b\u884c\u7522\u54c1\u7684\u96c6\u7fa4\u4f86\u8aaa\u662f\u5b8c\u5168\u4e0d\u5920\u7684\uff0c\u9664\u4e86\u670d\u52d9\u7684\u529f\u80fd\u4ee5\u53ca\u7a69\u5b9a\u5916\uff0c\u9084\u6709\u8af8\u591a\u76f8\u95dc\u7684\u8b70\u984c\u90fd\u9700\u8981\u4e00\u4f75\u8003\u616e\u4e26\u4e14\u8655\u7406\u3002\u5728\u6b64\u8b70\u984c\u4e0b\u7279\u5225\u91cd\u8981\u7684\u5c31\u662f Security \u7684\u8655\u7406\uff0c Security \u8655\u7406\u7684\u4e0d\u7576\uff0c\u53ef\u80fd\u6703\u9020\u6210\u4f7f\u7528\u8005\u7684\u8cc7\u6599\u88ab\u7aca\u53d6\uff0c\u66f4\u56b4\u91cd\u751a\u81f3\u6574\u500b\u96c6\u6b0a\u7684\u7ba1\u7406\u6b0a\u9650\u90fd\u88ab\u5916\u4eba\u53d6\u5f97\u3002\u56e0\u6b64\u9019\u6b21\u7279\u5225\u5206\u4eab\u4e00\u7bc7 "11 Ways Not to Get Hacked" \u7684\u6587\u7ae0\uff0c\u91dd\u5c0d\u88e1\u9762\u63d0\u51fa\u7684 11 \u500b\u4fdd\u8b77\u597d\u4f60 kubernetes \u96c6\u7fa4\u7684\u65b9\u5411\u9032\u884c\u7814\u7a76\uff0c\u4e26\u4e14\u914d\u4e0a\u81ea\u5df1\u7684\u5fc3\u5f97\u8207\u6574\u7406\u3002'},p=void 0,o={unversionedId:"techPost/2018/k8s-security-11tips-i",id:"techPost/2018/k8s-security-11tips-i",title:"11\u500b\u4fdd\u8b77\u4f60 Kubernetes \u96c6\u7fa4\u7684\u6280\u5de7\u8207\u89c0\u5ff5(\u4e0a)",description:'\u5728\u7ba1\u7406 Kubernetes \u96c6\u7fa4\u65b9\u9762\uff0c\u5927\u90e8\u5206\u7684\u73a9\u5bb6\u53ca\u7ba1\u7406\u8005\u4e00\u958b\u59cb\u6700\u5728\u610f\u7684\u4e00\u5b9a\u6703\u662f\u81ea\u5df1\u7684\u670d\u52d9\u80fd\u4e0d\u80fd\u5920\u9806\u5229\u904b\u884c\u8d77\u4f86\uff0c\u540c\u6642\u80fd\u4e0d\u80fd\u85c9\u7531 kubernetes \u7684\u8af8\u591a\u7279\u6027\uff0c\u5982 service/configmap/deployment/daemonset \u7b49\u5404\u5f0f\u5404\u6a23\u7684\u8cc7\u6e90\u4f86\u52a0\u5f37\u81ea\u8eab\u7684\u670d\u52d9\u80fd\u529b\u3002\u7136\u800c\u5c0d\u65bc\u4e00\u500b\u771f\u6b63\u904b\u884c\u7522\u54c1\u7684\u96c6\u7fa4\u4f86\u8aaa\u662f\u5b8c\u5168\u4e0d\u5920\u7684\uff0c\u9664\u4e86\u670d\u52d9\u7684\u529f\u80fd\u4ee5\u53ca\u7a69\u5b9a\u5916\uff0c\u9084\u6709\u8af8\u591a\u76f8\u95dc\u7684\u8b70\u984c\u90fd\u9700\u8981\u4e00\u4f75\u8003\u616e\u4e26\u4e14\u8655\u7406\u3002\u5728\u6b64\u8b70\u984c\u4e0b\u7279\u5225\u91cd\u8981\u7684\u5c31\u662f Security \u7684\u8655\u7406\uff0c Security \u8655\u7406\u7684\u4e0d\u7576\uff0c\u53ef\u80fd\u6703\u9020\u6210\u4f7f\u7528\u8005\u7684\u8cc7\u6599\u88ab\u7aca\u53d6\uff0c\u66f4\u56b4\u91cd\u751a\u81f3\u6574\u500b\u96c6\u6b0a\u7684\u7ba1\u7406\u6b0a\u9650\u90fd\u88ab\u5916\u4eba\u53d6\u5f97\u3002\u56e0\u6b64\u9019\u6b21\u7279\u5225\u5206\u4eab\u4e00\u7bc7 "11 Ways Not to Get Hacked" \u7684\u6587\u7ae0\uff0c\u91dd\u5c0d\u88e1\u9762\u63d0\u51fa\u7684 11 \u500b\u4fdd\u8b77\u597d\u4f60 kubernetes \u96c6\u7fa4\u7684\u65b9\u5411\u9032\u884c\u7814\u7a76\uff0c\u4e26\u4e14\u914d\u4e0a\u81ea\u5df1\u7684\u5fc3\u5f97\u8207\u6574\u7406\u3002',source:"@site/docs/techPost/2018/k8s-security-11tips-i.md",sourceDirName:"techPost/2018",slug:"/techPost/2018/k8s-security-11tips-i",permalink:"/docs/techPost/2018/k8s-security-11tips-i",draft:!1,tags:[{label:"Kubernetes",permalink:"/docs/tags/kubernetes"},{label:"Security",permalink:"/docs/tags/security"}],version:"current",frontMatter:{title:"11\u500b\u4fdd\u8b77\u4f60 Kubernetes \u96c6\u7fa4\u7684\u6280\u5de7\u8207\u89c0\u5ff5(\u4e0a)",tags:["Kubernetes","Security"],date:"2018-07-24T18:04:31.000Z",description:'\u5728\u7ba1\u7406 Kubernetes \u96c6\u7fa4\u65b9\u9762\uff0c\u5927\u90e8\u5206\u7684\u73a9\u5bb6\u53ca\u7ba1\u7406\u8005\u4e00\u958b\u59cb\u6700\u5728\u610f\u7684\u4e00\u5b9a\u6703\u662f\u81ea\u5df1\u7684\u670d\u52d9\u80fd\u4e0d\u80fd\u5920\u9806\u5229\u904b\u884c\u8d77\u4f86\uff0c\u540c\u6642\u80fd\u4e0d\u80fd\u85c9\u7531 kubernetes \u7684\u8af8\u591a\u7279\u6027\uff0c\u5982 service/configmap/deployment/daemonset \u7b49\u5404\u5f0f\u5404\u6a23\u7684\u8cc7\u6e90\u4f86\u52a0\u5f37\u81ea\u8eab\u7684\u670d\u52d9\u80fd\u529b\u3002\u7136\u800c\u5c0d\u65bc\u4e00\u500b\u771f\u6b63\u904b\u884c\u7522\u54c1\u7684\u96c6\u7fa4\u4f86\u8aaa\u662f\u5b8c\u5168\u4e0d\u5920\u7684\uff0c\u9664\u4e86\u670d\u52d9\u7684\u529f\u80fd\u4ee5\u53ca\u7a69\u5b9a\u5916\uff0c\u9084\u6709\u8af8\u591a\u76f8\u95dc\u7684\u8b70\u984c\u90fd\u9700\u8981\u4e00\u4f75\u8003\u616e\u4e26\u4e14\u8655\u7406\u3002\u5728\u6b64\u8b70\u984c\u4e0b\u7279\u5225\u91cd\u8981\u7684\u5c31\u662f Security \u7684\u8655\u7406\uff0c Security \u8655\u7406\u7684\u4e0d\u7576\uff0c\u53ef\u80fd\u6703\u9020\u6210\u4f7f\u7528\u8005\u7684\u8cc7\u6599\u88ab\u7aca\u53d6\uff0c\u66f4\u56b4\u91cd\u751a\u81f3\u6574\u500b\u96c6\u6b0a\u7684\u7ba1\u7406\u6b0a\u9650\u90fd\u88ab\u5916\u4eba\u53d6\u5f97\u3002\u56e0\u6b64\u9019\u6b21\u7279\u5225\u5206\u4eab\u4e00\u7bc7 "11 Ways Not to Get Hacked" \u7684\u6587\u7ae0\uff0c\u91dd\u5c0d\u88e1\u9762\u63d0\u51fa\u7684 11 \u500b\u4fdd\u8b77\u597d\u4f60 kubernetes \u96c6\u7fa4\u7684\u65b9\u5411\u9032\u884c\u7814\u7a76\uff0c\u4e26\u4e14\u914d\u4e0a\u81ea\u5df1\u7684\u5fc3\u5f97\u8207\u6574\u7406\u3002'},sidebar:"techPost",previous:{title:"[Container Network Interface] Implement Your CNI In Golang",permalink:"/docs/techPost/2018/introduce-cni-iii"},next:{title:"11\u500b\u4fdd\u8b77\u4f60 Kubernetes \u96c6\u7fa4\u7684\u6280\u5de7\u8207\u89c0\u5ff5(\u4e0b)",permalink:"/docs/techPost/2018/k8s-security-11tips-ii"}},l={},s=[{value:"The Control Plane",id:"the-control-plane",level:2},{value:"TLS Everywhere",id:"tls-everywhere",level:3},{value:"Master Node",id:"master-node",level:4},{value:"Cross Nodes",id:"cross-nodes",level:4},{value:"TLS \u5e36\u4f86\u7684\u554f\u984c",id:"tls-\u5e36\u4f86\u7684\u554f\u984c",level:4},{value:"Enable RBAC with Least Privilege, Disable ABAC, and Monitor Logs",id:"enable-rbac-with-least-privilege-disable-abac-and-monitor-logs",level:3},{value:"Use Third Party Auth for API Server",id:"use-third-party-auth-for-api-server",level:3},{value:"Separate and Firewall your etcd Cluster",id:"separate-and-firewall-your-etcd-cluster",level:3},{value:"Rotate Encryption Keys",id:"rotate-encryption-keys",level:3},{value:"Summary",id:"summary",level:2}],d={toc:s},k="wrapper";function u(e){let{components:t,...n}=e;return(0,a.kt)(k,(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"\u672c\u7bc7\u6587\u7ae0\u7684\u539f\u6587\u70ba ",(0,a.kt)("a",{parentName:"p",href:"https://kubernetes.io/blog/2018/07/18/11-ways-not-to-get-hacked/#11-run-a-service-mesh"},"11 Ways Not to Get Hacked")),(0,a.kt)("p",null,"\u672c\u6587\u4f5c\u8005\u5c07\u9019 11 \u500b\u6280\u5de7\u8207\u89c0\u5ff5\u5206\u6210\u4e09\u5927\u90e8\u5206\u4f86\n\u5206\u5225\u662f"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"The Control Plane"),(0,a.kt)("li",{parentName:"ol"},"Workloads"),(0,a.kt)("li",{parentName:"ol"},"The Future")),(0,a.kt)("p",null,"\u6bcf\u500b\u90e8\u5206\u9664\u4e86\u6587\u7ae0\u5167\u5bb9\u7684\u6558\u8ff0\u5916\uff0c\u5176\u5be6\u4e5f\u90fd\u88dc\u5145\u4e86\u4e0d\u5c11\u76f8\u95dc\u7684\u8cc7\u6e90\u8207\u88dc\u5145\u3002\n\u6240\u4ee5\u63a5\u4e0b\u4f86\u6211\u6703\u4f7f\u7528\u5169\u7bc7\u6587\u7ae0\u7684\u65b9\u5f0f\u4f86\u8a18\u9304\u9019 11 \u500b\u89c0\u5ff5/\u6280\u5de7\u4e26\u4e14\u52a0\u4e0a\u6211\u500b\u4eba\u7684\u770b\u6cd5"),(0,a.kt)("p",null,"\u672c\u7bc7\u6587\u7ae0\u5f8c\u7e8c ",(0,a.kt)("a",{parentName:"p",href:"https://www.hwchiu.com/k8s-security-11tips-ii.html#more"},"11\u500b\u4fdd\u8b77\u4f60 Kubernetes \u96c6\u7fa4\u7684\u6280\u5de7\u8207\u89c0\u5ff5(\u4e0b)")),(0,a.kt)("h2",{id:"the-control-plane"},"The Control Plane"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"The Control Plane")," \u6240\u4ee3\u8868\u7684\u5c31\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"Kubernetes")," \u7684\u63a7\u5236\u9762\uff0c\u5176\u64c1\u6709\u7684\u6b0a\u529b\u8ddf\u80fd\u529b\u975e\u5e38\u7684\u5de8\u5927\uff0c\u5f9e\u6700\u57fa\u672c\u8cc7\u6e90\u7684\u5275\u5efa\u8207\u76e3\u63a7 (Pod/Deployment/Service)\uff0c\u8cc7\u6e90\u7684\u8abf\u5ea6(Pod Schedule) \u4ee5\u53ca\u5305\u62ec\u6240\u6709 Kubernetes \u4e0a\u8cc7\u6e90\u7684\u5b58\u53d6 (Secret/ConfigMap)\u3002"),(0,a.kt)("p",null,"\u7531\u65bc ",(0,a.kt)("inlineCode",{parentName:"p"},"The Control Plane")," \u9019\u908a\u80fd\u505a\u7684\u4e8b\u60c5\u5be6\u5728\u592a\u591a\uff0c\u4e00\u65e6\u8b93\u975e\u7cfb\u7d71\u7ba1\u7406\u8005\u6709\u6a5f\u6703\u63a5\u89f8\u5230\u9019\u500b\u90e8\u5206\uff0c\u5c31\u6709\u6a5f\u6703\u5c0d\u6574\u500b\u96c6\u7fa4\u9020\u6210\u610f\u60f3\u4e0d\u5230\u4e0d\u53ef\u633d\u56de\u7684\u4e8b\u60c5\u3002\n\u56e0\u6b64\u7b2c\u4e00\u500b\u7ae0\u7bc0\u6240\u8981\u63cf\u8ff0\u7684\u5c31\u662f\u5982\u4f55\u5b89\u5168\u7684\u9632\u8b77\u4f60\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes"),"\uff0c\u8b93\u4efb\u4f55\u60e1\u610f\u653b\u64ca\u8005\u6c92\u6709\u6a5f\u6703\u53bb\u64cd\u4f5c\u4f60\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u96c6\u7fa4\u3002"),(0,a.kt)("h3",{id:"tls-everywhere"},"TLS Everywhere"),(0,a.kt)("p",null,"\u9019\u908a\u7684\u539f\u5247\u975e\u5e38\u7c21\u55ae\uff0c\u53ea\u8981\u4efb\u4f55\u5167\u90e8\u5143\u4ef6\u4e4b\u9593\u7684\u6e9d\u901a\u6709\u652f\u63f4 TLS, \u5c31\u4f7f\u7528 TLS\uff0c\u6c92\u6709\u4efb\u4f55\u4e0d\u7528\u7684\u7406\u7531\n\u900f\u904e ",(0,a.kt)("a",{parentName:"p",href:"https://zh.wikipedia.org/wiki/%E5%82%B3%E8%BC%B8%E5%B1%A4%E5%AE%89%E5%85%A8%E6%80%A7%E5%8D%94%E5%AE%9A"},"TLS")," \u80fd\u5920\u78ba\u4fdd\u9019\u689d\u9023\u7dda\u53d7\u5230\u4fdd\u8b77\uff0c\u9664\u4e86\u53ef\u4ee5\u9a57\u8b49 Server/Client \u5f7c\u6b64\u7684\u6df1\u5206\u5916\uff0c\u4e5f\u80fd\u5920\u907f\u514d\u50b3\u8f38\u5167\u5bb9\u88ab\u7aca\u807d\u3002"),(0,a.kt)("p",null,"\u4e8b\u5be6\u4e0a\u6709\u63d0\u4f9b ",(0,a.kt)("inlineCode",{parentName:"p"},"TLS")," \u529f\u80fd\u9023\u7dda\u7684\u5143\u4ef6\u4e5f\u90fd\u6709\u63d0\u4f9b\u6240\u8b02\u7684\u985e ",(0,a.kt)("inlineCode",{parentName:"p"},"Insecure")," \u65b9\u5f0f\u9023\u7dda\uff0c\u5c31\u662f\u4e0d\u4f9d\u8cf4 ",(0,a.kt)("inlineCode",{parentName:"p"},"TLS")," \u4f86\u9032\u884c\u9023\u7dda\u800c\u662f\u76f4\u63a5\u9032\u884c\u7d14\u6587\u5b57\u50b3\u9001\u3002\n\u5c0d\u65bc\u5f88\u591a\u4eba\u4f86\u8aaa\uff0c\u5176\u5be6\u6703\u89ba\u5f97\u8981\u8a2d\u5b9a ",(0,a.kt)("inlineCode",{parentName:"p"},"Secure")," \u9023\u7dda\u5f88\u9ebb\u7169\uff0c\u5728 Server \u7aef\u8981\u7522\u751f\u6e96\u5099\u597d\u6191\u8b49\uff0c\u800c\u4e14\u5c0d\u65bc\u6bcf\u500b\u9023\u7dda\u7684 Client \u7aef\u90fd\u8981\u6e96\u5099\u597d\u5c0d\u61c9\u7684\u6191\u8b49\uff0c\u8b93\u6574\u500b\u9023\u7dda\u53ef\u4ee5\u6b63\u5e38\u904b\u884c\u3002\n\u6211\u81ea\u5df1\u662f\u89ba\u5f97\u9664\u4e86\u9032\u884c\u7814\u7a76\u65b9\u4fbf\u5feb\u901f\u6e2c\u8a66\u4e4b\u5916\uff0c\u5176\u4ed6\u7684\u60c5\u5883\u61c9\u8a72\u90fd\u8981\u76e1\u53ef\u80fd\u7684\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"Secure")," \u9023\u7dda\u4f86\u78ba\u4fdd\u9023\u7dda\u5b89\u5168\u3002"),(0,a.kt)("p",null,"\u90a3\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"Kubernetes")," \u4e2d\uff0c\u5230\u5e95\u6709\u591a\u5c11\u500b\u5143\u4ef6\u4e4b\u9593\u6709 ",(0,a.kt)("inlineCode",{parentName:"p"},"TLS")," \u9023\u7dda\u7684\u5b58\u5728?"),(0,a.kt)("p",null,"\u6839\u64da ",(0,a.kt)("a",{parentName:"p",href:"https://docs.google.com/presentation/d/1Gp-2blk5WExI_QR59EUZdwfO2BWLJqa626mK2ej-huo/edit#slide=id.g1e639c415b_0_56"},"Lucas K\xe4ldstr\xf6m")," \u65bc ",(0,a.kt)("a",{parentName:"p",href:"https://docs.google.com/presentation/d/1Gp-2blk5WExI_QR59EUZdwfO2BWLJqa626mK2ej-huo/edit#slide=id.g1e639c415b_0_56"},"kubeadm Cluster Creation Internals: From Self-Hosting to Upgradability and HA")," \u6240\u63cf\u7e6a\u7684\u6d41\u7a0b\u5716\uff0c\u6211\u5011\u53ef\u4ee5\u6e05\u695a\u5730\u770b\u5230\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u5143\u4ef6\u5f7c\u6b64\u4e4b\u9593\u7684\u6e9d\u901a\uff0c\u9664\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"Kubernetes")," \u672c\u8eab\u5143\u4ef6\u4e4b\u5916\uff0c\u4e5f\u5305\u542b\u4e86\u7b2c\u4e09\u65b9\u7684\u63d2\u4ef6\u7684\u958b\u767c\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://i.imgur.com/eovKE0P.png",alt:null})),(0,a.kt)("h4",{id:"master-node"},"Master Node"),(0,a.kt)("p",null,"\u9996\u5148\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Master")," \u4e0a\u9762\u7684\u5143\u4ef6\u53ef\u4ee5\u5206\u6210\u5169\u7a2e\u4ea4\u6d41\u65b9\u5f0f\uff0c\u5206\u5225\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"gRPC")," \u4ee5\u53ca ",(0,a.kt)("inlineCode",{parentName:"p"},"Protobuf"),"\n\u9019\u908a\u6211\u8a8d\u70ba\u662f\u56e0\u70ba ",(0,a.kt)("inlineCode",{parentName:"p"},"etcd")," \u672c\u8eab\u4e0d\u662f\u5c6c\u65bc ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u81ea\u884c\u958b\u767c\u7684\u5143\u4ef6\uff0c\u6240\u4ee5\u5728\u8207\u4e4b\u6e9d\u901a\u4e0a\u5c31\u6703\u5fc5\u9808\u4f9d\u8cf4\u672c\u8eab\u5df2\u7d93\u5b58\u5728\u7684\u683c\u5f0f\u8207\u898f\u7bc4\u3002\n\u7531\u65bc ",(0,a.kt)("a",{parentName:"p",href:"https://grpc.io/"},"gRPC")," \u672c\u8eab\u662f\u57fa\u65bc ",(0,a.kt)("inlineCode",{parentName:"p"},"HTTP2")," \u7684\u65b9\u5f0f\u4f86\u50b3\u8f38\u5c01\u5305\uff0c\u6240\u4ee5\u900f\u904e ",(0,a.kt)("inlineCode",{parentName:"p"},"TLS")," \u52a0\u5bc6\u662f\u5b8c\u5168\u6c92\u6709\u554f\u984c\u7684"),(0,a.kt)("p",null,"\u800c\u4e0a\u5716\u4e2d\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"Controller Manager"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"API Server")," \u4ee5\u53ca ",(0,a.kt)("inlineCode",{parentName:"p"},"Scheduler")," \u9019\u4e9b ",(0,a.kt)("inlineCode",{parentName:"p"},"Kubernetes")," \u81ea\u884c\u958b\u767c\u7684\u7d44\u4ef6\u5f7c\u6b64\u4e4b\u9593\u900f\u904e ",(0,a.kt)("inlineCode",{parentName:"p"},"Protobuf")," \u4f86\u898f\u7bc4\u9019\u4e9b\u683c\u5f0f\uff0c\u90fd\u53ef\u4ee5\u5728\u9019\u908a ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/kubernetes/community/blob/master/contributors/design-proposals/api-machinery/protobuf.md"},"design-proposals")," \u770b\u5230\u958b\u767c\u8207\u8a2d\u8a08\u7684\u898f\u7bc4\u3002\n\u76ee\u524d\u4e0a\u8ff0\u4e09\u500b\u5143\u4ef6\u4e92\u76f8\u6e9d\u901a\u4e5f\u662f\u652f\u63f4 ",(0,a.kt)("inlineCode",{parentName:"p"},"TLS")," \u9023\u7dda\u7684\uff0c\u5982\u679c\u5920\u719f\u6089 ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u624b\u628a\u624b\u5efa\u7f6e\u904e\u7a0b\u7684\u8b80\u8005\u5c31\u77e5\u9053\u6574\u500b\u96c6\u7fa4\u5167\u6709\u975e\u5e38\u591a\u7684 key/cert \u7b49\u8cc7\u8a0a\u8981\u8a2d\u5b9a\u8207\u914d\u7f6e\uff0c\u975e\u5e38\u7684\u8907\u96dc\u3002"),(0,a.kt)("h4",{id:"cross-nodes"},"Cross Nodes"),(0,a.kt)("p",null,"\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u7684\u67b6\u69cb\u4e0b\uff0c\u9664\u4e86\u6240\u8b02\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"master")," \u7bc0\u9ede\u5916\uff0c\u9084\u6709\u6240\u8b02\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"minion")," \u7bc0\u9ede\uff0c\u800c ",(0,a.kt)("inlineCode",{parentName:"p"},"minion")," \u5247\u6703\u900f\u904e\u6a5f\u5668\u4e0a\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"kubelet")," \u8207 ",(0,a.kt)("inlineCode",{parentName:"p"},"API Server")," \u9032\u884c\u6e9d\u901a\u3002\n\u5982\u540c\u4e0a\u8ff0\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"Protobuf")," \u7684\u8d70\u6cd5\uff0c\u9019\u908a\u4e5f\u6709\u516c\u958b\u7684\u8a2d\u8a08\u898f\u7bc4\u4ee5\u53ca ",(0,a.kt)("inlineCode",{parentName:"p"},"API"),"\uff0c\u6700\u5f8c\u6e9d\u901a\u7684\u90e8\u5206\u4e5f\u652f\u63f4 ",(0,a.kt)("inlineCode",{parentName:"p"},"TLS")," \u52a0\u5bc6\u3002"),(0,a.kt)("p",null,"\u5716\u7247\u4e2d\u9084\u6709\u63d0\u5230 ",(0,a.kt)("inlineCode",{parentName:"p"},"CNI"),",",(0,a.kt)("inlineCode",{parentName:"p"},"CRI"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"OCI")," \u7b49\u9019\u90e8\u5206\u5247\u662f\u5bb9\u5668\u76f8\u95dc\u8cc7\u6e90\u6a19\u6e96\u5316\u4ecb\u9762\uff0c\u5f9e",(0,a.kt)("inlineCode",{parentName:"p"},"Network"),",",(0,a.kt)("inlineCode",{parentName:"p"},"RunTime"),"\u7b49\u4e0d\u540c\u6a19\u6e96\uff0c\u5be6\u969b\u4e0a\u4f7f\u7528\u8005\u6703\u4f7f\u7528\u54ea\u4e9b\u90fd\u662f\u53ef\u4ee5\u81ea\u884c\u62bd\u63db\u7684\u3002\n\u6b64\u5916\uff0c\u4e0d\u5c11\u7db2\u8def\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"CNI")," \u4e5f\u90fd\u6709\u900f\u904e ",(0,a.kt)("inlineCode",{parentName:"p"},"etcd")," \u7684\u65b9\u5f0f\u53bb\u5b58\u53d6\u8cc7\u6599\uff0c\u9019\u610f\u5473\u8005\u5c0d\u65bc\u6bcf\u500b ",(0,a.kt)("inlineCode",{parentName:"p"},"CNI")," \u4e5f\u90fd\u5fc5\u9808\u8981\u5e6b\u5fd9\u6e96\u5099\u76f8\u95dc\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"etcd")," \u6191\u8b49\u4f86\u5efa\u7acb ",(0,a.kt)("inlineCode",{parentName:"p"},"TLS")," \u9023\u7dda\uff0c\u5343\u842c\u4e0d\u53ef\u4ee5\u70ba\u4e86\u65b9\u4fbf\u5c31\u6368\u68c4\u5b89\u5168\u6027\u3002"),(0,a.kt)("h4",{id:"tls-\u5e36\u4f86\u7684\u554f\u984c"},"TLS \u5e36\u4f86\u7684\u554f\u984c"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"TLS")," \u807d\u8d77\u4f86\u5f88\u7f8e\u597d\uff0c\u5be6\u969b\u4e0a\u5728\u90e8\u5c6c\u7684\u6642\u5019\u537b\u6703\u5e36\u4f86\u4e0d\u5c11\u56f0\u96e3\uff0c\u6700\u660e\u986f\u7684\u5c31\u662f\u52d5\u614b\u589e\u52a0\u7bc0\u9ede\u9700\u8981\u984d\u5916\u7684\u5fc3\u529b\u53bb\u8655\u7406\u6191\u8b49\u76f8\u95dc\u7684\u554f\u984c\u3002\n\u70ba\u4e86\u89e3\u6c7a\u9019\u500b\u554f\u984c\uff0c\u53ef\u4ee5\u53c3\u8003\u9019\u7bc7\u7531 ",(0,a.kt)("a",{parentName:"p",href:"https://medium.com/@toddrosner"},"Todd Rosner\n")," \u64b0\u5beb\u7684\u9019\u7bc7\u6587\u7ae0 ",(0,a.kt)("a",{parentName:"p",href:"https://medium.com/@toddrosner/kubernetes-tls-bootstrapping-cf203776abc7"},"Kubernetes TLS bootstrapping"),", \u88e1\u9762\u6709\u8a73\u7d30\u4ecb\u7d39 ",(0,a.kt)("inlineCode",{parentName:"p"},"Kubernetes TLS bootstrapiing")," \u7684\u539f\u7406\u8207\u8a2d\u8a08\u4ee5\u53ca\u5982\u4f55\u7528\u4f86\u89e3\u6c7a\u52d5\u614b\u64f4\u5145\u7bc0\u9ede\u7684\u554f\u984c\uff0c\u975e\u5e38\u503c\u5f97\u4e00\u8b80\u3002"),(0,a.kt)("h3",{id:"enable-rbac-with-least-privilege-disable-abac-and-monitor-logs"},"Enable RBAC with Least Privilege, Disable ABAC, and Monitor Logs"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Kubernetes")," \u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"Authorization")," \u65b9\u9762\u4e5f\u6709\u8a31\u591a\u7684\u5b89\u5168\u554f\u984c\u9700\u8981\u6ce8\u610f\uff0c\u60f3\u8981\u77ad\u89e3\u5168\u6587\u53ef\u4ee5\u76f4\u63a5\u53c3\u8003\u5b98\u7db2\u6587\u4ef6 ",(0,a.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/reference/access-authn-authz/authorization/"},"Authorization Overview")),(0,a.kt)("p",null,"\u7c21\u55ae\u4f86\u8aaa\uff0c\u76ee\u524d ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u652f\u63f4\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"Authorization")," \u7e3d\u5171\u6709\u56db\u7a2e\u65b9\u6cd5\uff0c\u5206\u5225\u662f"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Node"),(0,a.kt)("li",{parentName:"ol"},"RBAC"),(0,a.kt)("li",{parentName:"ol"},"ABAC"),(0,a.kt)("li",{parentName:"ol"},"Webhook")),(0,a.kt)("p",null,"\u672c\u7bc7\u6587\u7ae0\u4e0d\u6703\u63a2\u8a0e\u9019\u56db\u7a2e\u7684\u5dee\u7570\u53ca\u6bd4\u8f03\uff0c\u4e4b\u5f8c\u6709\u6642\u9593\u6703\u518d\u5beb\u6587\u7ae0\u4f86\u4ecb\u7d39\u9019\u5e7e\u7a2e\u4e26\u4e14\u5206\u4eab\u770b\u6cd5\u3002\n\u9019\u908a\u8981\u77e5\u9053\u7684\u5c31\u662f\u8acb\u76e1\u91cf\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"RBAC")," \u4e26\u4e14\u5728\u8a2d\u5b9a\u6b0a\u9650\u7684\u6642\u5019\uff0c\u4e0d\u8981\u628a\u6b0a\u9650\u5168\u958b\uff0c\u8acb\u6839\u64da\u7528\u5230\u7684\u6b0a\u9650\u958b\u555f\u7279\u5b9a\u7684\u6b0a\u9650\u4f86\u9054\u5230\u6700\u5927\u7684\u4fdd\u8b77\u3002"),(0,a.kt)("p",null,"\u5982\u679c\u5c0d\u65bc ",(0,a.kt)("inlineCode",{parentName:"p"},"RBAC")," \u60f3\u8981\u8a73\u7d30\u66b8\u89e3\uff0c\u53ef\u4ee5\u53c3\u8003\u9019\u7bc7\u6587\u7ae0 ",(0,a.kt)("a",{parentName:"p",href:"https://kubernetes.io/blog/2017/04/rbac-support-in-kubernetes/"},"RBAC Support in Kubernetes")),(0,a.kt)("p",null,"\u6709\u5beb\u904e ",(0,a.kt)("inlineCode",{parentName:"p"},"RBAC")," \u7684\u8b80\u8005\u5c31\u6703\u77e5\u9053\uff0c\u5176\u5be6\u5beb ",(0,a.kt)("inlineCode",{parentName:"p"},"RBAC")," \u975e\u5e38\u7684\u9ebb\u7169\uff0c\u5fc5\u9808\u8981\u4e0d\u505c\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"try and error")," \u53bb\u627e\u51fa\u5230\u5e95\u81ea\u5df1\u7684\u61c9\u7528\u7a0b\u5f0f\u7528\u5230\u4e86\u54ea\u4e9b\u6b0a\u9650\uff0c\u4e00\u500b\u4e00\u500b\u7684\u88dc\u4e0a\u53bb\u3002\n\u9019\u904e\u7a0b\u975e\u5e38\u75b2\u5026\u4f46\u662f\u70ba\u4e86\u6700\u9ad8\u7684\u5b89\u5168\u6027\uff0c\u9084\u662f\u8981\u8acb\u5927\u5bb6\u6e96\u78ba\u5730\u57f7\u884c\u3002"),(0,a.kt)("p",null,"\u4e0d\u904e\u70ba\u4e86\u89e3\u6c7a\u9019\u500b\u554f\u984c\uff0c\u9019\u908a\u7279\u5225\u4ecb\u7d39\u4e00\u500b\u5de5\u5177 ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/liggitt/audit2rbac"},"audit2rbac"),"\n\u53ea\u8981\u4f60\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"kuberntes")," \u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"v.10.0")," \u4e4b\u5f8c\uff0c\u5c31\u53ef\u4ee5\u958b\u555f\u4e00\u500b ",(0,a.kt)("inlineCode",{parentName:"p"},"beta")," \u7684\u529f\u80fd ",(0,a.kt)("inlineCode",{parentName:"p"},"audit log"),".\n\u800c\u4e0a\u8ff0\u7684\u5de5\u5177\u53ef\u4ee5\u5e6b\u4f60\u89e3\u6790\u9019\u4e9b ",(0,a.kt)("inlineCode",{parentName:"p"},"audit log")," \u4f86\u5224\u65b7\u4f60\u7684\u6b0a\u9650\u9084\u7f3a\u5c11\u54ea\u4e9b\uff0c\u7136\u5f8c\u5e6b\u4f60\u7522\u751f\u5c0d\u61c9\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"RBAC")," \u6a94\u6848\uff0c\u807d\u8d77\u4f86\u6eff\u597d\u7528\u7684\uff0c\u9019\u90e8\u5206\u9084\u9700\u8981\u627e\u6642\u9593\u4f86\u5be6\u969b\u73a9\u73a9\u770b\uff0c\u770b\u770b\u662f\u5426\u771f\u7684\u5982\u6558\u8ff0\u822c\u7684\u597d\u7528\u3002\n\u7576\u7136\u6709\u8208\u8da3\u7684\u8b80\u8005\u4e5f\u53ef\u4ee5\u5148\u884c\u5690\u9bae\u4f86\u4f7f\u7528\u770b\u770b\u9019\u500b\u5de5\u5177"),(0,a.kt)("h3",{id:"use-third-party-auth-for-api-server"},"Use Third Party Auth for API Server"),(0,a.kt)("p",null,"\u539f\u6587\u8a8d\u70ba\u900f\u904e\u4e00\u500b\u985e\u4f3c ",(0,a.kt)("inlineCode",{parentName:"p"},"SSO(Single Sign On)")," \u9019\u7a2e\u96c6\u4e2d\u7684\u65b9\u5f0f\u80fd\u5920\u6709\u6548\u7684\u53bb\u63a7\u7ba1\u4f7f\u7528\u8005\u7684\u6b0a\u9650\uff0c\u7279\u5225\u662f\u7576\u4f7f\u7528\u8005\u6709\u4efb\u4f55\u8abf\u5ea6\u66f4\u52d5\u6642\u3002"),(0,a.kt)("p",null,"\u5c0d\u65bc ",(0,a.kt)("inlineCode",{parentName:"p"},"Kubernetes")," \u4f86\u8aaa\uff0c\u5982\u679c\u6574\u5408\u7b2c\u4e09\u65b9\u670d\u52d9\u7684\u8a8d\u8b49\uff0c\u8b6c\u5982 ",(0,a.kt)("inlineCode",{parentName:"p"},"Google/GitHub"),"\uff0c\u5c31\u53ef\u4ee5\u5728\u6709\u5927\u91cf\u4f7f\u7528\u8005\u6709\u4efb\u4f55\u7570\u52d5\u4e4b\u6642\u4e0d\u9700\u8981\u4e00\u76f4\u91cd\u65b0\u8abf\u6574\u8a2d\u5b9a ",(0,a.kt)("inlineCode",{parentName:"p"},"Kubernetes API server")),(0,a.kt)("p",null,"\u9664\u4e86\u4e0a\u8ff0\u670d\u52d9\u5916\uff0c\u4f5c\u8005\u9084\u4ecb\u7d39\u4e86 ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/micahhausler/k8s-oidc-helper"},"OIDC(OpenID Connect Identity)")," \u8207 ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u7684\u4e00\u4e9b\u4f7f\u7528\u60c5\u5883\uff0c\u53ef\u4ee5\u5728\u9019\u500b\u5c08\u6848 ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/micahhausler/k8s-oidc-helper"},"k8s ODIC helper")," \u9019\u908a\u770b\u5230\u4f7f\u7528\u65b9\u6cd5\u3002"),(0,a.kt)("p",null,"\u9019\u908a\u6211\u672c\u8eab\u4e5f\u9084\u6c92\u6709\u5f88\u719f\u6089\uff0c\u9700\u8981\u82b1\u66f4\u591a\u6642\u9593\u4f86\u7406\u89e3\u9019\u908a\u7684\u89c0\u5ff5\u5230\u6642\u5019\u518d\u8ddf\u5927\u5bb6\u4ecb\u7d39\u9019\u4e9b\u61c9\u7528\u8207\u6982\u5ff5\u3002"),(0,a.kt)("h3",{id:"separate-and-firewall-your-etcd-cluster"},"Separate and Firewall your etcd Cluster"),(0,a.kt)("p",null,"\u539f\u6587\u4f5c\u8005\u8aaa\u9053, ",(0,a.kt)("inlineCode",{parentName:"p"},"etcd")," \u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u96c6\u7fa4\u5167\u626e\u6f14\u4e00\u500b\u975e\u5e38\u91cd\u8981\u4e5f\u662f\u975e\u5e38\u95dc\u9375\u7684\u89d2\u8272\uff0c\u5176\u5132\u5b58\u4e86\u6240\u6709 ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u96c6\u7fa4\u5167\u7684\u6240\u6709\u8cc7\u8a0a\uff0c\u5305\u542b\u4e86\u5404\u5f0f\u5404\u6a23\u7684\u8a2d\u5b9a\u4ee5\u53ca ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetres")," \u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"secrets")," \u8cc7\u6e90\u3002\n\u70ba\u4e86\u59a5\u5584\u4fdd\u8b77\u597d ",(0,a.kt)("inlineCode",{parentName:"p"},"etcd"),"\uff0c\u4f5c\u8005\u8a8d\u70ba ",(0,a.kt)("inlineCode",{parentName:"p"},"etcd")," \u672c\u8eab\u5728\u5b89\u5168\u9632\u8b77\u4e0a\u8981\u8ddf ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes"),"\u96c6\u7fa4\u662f\u5206\u958b\u8655\u7406\u7684\u3002"),(0,a.kt)("p",null,"\u5c0d\u65bc ",(0,a.kt)("inlineCode",{parentName:"p"},"etcd")," \u9019\u6a23\u7684\u89d2\u8272\u4f86\u8aaa\uff0c\u53ea\u8981\u8b93\u653b\u64ca\u8005\u6709",(0,a.kt)("inlineCode",{parentName:"p"},"\u5beb\u5165"),"\u7684\u80fd\u529b\uff0c\u5c31\u610f\u5473\u8005\u653b\u64ca\u53ef\u4ee5\u626e\u6f14\u4e00\u500b ",(0,a.kt)("inlineCode",{parentName:"p"},"root")," \u7684\u89d2\u8272\u4f86\u64cd\u63a7\u6574\u500b ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u96c6\u7fa4\u3002\n\u82e5\u662f\u653b\u64ca\u8005\u53ea\u6709",(0,a.kt)("inlineCode",{parentName:"p"},"\u8b80\u53d6"),"\u7684\u80fd\u529b\uff0c\u4e5f\u662f\u6709\u53ef\u80fd\u6703\u8b93\u653b\u64ca\u8005\u900f\u904e ",(0,a.kt)("inlineCode",{parentName:"p"},"etcd")," \u53d6\u5f97\u9053\u5404\u5f0f\u5404\u6a23\u6a5f\u5bc6\u7684\u8cc7\u8a0a\u3002"),(0,a.kt)("p",null,"\u9019\u908a\u8209\u4e00\u500b\u7bc4\u4f8b\u4f86\u8aaa\u660e ",(0,a.kt)("inlineCode",{parentName:"p"},"etcd")," \u88ab\u653b\u64ca\u6703\u6709\u591a\u5927\u7684\u5f71\u97ff\u3002"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"kubernetes scheduler")," \u6703\u900f\u904e ",(0,a.kt)("inlineCode",{parentName:"li"},"etcd")," \u4f86\u627e\u5c0b\u9084\u6c92\u6709\u904b\u884c\u8d77\u4f86\u7684 ",(0,a.kt)("inlineCode",{parentName:"li"},"pod"),", \u7136\u5f8c\u5c0b\u627e\u4e00\u500b\u53ef\u884c\u7684 ",(0,a.kt)("inlineCode",{parentName:"li"},"pod")," \u4f86\u904b\u884c\u3002"),(0,a.kt)("li",{parentName:"ol"},"\u5982\u679c\u4eca\u5929\u6709\u4f7f\u7528\u8005\u60f3\u8981\u5275\u7acb\u4e00\u500b ",(0,a.kt)("inlineCode",{parentName:"li"},"pod"),", \u5247\u8a72 ",(0,a.kt)("inlineCode",{parentName:"li"},"pod")," \u6703\u5148\u5728 ",(0,a.kt)("inlineCode",{parentName:"li"},"API server")," \u7aef\u9032\u884c\u9a57\u8b49\uff0c\u78ba\u8a8d\u4e00\u5207\u53c3\u6578\u90fd\u5408\u6cd5\u4e14\u7b26\u5408\u689d\u4ef6\u5f8c\uff0c\u5c31\u6703\u628a\u8a72 ",(0,a.kt)("inlineCode",{parentName:"li"},"pod")," \u7684\u8cc7\u8a0a\u5beb\u5165\u5230 ",(0,a.kt)("inlineCode",{parentName:"li"},"etcd"),".")),(0,a.kt)("p",null,"\u7d9c\u5408\u4ee5\u4e0a\u5169\u9ede\uff0c\u5982\u679c\u4eca\u5929\u6709\u60e1\u610f\u4f7f\u7528\u8005\u76f4\u63a5\u900f\u904e ",(0,a.kt)("inlineCode",{parentName:"p"},"etcd")," \u53bb\u4fee\u6539 ",(0,a.kt)("inlineCode",{parentName:"p"},"pod")," \u672c\u8eab\u7684\u5c6c\u6027\uff0c\u8b6c\u5982",(0,a.kt)("inlineCode",{parentName:"p"},"PodSecurityPolicies")," \u9019\u65b9\u9762\u8ddf\u5b89\u5168\u6027/\u6b0a\u9650\u6709\u95dc\u7684\u4efb\u4f55\u8a2d\u5b9a\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u5c0d\u9019\u500b ",(0,a.kt)("inlineCode",{parentName:"p"},"pod")," \u7522\u751f\u975e\u9810\u671f\u7684\u7d50\u679c\uff0c\u9019\u908a\u5c31\u6703\u6709\u5f88\u5927\u7684\u5b89\u5168\u6027\u6f0f\u6d1e\u3002"),(0,a.kt)("p",null,"\u8981\u600e\u9ebc\u4fdd\u8b77 ",(0,a.kt)("inlineCode",{parentName:"p"},"etcd"),"?\n\u4f5c\u8005\u8a8d\u70ba"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u4e00\u5b9a\u8981\u4e0a TLS \u52a0\u5bc6"),(0,a.kt)("li",{parentName:"ol"},"etcd \u61c9\u8a72\u8981\u90e8\u7f72\u5728\u7279\u5b9a\u7684\u7bc0\u9ede\u4e0a"),(0,a.kt)("li",{parentName:"ol"},"\u70ba\u4e86\u6e1b\u5c11\u79c1\u9470\u88ab\u5077\u53d6\u4e26\u4e14\u5728\u4e00\u822c\u7684 ",(0,a.kt)("inlineCode",{parentName:"li"},"worker")," \u7bc0\u9ede\u4e0a\u4f7f\u7528\uff0c\u7ba1\u7406\u8005\u53ef\u4ee5\u91dd\u5c0d ",(0,a.kt)("inlineCode",{parentName:"li"},"etcd")," \u96c6\u7fa4\u8207 ",(0,a.kt)("inlineCode",{parentName:"li"},"API server")," \u9032\u884c\u9632\u706b\u7246\u7684\u8a2d\u5b9a\uff0c\u53ea\u6709 ",(0,a.kt)("inlineCode",{parentName:"li"},"API server")," \u624d\u80fd\u5920\u8ddf ",(0,a.kt)("inlineCode",{parentName:"li"},"etcd")," \u96c6\u7fa4\u9023\u7dda\uff0c\u907f\u514d\u4efb\u4f55 ",(0,a.kt)("inlineCode",{parentName:"li"},"worker")," \u7bc0\u9ede\u4e0a\u6709\u4efb\u4f55\u6a5f\u6703\u53bb\u5b58\u53d6 ",(0,a.kt)("inlineCode",{parentName:"li"},"etcd"))),(0,a.kt)("h3",{id:"rotate-encryption-keys"},"Rotate Encryption Keys"),(0,a.kt)("p",null,"\u5c0d\u65bc ",(0,a.kt)("inlineCode",{parentName:"p"},"Security")," \u4f86\u8aaa\uff0c\u5b9a\u671f\u7684\u8f49\u63db\u4f60\u4f7f\u7528\u7684\u91d1\u9470\u8207\u6191\u8b49\u80fd\u5920\u964d\u4f4e\u554f\u984c\u767c\u751f\u6642\u7684\u6700\u5927\u98a8\u96aa\u7a0b\u5ea6\u3002\n\u8209\u4f8b\u4f86\u8aaa\uff0c\u82e5\u4eca\u5929\u4e0d\u5c0f\u5fc3\u91d1\u9470\u907a\u5931\u4e86\uff0c\u82e5\u7cfb\u7d71\u4e0a\u9762\u6c92\u6709\u53bb\u5b9a\u671f\u6539\u8b8a\uff0c\u5247\u653b\u64ca\u8005\u53ef\u4ee5\u7121\u6642\u7121\u523b\u7684\u90fd\u5c0d\u7cfb\u7d71\u9032\u884c\u975e\u9810\u671f\u7684\u64cd\u4f5c\uff0c\u7136\u800c\u82e5\u91d1\u9470\u6709\u5b9a\u671f\u53bb\u6539\u8b8a\uff0c\u5247\u653b\u64ca\u8005\u5728\u4e00\u5b9a\u6642\u9593\u5f8c\u5c31\u6c92\u6709\u8fa6\u6cd5\u7e7c\u7e8c\u5c0d\u96c6\u7fa4\u64cd\u4f5c\u4e86\u3002"),(0,a.kt)("p",null,"\u5c0d ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u4f86\u8aaa\uff0c\u91dd\u5c0d ",(0,a.kt)("inlineCode",{parentName:"p"},"kubelet")," \u9019\u96bb\u61c9\u7528\u7a0b\u5f0f\u4f86\u8aaa\uff0c\u76ee\u524d\u6709\u63d0\u4f9b\u9019\u6a23\u7684\u529f\u80fd\uff0c\u80fd\u5920\u5b9a\u671f\u7684\u53bb\u8f49\u63db\uff0c\u9019\u908a\u53ef\u4ee5\u53c3\u8003\u5b98\u65b9\u6587\u4ef6 ",(0,a.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/tasks/tls/certificate-rotation/#enabling-client-certificate-rotation"},"Certificate Rotation\n"),"\n\u4f46\u662f\u5c0d\u65bc\u63a1\u7528",(0,a.kt)("inlineCode",{parentName:"p"},"\u5c0d\u7a31\u6027\u52a0\u5bc6"),"\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"API Server")," \u4f86\u8aaa\u5247\u662f\u6c92\u6709\u63d0\u4f9b\u9019\u500b\u80fd\u529b\uff0c\u9019\u908a\u6211\u66ab\u6642\u9084\u4e0d\u6e05\u695a\u5dee\u7570\u6027\uff0c\u5c0d\u65bc\u5b89\u5168\u6027\u6c92\u6709\u9019\u9ebc\u719f\u6089\u3002\n\u539f\u6587\u5247\u8868\u793a\u9019\u90e8\u5206\u9700\u8981\u624b\u52d5\u7684\u53bb\u5b9a\u6642\u8f49\u63db\u4f86\u63d0\u9ad8\u5b89\u5168\u6027\uff0c\u4e0b\u5217\u9019\u7bc7\u6587\u7ae0\u6709\u4ecb\u7d39\u8a72\u5982\u4f55\u64cd\u4f5c ",(0,a.kt)("a",{parentName:"p",href:"https://www.twistlock.com/2017/08/02/kubernetes-secrets-encryption/"},"Kubernetes Secrets Encryption\n"),"\uff0c\u4e26\u4e14\u63d0\u5230\u82e5\u4f60\u63a1\u7528\u7684\u96c6\u7fa4\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"GKE/AKS")," \u9019\u7a2e\u96f2\u7aef\u670d\u52d9\u5546\u63d0\u4f9b\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"Kubernetes")," \u5e73\u53f0\uff0c\u5247\u80cc\u5f8c\u90fd\u6703\u81ea\u5df1\u5e6b\u4f60\u9032\u884c\u9019\u65b9\u9762\u7684\u4fdd\u8b77\u3002"),(0,a.kt)("h2",{id:"summary"},"Summary"),(0,a.kt)("p",null,"\u5176\u5be6\u539f\u6587\u53ea\u6709\u77ed\u77ed\u7684\u6558\u8ff0\u904e\u53bb\uff0c\u4f46\u662f\u5176\u5be6\u6bcf\u7bc7\u5167\u5bb9\u90fd\u6709\u975e\u5e38\u8a73\u7d30\u7684\u8cc7\u8a0a\u53ef\u4ee5\u7e7c\u7e8c\u64f4\u5c55\uff0c\u80fd\u7684\u8a71\u5efa\u8b70\u8b80\u8005\u82b1\u9ede\u6642\u9593\u628a\u6587\u7ae0\u5167\u7684\u9023\u7d50\u90fd\u8b80\u4e86\u4e00\u904d\uff0c\u6211\u76f8\u4fe1\u6703\u5c0d ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u5167\u90e8\u7684\u5404\u7a2e\u6a5f\u5236\u6709\u66f4\u6df1\u5c64\u7684\u77ad\u89e3\uff0c\u53ef\u4ee5\u5b78\u5230\u66f4\u591a\u7684\u6771\u897f\u3002"))}u.isMDXComponent=!0}}]);
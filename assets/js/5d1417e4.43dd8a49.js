"use strict";(self.webpackChunkhwchiu=self.webpackChunkhwchiu||[]).push([[8284],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>g});var n=r(67294);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var p=n.createContext({}),c=function(e){var t=n.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},u=function(e){var t=c(e.components);return n.createElement(p.Provider,{value:t},e.children)},s="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},k=n.forwardRef((function(e,t){var r=e.components,i=e.mdxType,o=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),s=c(r),k=i,g=s["".concat(p,".").concat(k)]||s[k]||m[k]||o;return r?n.createElement(g,a(a({ref:t},u),{},{components:r})):n.createElement(g,a({ref:t},u))}));function g(e,t){var r=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=r.length,a=new Array(o);a[0]=k;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[s]="string"==typeof e?e:i,a[1]=l;for(var c=2;c<o;c++)a[c]=r[c];return n.createElement.apply(null,a)}return n.createElement.apply(null,r)}k.displayName="MDXCreateElement"},58349:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>a,default:()=>m,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var n=r(87462),i=(r(67294),r(3905));const o={title:"Container Registry \u7684\u4ecb\u7d39\u53ca\u9700\u6c42",sidebar_position:19,tags:["iThome","DevOps","Kubernetes"],description:"iThome-2020 \u7cfb\u5217\u6587\u7ae0",date:new Date("2020-12-26T23:02:29.000Z")},a=void 0,l={unversionedId:"2020/iThome_Challenge/cicd-19",id:"2020/iThome_Challenge/cicd-19",title:"Container Registry \u7684\u4ecb\u7d39\u53ca\u9700\u6c42",description:"iThome-2020 \u7cfb\u5217\u6587\u7ae0",source:"@site/docs/2020/iThome_Challenge/cicd-19.md",sourceDirName:"2020/iThome_Challenge",slug:"/2020/iThome_Challenge/cicd-19",permalink:"/docs/2020/iThome_Challenge/cicd-19",draft:!1,tags:[{label:"iThome",permalink:"/docs/tags/i-thome"},{label:"DevOps",permalink:"/docs/tags/dev-ops"},{label:"Kubernetes",permalink:"/docs/tags/kubernetes"}],version:"current",lastUpdatedBy:"HungWei Chiu",sidebarPosition:19,frontMatter:{title:"Container Registry \u7684\u4ecb\u7d39\u53ca\u9700\u6c42",sidebar_position:19,tags:["iThome","DevOps","Kubernetes"],description:"iThome-2020 \u7cfb\u5217\u6587\u7ae0",date:"2020-12-26T23:02:29.000Z"},sidebar:"techPost",previous:{title:"GitOps - ArgoCD \u4ecb\u7d39",permalink:"/docs/2020/iThome_Challenge/cicd-18"},next:{title:"Container Registry \u7684\u65b9\u6848\u4ecb\u7d39",permalink:"/docs/2020/iThome_Challenge/cicd-20"}},p={},c=[],u={toc:c},s="wrapper";function m(e){let{components:t,...r}=e;return(0,i.kt)(s,(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"\u672c\u7bc7\u958b\u59cb\u8981\u4f86\u4ecb\u7d39\u4e00\u4e9b CI/CD \u904e\u7a0b\u4e2d\u90fd\u4e00\u5b9a\u6703\u7528\u5230\u7684\u4e00\u500b\u5143\u4ef6\uff0c Container Registry"),(0,i.kt)("p",null,"Container Registry \u9867\u540d\u601d\u7fa9\u5c31\u662f\u7528\u4f86\u4fdd\u5b58 Container Image \u7684\u4e00\u500b\u5009\u5eab\uff0c\u6211\u8a8d\u70ba Container Registry \u4e5f\u6709\u4e00\u4e9b\u6709\u8da3\u7684\u8b70\u984c\u53ef\u4ee5\u63a2\u8a0e\uff0c\u8b6c\u5982\u8aaa"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"\u8981\u4f7f\u7528 SaaS \u670d\u52d9\u9084\u662f\u81ea\u5df1\u67b6\u8a2d"),(0,i.kt)("li",{parentName:"ol"},"\u662f\u5426\u652f\u6301 Private registry"),(0,i.kt)("li",{parentName:"ol"},"\u591a\u4eba\u5408\u4f5c\u4e0b\u662f\u5426\u652f\u6301\u6b0a\u9650\u63a7\u7ba1"),(0,i.kt)("li",{parentName:"ol"},"\u662f\u5426\u6709 web hook \u53ef\u4ee5\u8207\u5f8c\u7e8c\u7684 pipeline \u6216\u662f\u5176\u4ed6\u7cfb\u7d71\u9023\u52d5"),(0,i.kt)("li",{parentName:"ol"},"\u8ddf Git \u7b49\u76f8\u95dc\u5c08\u6848\u662f\u5426\u6709\u81ea\u52d5\u9023\u52d5\u8207\u8655\u7406"),(0,i.kt)("li",{parentName:"ol"},"\u662f\u5426\u652f\u63f4\u5f31\u9ede\u6383\u63cf\uff0c\u53ef\u4ee5\u7528\u4f86\u6aa2\u67e5\u7576\u524d Registry \u5167\u7684 image \u662f\u5426\u6709\u6f5b\u5728\u5b89\u5168\u6027\u7684\u554f\u984c")),(0,i.kt)("p",null,"\u4e0a\u8ff0\u7684\u6bcf\u500b\u8b70\u984c\u4e5f\u90fd\u6eff\u6709\u8da3\u7684\uff0c\u6211\u5011\u53ef\u4ee5\u5148\u4f86\u804a\u804a (1) \u9019\u500b\u8b70\u984c\u5230\u5e95\u6709\u4ec0\u9ebc\u8981\u63a2\u8a0e\u7684\u5730\u65b9"),(0,i.kt)("p",null,"\u6211\u8a8d\u70ba\u8fd18\u5e74\u5927\u90e8\u5206\u8e0f\u5165\u5bb9\u5668\u5316\u4e16\u754c\u7684\u958b\u767c\u8005\u6216\u4f7f\u7528\u8005\uff0c\u7b2c\u4e00\u500b\u63a5\u89f8\u7684\u89e3\u6c7a\u65b9\u6848\u57fa\u672c\u4e0a\u90fd\u662f Docker Container\uff0c\u5f8c\u7e8c\u958b\u59cb\u4f7f\u7528\u6642\u901a\u5e38\u90fd\u6703\u4f7f\u7528 Docker Hub \u9019\u500b\u7531 Docker \u6240\u63d0\u4f9b\u7684 Container Registry \u4f5c\u70ba\u7b2c\u4e00\u500b\u63a5\u89f8\u7684 Contaienr Registry \u89e3\u6c7a\u65b9\u6848\u3002"),(0,i.kt)("p",null,"Docker Hub \u4f7f\u7528\u8d77\u4f86\uff0c\u6211\u8a8d\u70ba\u7b97\u662f\u975e\u5e38\u65b9\u4fbf\uff0c\u7279\u5225\u662f\u8ddf GitHub/Bitbucket \u7684\u9023\u52d5\u975e\u5e38\u8f15\u9b06\u8a2d\u5b9a\uff0c\u901a\u5e38\u53ea\u8981\u5728\u5c08\u6848\u5167\u6e96\u5099\u4e00\u500b Dockerfile \u7684\u6a94\u6848\uff0c\u5c31\u53ef\u4ee5\u8b93 Docker Hub \u81ea\u52d5\u5730\u5e6b\u4f60\u90e8\u7f72\u76f8\u95dc\u7684 Image \u4e26\u4e14\u5b58\u653e\u5230 Docker Hub \u4e0a\u3002"),(0,i.kt)("p",null,"\u9019\u7a2e\u60c5\u6cc1\u4e0b\u5c0d\u65bc\u4e00\u4e9b\u8981\u6e96\u5099\u81ea\u5df1 Image \u7684\u958b\u767c\u8005\u4f86\u8aaa\u975e\u5e38\u4fbf\u5229\uff0c\u90fd\u4e0d\u9700\u8981\u984d\u5916\u7684 CI Pipeline \u7cfb\u7d71\u4f86\u8655\u7406\uff0c\u53ea\u8981\u5c07\u7a0b\u5f0f\u78bc\u5408\u4f75\uff0c\u7b49\u5f85\u4e00\u6bb5\u6642\u9593\u5f8c\u76f8\u95dc\u7684 Image \u5c31\u51fa\u73fe\u4e86\u3002"),(0,i.kt)("p",null,"\u7136\u800c\u96a8\u8005\u5c08\u6848\u7684\u64f4\u5927\uff0c\u4f7f\u7528\u74b0\u5883\u7684\u6539\u8b8a\uff0c Docker Hub \u4e26\u4e0d\u4e00\u5b9a\u53ef\u4ee5\u9069\u5408\u6240\u6709\u60c5\u5883"),(0,i.kt)("p",null,"\u8209\u4f8b\u4f86\u8aaa\uff0c\u5f88\u591a\u843d\u5730\u7684\u5de5\u4f5c\u74b0\u5883\u4e2d\uff0c\u6703\u57fa\u65bc\u4fdd\u5bc6\uff0c\u6a5f\u5bc6\u7b49\u5b89\u5168\u6027\u8981\u6c42\uff0c\u4e0d\u5e0c\u671b\u904b\u884c\u7684 Contianer Image \u653e\u7f6e\u96f2\u7aef\uff0c\u9019\u6642\u5019\u5c31\u6703\u601d\u8003\u662f\u5426\u6709\u8fa6\u6cd5\u81ea\u67b6\u4e00\u500b\u672c\u5730\u7aef\u7684 Container Registry\u3002"),(0,i.kt)("p",null,"\u6b64\u5916\u66f4\u591a\u7684\u60c5\u5883\u662f\u7db2\u8def\u554f\u984c\uff0c\u56e0\u70ba Container Image \u7684\u5bb9\u91cf\u8aaa\u5927\u4e0d\u5927\uff0c\u8aaa\u5c0f\u4e0d\u5c0f\uff0c\u5e7e\u767e MB \u5230\u5e7e GB \u90fd\u6709\uff0c\u5982\u679c\u9047\u5230\u7db2\u8def\u901f\u5ea6\u74f6\u9838\u554f\u984c\uff0c\u5c31\u6703\u767c\u751f\u6293\u4e00\u500b Image \u82b1\u4e0a\u9577\u6642\u9593\u7b49\u5f85\u3002 \u9019\u90e8\u5206\u7684\u554f\u984c\u5176\u5be6\u5e38\u5e38\u770b\u5230\uff0c\u8209\u4f8b\u4f86\u8aaa"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/docker/hub-feedback/issues/1675"},"Extremely Slow Image Pulls")),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/docker/hub-feedback/issues?q=is%3Aissue+is%3Aopen+slow"},"hub-feedback issue about slow")),(0,i.kt)("p",null,"\u9019\u4e9b\u9023\u7d50\u90fd\u53ef\u4ee5\u770b\u5230\u6eff\u6eff\u7684\u95dc\u65bc\u4e0b\u8f09\u901f\u5ea6\u7684\u554f\u984c\uff0c\u6709\u6642\u5019\u9084\u6703\u727d\u626f\u5230 docker hub CDN \u7684\u554f\u984c\uff0c\u554f\u984c\u767c\u751f\u7684\u6642\u5019\u9084\u771f\u7684\u4ec0\u9ebc\u90fd\u4e0d\u80fd\u505a\uff0c\u53ea\u80fd\u7948\u79b1 docker hub \u5feb\u9ede\u4fee\u5fa9\u3002"),(0,i.kt)("h1",{id:"docker-hub-\u65b9\u6848\u6bd4\u8f03"},"Docker Hub \u65b9\u6848\u6bd4\u8f03"),(0,i.kt)("p",null,"\u6b64\u5916\uff0c\u90e8\u5206\u5de5\u4f5c\u5718\u968a\u4e5f\u6703\u6709\u4e00\u4e9b contaienr image \u7684\u9700\u6c42\uff0c\u4f46\u662f\u53c8\u4e0d\u60f3\u8981\u516c\u958b\u76f8\u95dc\u7684\u5167\u5bb9\uff0c\u9019\u6642\u5019\u6703\u9700\u8981 private registry \u7684\u652f\u63f4\uff0c\u53ef\u60dc\u7684\u662f\u5c0d\u65bc Docker Hub \u4f86\u8aaa\uff0c\u9019\u90e8\u5206\u6703\u53d6\u6c7a\u65bc\u65b9\u6848\u7684\u9078\u64c7\uff0c\u8b6c\u5982\u4e0b\u5716\u7684",(0,i.kt)("a",{parentName:"p",href:"https://www.docker.com/pricing"},"\u65b9\u6848\u6bd4\u8f03")),(0,i.kt)("p",null,"\u514d\u8cbb\u65b9\u6848\u53ea\u80fd\u6709\u4e00\u500b Private\uff0c\u4ed8\u8cbb\u53c8\u6703\u53d6\u6c7a\u65bc\u4f60\u662f\u500b\u4eba\u7528\u6236\u9084\u662f\u4e00\u500b\u5718\u968a\uff0c\u5c0d\u65bc\u5718\u968a\u4f86\u8aaa\uff0c\u5176\u50f9\u683c\u9084\u6703\u6839\u64da\u4f7f\u7528\u8005\u6578\u91cf\u800c\u6709\u6240\u589e\u52a0\uff0c"),(0,i.kt)("p",null,"\u6240\u4ee5\u5982\u679c\u4eca\u5929\u5718\u968a\u5167\u6703\u5e0c\u671b\u6839\u64da\u67b6\u69cb\u6709\u4e0d\u540c\u7684\u6b0a\u9650\u63a7\u7ba1\uff0c\u56e0\u6b64\u4f7f\u7528\u8005\u7684\u6578\u91cf\u53ef\u80fd\u6703\u6709\u4e0d\u5c11\u7684\u6642\u5019\uff0c\u6574\u500b\u6210\u672c\u53c8\u6703\u5927\u5e45\u5ea6\u589e\u52a0\u3002"),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://i.imgur.com/u6lWBKU.png",alt:null})),(0,i.kt)("p",null,"\u7e3d\u7e3d\u8003\u91cf\u4e4b\u4e0b\uff0c\u81ea\u67b6 Container Registry \u7684\u9700\u6c42\u5c31\u6703\u9010\u6f38\u51fa\u73fe\uff0c\u4e0d\u8ad6\u662f\u70ba\u4e86\u6210\u672c\uff0c\u70ba\u4e86\u529f\u80fd\u6216\u662f\u5176\u4ed6\u56e0\u7d20\uff0c SaaS \u8207 \u81ea\u67b6\u7684\u9078\u64c7\u5f9e\u4f86\u6c92\u6709"),(0,i.kt)("p",null,"\u505c\u6b62\u904e\uff0c\u5c31\u5982\u540c\u4e4b\u524d\u63a2\u8a0e pipeline \u7cfb\u7d71\u4e00\u6a23\uff0c\u6bcf\u500b\u7cfb\u7d71\u90fd\u6703\u6709 SaaS \u8207\u81ea\u67b6\u7684\u9700\u6c42\u6bd4\u8f03\uff0c\u4f46\u662f\u54ea\u4e00\u7a2e\u6bd4\u8f03\u9069\u5408\u8cb4\u5718\u968a\u5c31\u6c92\u6709\u7b54\u6848"),(0,i.kt)("p",null,"\u6b64\u5916\uff0c\u4e0d\u540c\u7684\u958b\u6e90\u5c08\u6848\u63d0\u4f9b\u7684 container registry \u7684\u529f\u80fd\u4e5f\u90fd\u4e0d\u76e1\u76f8\u540c\uff0c\u9019\u7a2e\u60c5\u6cc1\u4e0b\u5c31\u9700\u8981\u6709\u4eba\u53bb\u91dd\u5c0d\u6bcf\u5957\u8edf\u9ad4\u9032\u884c\u8a55\u4f30\uff0c\u627e\u51fa\u4e00\u5957\u9069\u5408\u81ea\u5df1\u5718\u968a\u7684\u670d\u52d9\uff0c\u6216\u662f\u6700\u5f8c\u8f49\u56de\u4f7f\u7528 SaaS \u5546\u7528\u89e3\u6c7a\u65b9\u6848\u90fd\u6709\u53ef\u80fd\u3002"),(0,i.kt)("h1",{id:"dockerhub-\u4f7f\u7528\u8005\u689d\u6b3e"},"DockerHub \u4f7f\u7528\u8005\u689d\u6b3e"),(0,i.kt)("p",null,"\u6700\u5f8c\u8981\u63d0\u7684\u662f\uff0c\u4f7f\u7528 SaaS \u670d\u52d9\u4e5f\u4e0d\u662f\u5c31\u6c92\u6709\u5b8c\u5168\u75db\u9ede\uff0c\u8b6c\u5982 2020 \u516b\u6708\u4efd Docker Hub \u7684",(0,i.kt)("a",{parentName:"p",href:"https://www.docker.com/legal/docker-terms-service"},"\u4f7f\u7528\u8005\u689d\u6b3e\u66f4\u65b0"),"\uff0c\u8a72\u66f4\u65b0\u4e2d\u6709\u5e7e\u500b\u66f4\u52d5\u4ee4\u5f88\u591a\u7121\u4ed8\u8cbb\u4f7f\u7528\u8005\u90fd\u5728\u601d\u8003\u8a72\u600e\u9ebc\u8655\u7406\uff0c\u662f\u5426\u8981\u8f49\u63db\u5230\u5176\u4ed6\u7684 SaaS \u670d\u52d9\u6216\u662f\u90fd\u8981\u6539\u6210\u81ea\u67b6\u4f86\u8655\u7406\u3002\u4e3b\u8981\u66f4\u65b0\u6709"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"\u7576\u4e00\u500b Image repository \u516d\u500b\u6708\u5167\u6c92\u6709\u4efb\u4f55\u52d5\u4f5c(push/pull)\uff0c\u5247\u8a72 image repository \u6703\u88ab\u81ea\u52d5\u522a\u9664"),(0,i.kt)("li",{parentName:"ol"},"\u91dd\u5c0d\u7121\u8a8d\u8b49\u7528\u6236\u6216\u662f\u514d\u8cbb\u7248\u672c\u7528\u6236\u6709\u4e0b\u8f09\u91cf\u7684\u9650\u5236\u3002",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"\u7121\u8a8d\u8b49\u7528\u6236\u6bcf\u516d\u5c0f\u6642\u53ea\u80fd Pull Image 100 \u6b21"),(0,i.kt)("li",{parentName:"ol"},"\u8a8d\u8b49\u7684\u514d\u8cbb\u7528\u6236\u6bcf\u516d\u5c0f\u6642\u53ea\u80fd pull 200 \u6b21")))),(0,i.kt)("p",null,"\u5c0d\u65bc\u5f88\u591a\u4f7f\u7528\u8005\u6216\u662f\u958b\u767c\u8005\u4f86\u8aaa\uff0c\u9019\u5169\u500b\u554f\u984c\u90fd\u6703\u9020\u6210\u4e00\u4e9b\u4f7f\u7528\u4e0a\u7684\u56f0\u64fe\uff0c\u7279\u5225\u662f (2) \u7684\u9650\u5236\uff0c\u56e0\u6b64\u4e0d\u5c11\u4eba\u958b\u59cb\u601d\u8003\u8981\u5982\u4f55\u65bc\u4e0d\u82b1\u9322\u7684\u60c5\u6cc1\u4e0b\u89e3\u6c7a\u9019\u4e9b\u554f\u984c\uff0c\u8b6c\u5982 ",(0,i.kt)("a",{parentName:"p",href:"https://poweruser.blog/avoiding-the-docker-hub-retention-limit-e18cdcacdfde"},"avoiding the docker hub retention limit"),", \u6216\u662f\u8f49\u6230\u5230\u5176\u4ed6\u7684 SaaS\u3002"),(0,i.kt)("p",null,"\u53ea\u80fd\u8aaa\u5929\u4e0b\u6c92\u6709\u767d\u5403\u7684\u5348\u9910\uff0c\u4eab\u53d7\u514d\u8cbb\u65b9\u6848\u7684\u540c\u6642\uff0c\u4e5f\u8981\u591a\u6ce8\u610f\u6240\u8b02\u7684\u4f7f\u7528\u8005\u689d\u6b3e\uff0c\u5982\u679c\u767c\u73fe\u9019\u4e9b\u689d\u6b3e\u7684\u4fee\u6b63\u6703\u5f71\u97ff\u81ea\u5df1\u7684\u4f7f\u7528\u60c5\u5883\uff0c\u53ef\u80fd\u5c31\u8981\u958b\u59cb\u8003\u616e\u642c\u79fb\uff0c\u81ea\u67b6\u6216\u662f\u4ed8\u8cbb\u7b49\u9078\u64c7"),(0,i.kt)("p",null,"\u63a5\u4e0b\u4f86\u7684\u6587\u7ae0\uff0c\u6211\u5011\u5c31\u6703\u63a2\u8a0e\u81ea\u67b6 Contaienr Registry \u7684\u5404\u7a2e\u9078\u64c7\u8207\u793a\u7bc4\uff0c\u6700\u5f8c\u6703\u5728\u5c55\u793a\u5982\u4f55\u5c07\u81ea\u67b6 Contianer Registry \u8207 Kubernetes \u7d50\u5408\uff0c\u8b93\u4f60\u7684 Kubernetes \u53e2\u96c6\u80fd\u5920\u63a5\u53d7 Docker Hub \u4ee5\u5916\u7684 Contaeinr Registry."))}m.isMDXComponent=!0}}]);
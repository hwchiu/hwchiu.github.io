"use strict";(self.webpackChunkhwchiu=self.webpackChunkhwchiu||[]).push([[65755],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>b});var i=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var o=i.createContext({}),k=function(e){var t=i.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},s=function(e){var t=k(e.components);return i.createElement(o.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,o=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),u=k(n),d=a,b=u["".concat(o,".").concat(d)]||u[d]||m[d]||r;return n?i.createElement(b,l(l({ref:t},s),{},{components:n})):i.createElement(b,l({ref:t},s))}));function b(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,l=new Array(r);l[0]=d;var p={};for(var o in t)hasOwnProperty.call(t,o)&&(p[o]=t[o]);p.originalType=e,p[u]="string"==typeof e?e:a,l[1]=p;for(var k=2;k<r;k++)l[k]=n[k];return i.createElement.apply(null,l)}return i.createElement.apply(null,n)}d.displayName="MDXCreateElement"},4532:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>m,frontMatter:()=>r,metadata:()=>p,toc:()=>k});var i=n(87462),a=(n(67294),n(3905));const r={title:"\u4f7f\u7528 Travis CI \u70ba\u4f60\u7684 Kubernetes \u61c9\u7528\u7a0b\u5f0f\u6253\u9020\u81ea\u52d5\u5316\u6e2c\u8a66",tags:["DevOps","Kubernetes","Ubuntu","TravisCI","Linux"],date:new Date("2018-07-21T08:49:11.000Z"),description:"\u9019\u7bc7\u6587\u7ae0\u7684\u4e3b\u8ef8\u5176\u5be6\u975e\u5e38\u7c21\u55ae\uff0c\u76ee\u6a19\u662f\u5e0c\u671b\u70ba\u958b\u767c\u8005\u7684 Kubernetes \u61c9\u7528\u7a0b\u5f0f\u63d0\u4f9b\u66f4\u5f37\u5065\u7684\u81ea\u52d5\u5316\u6e2c\u8a66\u6d41\u7a0b\uff0c\u78ba\u4fdd\u8a72\u61c9\u7528\u7a0b\u5f0f\u5728\u958b\u767c\u4e0a\u80fd\u5920\u8207 Kubernetes \u7dca\u5bc6\u7d50\u5408\u3002\u70ba\u4e86\u78ba\u4fdd\u7a0b\u5f0f\u54c1\u8cea\uff0c\u6211\u5011\u90fd\u6703\u5728\u958b\u767c\u7684\u904e\u7a0b\u4e2d\u64b0\u5beb\u4e00\u4e9b\u55ae\u5143\u6e2c\u8a66/\u6574\u5408\u6e2c\u8a66\u4f86\u78ba\u4fdd\u958b\u767c\u7684\u529f\u80fd\u80fd\u5920\u6b63\u5e38\u904b\u4f5c\u3002 \u7279\u5225\u662f\u7576\u6709\u65b0\u529f\u80fd\u7684\u958b\u767c\u6216\u662f\u81ed\u87f2\u4fee\u5fa9\u6642\u4e0d\u6703\u5c0d\u820a\u6709\u7684\u529f\u80fd\u9020\u6210\u640d\u6bc0\u3002 \u9019\u500b\u7406\u5ff5\u770b\u8d77\u4f86\u975e\u5e38\u5408\u7406\uff0c\u4f46\u662f\u7576\u61c9\u7528\u7a0b\u5f0f\u4e00\u65e6\u8207 Kubernetes \u7d50\u5408\u7684\u6642\u5019\uff0c\u9019\u500b\u7406\u5ff5\u5230\u5e95\u597d\u4e0d\u597d\u5be6\u73fe?"},l=void 0,p={unversionedId:"techPost/2018/travisci-k8s",id:"techPost/2018/travisci-k8s",title:"\u4f7f\u7528 Travis CI \u70ba\u4f60\u7684 Kubernetes \u61c9\u7528\u7a0b\u5f0f\u6253\u9020\u81ea\u52d5\u5316\u6e2c\u8a66",description:"\u9019\u7bc7\u6587\u7ae0\u7684\u4e3b\u8ef8\u5176\u5be6\u975e\u5e38\u7c21\u55ae\uff0c\u76ee\u6a19\u662f\u5e0c\u671b\u70ba\u958b\u767c\u8005\u7684 Kubernetes \u61c9\u7528\u7a0b\u5f0f\u63d0\u4f9b\u66f4\u5f37\u5065\u7684\u81ea\u52d5\u5316\u6e2c\u8a66\u6d41\u7a0b\uff0c\u78ba\u4fdd\u8a72\u61c9\u7528\u7a0b\u5f0f\u5728\u958b\u767c\u4e0a\u80fd\u5920\u8207 Kubernetes \u7dca\u5bc6\u7d50\u5408\u3002\u70ba\u4e86\u78ba\u4fdd\u7a0b\u5f0f\u54c1\u8cea\uff0c\u6211\u5011\u90fd\u6703\u5728\u958b\u767c\u7684\u904e\u7a0b\u4e2d\u64b0\u5beb\u4e00\u4e9b\u55ae\u5143\u6e2c\u8a66/\u6574\u5408\u6e2c\u8a66\u4f86\u78ba\u4fdd\u958b\u767c\u7684\u529f\u80fd\u80fd\u5920\u6b63\u5e38\u904b\u4f5c\u3002 \u7279\u5225\u662f\u7576\u6709\u65b0\u529f\u80fd\u7684\u958b\u767c\u6216\u662f\u81ed\u87f2\u4fee\u5fa9\u6642\u4e0d\u6703\u5c0d\u820a\u6709\u7684\u529f\u80fd\u9020\u6210\u640d\u6bc0\u3002 \u9019\u500b\u7406\u5ff5\u770b\u8d77\u4f86\u975e\u5e38\u5408\u7406\uff0c\u4f46\u662f\u7576\u61c9\u7528\u7a0b\u5f0f\u4e00\u65e6\u8207 Kubernetes \u7d50\u5408\u7684\u6642\u5019\uff0c\u9019\u500b\u7406\u5ff5\u5230\u5e95\u597d\u4e0d\u597d\u5be6\u73fe?",source:"@site/docs/techPost/2018/travisci-k8s.md",sourceDirName:"techPost/2018",slug:"/techPost/2018/travisci-k8s",permalink:"/docs/techPost/2018/travisci-k8s",draft:!1,tags:[{label:"DevOps",permalink:"/docs/tags/dev-ops"},{label:"Kubernetes",permalink:"/docs/tags/kubernetes"},{label:"Ubuntu",permalink:"/docs/tags/ubuntu"},{label:"TravisCI",permalink:"/docs/tags/travis-ci"},{label:"Linux",permalink:"/docs/tags/linux"}],version:"current",frontMatter:{title:"\u4f7f\u7528 Travis CI \u70ba\u4f60\u7684 Kubernetes \u61c9\u7528\u7a0b\u5f0f\u6253\u9020\u81ea\u52d5\u5316\u6e2c\u8a66",tags:["DevOps","Kubernetes","Ubuntu","TravisCI","Linux"],date:"2018-07-21T08:49:11.000Z",description:"\u9019\u7bc7\u6587\u7ae0\u7684\u4e3b\u8ef8\u5176\u5be6\u975e\u5e38\u7c21\u55ae\uff0c\u76ee\u6a19\u662f\u5e0c\u671b\u70ba\u958b\u767c\u8005\u7684 Kubernetes \u61c9\u7528\u7a0b\u5f0f\u63d0\u4f9b\u66f4\u5f37\u5065\u7684\u81ea\u52d5\u5316\u6e2c\u8a66\u6d41\u7a0b\uff0c\u78ba\u4fdd\u8a72\u61c9\u7528\u7a0b\u5f0f\u5728\u958b\u767c\u4e0a\u80fd\u5920\u8207 Kubernetes \u7dca\u5bc6\u7d50\u5408\u3002\u70ba\u4e86\u78ba\u4fdd\u7a0b\u5f0f\u54c1\u8cea\uff0c\u6211\u5011\u90fd\u6703\u5728\u958b\u767c\u7684\u904e\u7a0b\u4e2d\u64b0\u5beb\u4e00\u4e9b\u55ae\u5143\u6e2c\u8a66/\u6574\u5408\u6e2c\u8a66\u4f86\u78ba\u4fdd\u958b\u767c\u7684\u529f\u80fd\u80fd\u5920\u6b63\u5e38\u904b\u4f5c\u3002 \u7279\u5225\u662f\u7576\u6709\u65b0\u529f\u80fd\u7684\u958b\u767c\u6216\u662f\u81ed\u87f2\u4fee\u5fa9\u6642\u4e0d\u6703\u5c0d\u820a\u6709\u7684\u529f\u80fd\u9020\u6210\u640d\u6bc0\u3002 \u9019\u500b\u7406\u5ff5\u770b\u8d77\u4f86\u975e\u5e38\u5408\u7406\uff0c\u4f46\u662f\u7576\u61c9\u7528\u7a0b\u5f0f\u4e00\u65e6\u8207 Kubernetes \u7d50\u5408\u7684\u6642\u5019\uff0c\u9019\u500b\u7406\u5ff5\u5230\u5e95\u597d\u4e0d\u597d\u5be6\u73fe?"},sidebar:"techPost",previous:{title:"NCurses Disk Usage(ncdu)",permalink:"/docs/techPost/2018/tools-ncdu"},next:{title:"[DevOps] Travis CI - Step/Job/Stage",permalink:"/docs/techPost/2018/travisci-step-job-stage"}},o={},k=[{value:"GitHub",id:"github",level:3},{value:"TravisCI",id:"travisci",level:3},{value:"Minikube",id:"minikube",level:3},{value:"\u61c9\u7528\u7a0b\u5f0f",id:"\u61c9\u7528\u7a0b\u5f0f",level:2},{value:"TravisCI",id:"travisci-1",level:2},{value:"Dist",id:"dist",level:3},{value:"Env",id:"env",level:3},{value:"Before_Script",id:"before_script",level:3},{value:"script",id:"script",level:3}],s={toc:k},u="wrapper";function m(e){let{components:t,...n}=e;return(0,a.kt)(u,(0,i.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"\u4f5c\u70ba\u4e00\u500b ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u73a9\u5bb6\u4ee5\u53ca Backend \u958b\u767c\u8005\uff0c\u6211\u89c0\u5bdf\u5230\u7e31\u4f7f\u5f88\u591a\u4eba\u90fd\u5c07 Backend Server \u653e\u5230 ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u4e0a\u53bb\u904b\u884c\uff0c\u4f46\u662f\u56e0\u70ba\u5be6\u969b\u4e0a\u53ef\u80fd\u662f"),(0,a.kt)("p",null,"\u96b8\u5c6c\u65bc\u4e0d\u540c\u7684\u6210\u54e1\u53bb\u8655\u7406\u9019\u4e9b\u4e8b\u60c5\uff0c\u900f\u904e\u5206\u5de5\u7684\u65b9\u5f0f\u4f86\u5354\u8abf\u9019\u4e9b\u5de5\u4f5c\u3002"),(0,a.kt)("p",null,"\u96d6\u7136\u5927\u90e8\u5206\u7684\u61c9\u7528\u7a0b\u5f0f\u57fa\u672c\u4e0a\u4e0d\u592a\u5728\u610f\u662f\u5426\u6709 ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u7684\u5b58\u5728\uff0c\u53ea\u8981\u78ba\u4fdd\u672c\u8eab\u7684\u529f\u80fd\u6b63\u5e38\u904b\u4f5c\u5373\u53ef\uff0c\u8b6c\u5982 ",(0,a.kt)("inlineCode",{parentName:"p"},"MongoDB")," \u7b49\u61c9\u7528\u7a0b\u5f0f\u3002"),(0,a.kt)("p",null,"\u4f46\u662f\u6709\u4e9b\u61c9\u7528\u7a0b\u5f0f\u672c\u8eab\u6703\u5c0d ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u96c6\u7fa4\u9032\u884c\u64cd\u4f5c\uff0c\u9019\u985e\u578b\u7684\u61c9\u7528\u7a0b\u5f0f\u7684\u529f\u80fd\u90fd\u8981\u5b58\u5728\u4e00\u500b ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u96c6\u7fa4\u4f86\u4e92\u52d5\uff0c\u78ba\u4fdd\u529f\u80fd\u6b63\u5e38"),(0,a.kt)("p",null,"\u800c\u672c\u7bc7\u6587\u7ae0\u5b58\u5728\u7684\u76ee\u7684\u5c31\u662f\u8981\u63d0\u4f9b\u4e00\u7a2e\u89e3\u6c7a\u65b9\u6848\u7d66\u5f8c\u8005\u7684\u61c9\u7528\u7a0b\u5f0f\uff0c\u8b93\u4f60\u7684\u61c9\u7528\u7a0b\u5f0f\u80fd\u5920\u66f4\u5bb9\u6613\u5730\u8207 ",(0,a.kt)("inlineCode",{parentName:"p"},"Kubernetes")," \u7d50\u5408\u4f86\u9032\u884c\u6e2c\u8a66\u3002"),(0,a.kt)("h1",{id:"\u4e00\u53e5\u8a71\u8b1b\u6e05\u695a\u7528\u9014"},"\u4e00\u53e5\u8a71\u8b1b\u6e05\u695a\u7528\u9014"),(0,a.kt)("p",null,"\u672c\u7bc7\u6587\u7ae0\u63d0\u4f9b\u7684\u89e3\u6c7a\u65b9\u6848\uff0c\u80fd\u5920\u70ba\u4f60\u7684\u61c9\u7528\u7a0b\u5f0f\u63d0\u4f9b\u6bcf\u4e00\u6b21\u7a0b\u5f0f\u78bc\u63d0\u4ea4\u6e2c\u8a66\u90fd\u7522\u751f\u4e00\u500b\u7368\u7acb\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"Kubernetes")," \u96c6\u7fa4\u9032\u884c\u6e2c\u8a66\uff0c\u9019\u6a23\u6709\u4e0b\u5217\u597d\u8655"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u4e0d\u540c\u7a0b\u5f0f\u78bc\u63d0\u4ea4\u4f7f\u7528\u4e0d\u540c\u96c6\u7fa4\uff0c\u4e92\u76f8\u4e0d\u885d\u7a81\uff0c\u4e0d\u6703\u6709\u6c61\u67d3\u554f\u984c"),(0,a.kt)("li",{parentName:"ol"},"\u7531\u65bc\u4f7f\u7528\u4e0d\u540c\u96c6\u7fa4\uff0c\u4e5f\u4e0d\u7528\u64d4\u5fc3\u5176\u4ed6\u7684\u6e2c\u8a66\u6703\u5c0d\u96c6\u7fa4\u9020\u6210\u8cc7\u6e90\u6c59\u67d3\uff0c\u5c0e\u81f4\u5f8c\u7e8c\u7684\u6e2c\u8a66\u5931\u6557"),(0,a.kt)("li",{parentName:"ol"},"\u5728\u6700\u57fa\u672c\u7684\u8981\u6c42\u4e0b\uff0c\u9019\u5957\u89e3\u6c7a\u65b9\u6848\u662f\u5b8c\u5168\u514d\u8cbb\u7684\uff0c\u5b8c\u5168\u4f9d\u8cf4\u514d\u8cbb\u7684\u670d\u52d9\u65b9\u6848\u7d44\u5408\u800c\u6210\u3002")),(0,a.kt)("h1",{id:"\u5143\u4ef6\u4ecb\u7d39"},"\u5143\u4ef6\u4ecb\u7d39"),(0,a.kt)("p",null,"\u5728\u672c\u7bc7\u6587\u7ae0\u7684\u89e3\u6c7a\u65b9\u6848\u4e2d\uff0c\u6211\u5011\u6703\u4f7f\u7528\u5230\u4e0b\u5217\u7684\u5143\u4ef6\u4f86\u5c55\u793a\uff0c\u7576\u7136\u6709\u4e9b\u5143\u4ef6\u90fd\u53ef\u4ee5\u81ea\u7531\u8b8a\u5316\u3002\n\u53ea\u8981\u638c\u63e1\u6574\u500b\u6d41\u7a0b\u7684\u7406\u89e3\uff0c\u539f\u4ef6\u90fd\u53ef\u4ee5\u81ea\u884c\u66ff\u63db\u6210\u81ea\u5df1\u7fd2\u6163\u4f7f\u7528\u7684\u670d\u52d9\u3002"),(0,a.kt)("h3",{id:"github"},"GitHub"),(0,a.kt)("p",null,"\u653e\u7f6e\u61c9\u7528\u7a0b\u5f0f\u539f\u59cb\u78bc\u7684\u5730\u65b9\uff0c\u672c\u6848\u4f8b\u4e2d\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"GitHub")," \u9019\u500b\u7a0b\u5f0f\u78bc\u8a17\u7ba1\u7db2\u7ad9\u3002"),(0,a.kt)("h3",{id:"travisci"},"TravisCI"),(0,a.kt)("p",null,"\u4e00\u5957\u81ea\u52d5\u5316\u6e2c\u8a66\u7684\u670d\u52d9\uff0c\u8207 ",(0,a.kt)("inlineCode",{parentName:"p"},"GitHub")," \u53ef\u4ee5\u9023\u52d5\uff0c\u7576\u4f60\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"GitHub")," \u5c08\u6848\u6709\u6536\u5230\u4efb\u4f55\u7a0b\u5f0f\u78bc\u5408\u4f75\u8acb\u6c42(",(0,a.kt)("inlineCode",{parentName:"p"},"Pull Request"),") \u7b49\u66f4\u52d5\u7684\u6642\u5019\uff0c\u53ef\u4ee5\u900f\u904e ",(0,a.kt)("inlineCode",{parentName:"p"},"TravisCI"),"\u5e6b\u4f60\u7684\u61c9\u7528\u7a0b\u5f0f\u9032\u884c\u6e2c\u8a66\uff0c\u4e26\u4e14\u5c07\u6e2c\u8a66\u7684\u7d50\u679c\u56de\u50b3\u5230 ",(0,a.kt)("inlineCode",{parentName:"p"},"GitHub")," \u8b93\u5c08\u6848\u7ba1\u7406\u54e1\u77ad\u89e3\u8a72\u6b21\u7684\u7a0b\u5f0f\u78bc\u4fee\u6539\u662f\u5426\u6709\u9806\u5229\u901a\u904e\u6240\u6709\u6e2c\u8a66\u3002"),(0,a.kt)("h3",{id:"minikube"},"Minikube"),(0,a.kt)("p",null,"\u4e00\u5957\u7528\u4f86\u5efa\u7f6e ",(0,a.kt)("inlineCode",{parentName:"p"},"Kubernetres")," \u96c6\u7fa4\u7684\u5de5\u5177\uff0c\u5728\u6211\u5011\u7684\u65b9\u6848\u4e2d\u6211\u5011\u6703\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"TravisCI")," \u7684\u74b0\u5883\u4e2d\u900f\u904e\u6b64\u5de5\u5177\u4f86\u7522\u751f\u4e00\u500b\u672c\u5730\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u96c6\u7fa4\u3002\u63a5\u8005\u6211\u5011 ",(0,a.kt)("inlineCode",{parentName:"p"},"TravisCI")," \u5167\u7684\u61c9\u7528\u7a0b\u5f0f\u5c31\u7372\u5f97\u4e00\u500b\u7368\u7acb\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u96c6\u7fa4\u4f86\u4f7f\u7528\u4e86\u3002"),(0,a.kt)("p",null,"\u672c\u7bc7\u6587\u7ae0\u4e0d\u6703\u4ecb\u7d39\u95dc\u65bc ",(0,a.kt)("inlineCode",{parentName:"p"},"Gitnub")," \u4ee5\u53ca ",(0,a.kt)("inlineCode",{parentName:"p"},"TravisCI")," \u7684\u57fa\u672c\u64cd\u4f5c\uff0c\u800c\u662f\u8457\u91cd\u5728\u9019\u5169\u8005\u8207 ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u7684\u6574\u5408\u3002\n\u56e0\u6b64\u76f8\u95dc\u64cd\u4f5c\u8acb\u81ea\u884c\u5b78\u7fd2\u3002"),(0,a.kt)("h1",{id:"\u67b6\u69cb\u4ecb\u7d39"},"\u67b6\u69cb\u4ecb\u7d39"),(0,a.kt)("p",null,"\u63a5\u4e0b\u4f86\u5c07\u4f7f\u7528\u4e0b\u5716\u4f86\u4ecb\u7d39\u6574\u500b\u6e2c\u8a66\u65b9\u6848\u7684\u904b\u4f5c\u6d41\u7a0b\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://i.imgur.com/kTmhZsb.png",alt:null})),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u5047\u8a2d\u958b\u767c\u8005\u7684 ",(0,a.kt)("inlineCode",{parentName:"li"},"GitHub")," \u5c08\u6848\u5df2\u7d93\u8207 ",(0,a.kt)("inlineCode",{parentName:"li"},"TravisCI")," \u9032\u884c\u9023\u63a5"),(0,a.kt)("li",{parentName:"ol"},"\u958b\u767c\u8005\u65e5\u4ee5\u7e7c\u591c\u7684\u64b0\u5beb\u7a0b\u5f0f\u78bc\uff0c\u5c0d ",(0,a.kt)("inlineCode",{parentName:"li"},"GitHub")," \u5c08\u6848\u767c\u51fa\u7a0b\u5f0f\u78bc\u5408\u4f75\u66f4\u52d5\u7684\u8acb\u6c42"),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"GitHub")," \u9019\u908a\u6536\u5230\u901a\u77e5\uff0c\u901a\u77e5 ",(0,a.kt)("inlineCode",{parentName:"li"},"TravisCI")," \u6e96\u5099\u9032\u884c\u6e2c\u8a66"),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"TravisCI")," \u6839\u64da\u9700\u6c42\u5275\u5efa\u4e00\u500b\u5168\u65b0\u7684\u6e2c\u8a66\u74b0\u5883\u51fa\u4f86",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\u9019\u908a\u5247\u6703\u7522\u751f\u4e00\u500b\u865b\u64ec\u6a5f\u5668\u51fa\u4f86"))),(0,a.kt)("li",{parentName:"ol"},"\u5728\u4e0a\u8ff0\u7522\u751f\u7684\u6e2c\u8a66\u74b0\u5883\u4e2d\uff0c\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"li"},"Minikube")," \u8a72\u5143\u4ef6\u4f86\u7522\u751f\u4e00\u500b\u5168\u65b0\u7684 ",(0,a.kt)("inlineCode",{parentName:"li"},"kubernetes")," \u96c6\u7fa4"),(0,a.kt)("li",{parentName:"ol"},"\u78ba\u8a8d\u96c6\u7fa4\u5275\u5efa\u5b8c\u7562\uff0c\u76f8\u95dc\u670d\u52d9\u7684\u904b\u884c\u4e2d\u5f8c\uff0c\u4fbf\u53ef\u4ee5\u91dd\u5c0d ",(0,a.kt)("inlineCode",{parentName:"li"},"GitHub")," \u5c08\u6848\u5167\u7684\u7a0b\u5f0f\u78bc\u9032\u884c\u6e2c\u8a66"),(0,a.kt)("li",{parentName:"ol"},"\u6e2c\u8a66\u7684\u7d50\u679c\u56de\u5831\u7d66 ",(0,a.kt)("inlineCode",{parentName:"li"},"TravisCI"),"\uff0c\u7136\u5f8c ",(0,a.kt)("inlineCode",{parentName:"li"},"TravisCI")," \u6703\u518d\u56de\u5831\u7d66 ",(0,a.kt)("inlineCode",{parentName:"li"},"GitHub")," \u5c08\u6848\uff0c\u8b93\u958b\u767c\u8005\u53ef\u4ee5\u77ad\u89e3\u9019\u6b21\u7684\u4fee\u6539\u662f\u5426\u6709\u901a\u904e\u6240\u6709\u7684\u6e2c\u8a66\u3002")),(0,a.kt)("h1",{id:"\u793a\u7bc4\u6848\u4f8b\u5c55\u793a"},"\u793a\u7bc4\u6848\u4f8b\u5c55\u793a"),(0,a.kt)("p",null,"\u672c\u6b21\u793a\u7bc4\u6240\u4f7f\u7528\u7684\u7a0b\u5f0f\u78bc\u90fd\u53ef\u4ee5\u65bc ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/hwchiu/kubeTravisDemo"},"kubeTravisDemo")," \u5167\u627e\u5230"),(0,a.kt)("p",null,"\u800c\u8a72\u5c08\u6848\u5c0d\u61c9\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"TravisCI")," \u7d50\u679c\u4e5f\u53ef\u4ee5\u5728 ",(0,a.kt)("a",{parentName:"p",href:"https://travis-ci.org/hwchiu/kubeTravisDemo/builds"},"TravisCI kubeTravisDemo")," \u700f\u89bd"),(0,a.kt)("h2",{id:"\u61c9\u7528\u7a0b\u5f0f"},"\u61c9\u7528\u7a0b\u5f0f"),(0,a.kt)("p",null,"\u672c\u7bc7\u958b\u982d\u63d0\u5230\uff0c\u6709\u4e9b\u61c9\u7528\u7a0b\u5f0f\u6703\u9700\u8981\u8207 ",(0,a.kt)("inlineCode",{parentName:"p"},"Kubernetes")," \u6709\u7dca\u5bc6\u7684\u9023\u7d50\u64cd\u4f5c\uff0c\u800c\u672c\u6b21\u5c55\u793a\u7684\u5c08\u6848\u5247\u4f7f\u7528\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"Client-go")," \u9019\u500b\u5957\u4ef6\u958b\u767c\u4e86\u4e00\u500b\u5f88\u7c21\u55ae\u80fd\u5920\u81ea\u884c\u7522\u751f ",(0,a.kt)("inlineCode",{parentName:"p"},"Pod")," \u7684\u61c9\u7528\u7a0b\u5f0f\u3002\n\u4e26\u4e14\u70ba\u8a72\u529f\u80fd\u64b0\u5beb\u4e86\u4e00\u500b\u7c21\u55ae\u7684\u6e2c\u8a66\uff0c\u8a72\u6e2c\u8a66\u6703\u900f\u904e\u8a72\u51fd\u5f0f\u5617\u8a66\u53bb\u7522\u751f ",(0,a.kt)("inlineCode",{parentName:"p"},"Kubernetes")," Pod \u4e26\u4e14\u78ba\u4fdd\u8a72 Pod \u6709\u6210\u529f\u7522\u751f\uff0c\u6700\u5f8c\u5c07\u5176\u522a\u9664\u3002"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u5982\u679c\u60f3\u8981\u4e86\u89e3\u600e\u9ebc\u900f\u904e ",(0,a.kt)("inlineCode",{parentName:"p"},"client-go")," \u64b0\u5beb ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u76f8\u95dc\u61c9\u7528\u7a0b\u5f0f\uff0c\u53ef\u53c3\u95b1\u4e0b\u5217\u6295\u5f71\u7247 ",(0,a.kt)("a",{parentName:"p",href:"https://speakerdeck.com/chenyunchen/kubernetes-library-with-client-go"},"Kubernetes library \u958b\u767c\u5be6\u6230 with client-go"))),(0,a.kt)("p",null,"\u8a72\u6e2c\u8a66\u7a0b\u5f0f\u78bc\u5927\u81f4\u4e0a\u5982\u4e0b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-golang"},'....\n    err = createPod(clientset, podName)\n    assert.NoError(t, err)\n\n    pod, err := clientset.CoreV1().Pods("default").Get(podName, metav1.GetOptions{})\n    assert.NotNil(t, pod)\n    assert.NoError(t, err)\n\n    err = clientset.CoreV1().Pods("default").Delete(podName, &metav1.DeleteOptions{})\n    assert.NoError(t, err)\n...\n')),(0,a.kt)("p",null,"\u5982\u679c\u5728\u4e00\u500b\u6c92\u6709 ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u96c6\u7fa4\u7684\u74b0\u5883\u4e2d\uff0c\u8a72\u6e2c\u8a66\u7a0b\u5f0f\u78bc\u5247\u6c92\u6709\u8fa6\u6cd5\u6e2c\u8a66(\u56e0\u70ba\u6c92\u6709\u771f\u7684\u96c6\u7fa4\u53ef\u4ee5\u53bb\u9032\u884c",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes"),"\u64cd\u4f5c)"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u96d6\u7136\u6709 ",(0,a.kt)("inlineCode",{parentName:"p"},"Fake-client")," \u53ef\u4ee5\u9032\u884c\u76f8\u95dc\u7684\u6e2c\u8a66\uff0c\u4f46\u662f\u6709\u90e8\u4efd\u7684\u64cd\u4f5c\u662f\u9700\u8981\u771f\u7684\u96c6\u7fa4\u53bb\u904b\u884c\u624d\u53ef\u4ee5\u9032\u884c\u7684\uff0c\u9019\u985e\u578b\u7684\u5c31\u6c92\u6709\u8fa6\u6cd5\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"Fake-client")," \u4f86\u6e2c\u8a66\u3002")),(0,a.kt)("h2",{id:"travisci-1"},"TravisCI"),(0,a.kt)("p",null,"\u7576\u61c9\u7528\u7a0b\u5f0f\u6e96\u5099\u597d\u4e4b\u5f8c\uff0c\u6211\u5011\u5c31\u8981\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"GitHub")," \u5c08\u6848\u4e2d\u63cf\u5beb\u6211\u5011\u5982\u4f55\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"TravisCI")," \u7684\u6e2c\u8a66\u74b0\u5883\u3002\n\u8a72\u74b0\u5883\u63cf\u8ff0\u6a94\u6848\u63a1\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"yaml")," \u7684\u683c\u5f0f\uff0c\u540d\u7a31\u70ba ",(0,a.kt)("inlineCode",{parentName:"p"},".travis.yml"),"\uff0c\u53ef\u4ee5\u5728 ",(0,a.kt)("a",{parentName:"p",href:"https://docs.travis-ci.com/user/getting-started/"},"Travis CI Getting started")," \u770b\u5230\u76f8\u95dc\u6587\u4ef6."),(0,a.kt)("p",null,"\u9019\u908a\u6709\u5e7e\u4ef6\u4e8b\u60c5\u8981\u6ce8\u610f"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Travis-CI \u7522\u751f\u7684\u662f\u865b\u64ec\u6a5f\u5668\uff0c\u9810\u8a2d\u6c92\u7279\u5225\u958b\u555f\u60c5\u6cc1\u4e0b\uff0c\u6211\u5011\u4e0d\u80fd\u5728\u865b\u64ec\u6a5f\u5668\u5167\u518d\u958b\u555f\u53e6\u5916\u4e00\u500b\u865b\u64ec\u6a5f\u5668\uff0c\u6240\u4ee5\u6211\u5011\u8981\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"li"},"Docker")," \u7684\u65b9\u5f0f\u4f86\u5275\u9020 ",(0,a.kt)("inlineCode",{parentName:"li"},"kubernetes")," \u96c6\u7fa4. \u9019\u90e8\u5206\u53ef\u4ee5\u900f\u904e ",(0,a.kt)("inlineCode",{parentName:"li"},"minikube --vm-drive=none")," \u4f86\u9054\u6210"),(0,a.kt)("li",{parentName:"ol"},"\u5728 minikube \u7684\u90e8\u7f72\u65b9\u5f0f\u4e2d\uff0c\u6709 ",(0,a.kt)("inlineCode",{parentName:"li"},"localkube")," \u4ee5\u53ca ",(0,a.kt)("inlineCode",{parentName:"li"},"kubeadm")," \u5169\u7a2e\u65b9\u5f0f\u4f86\u90e8\u7f72\uff0c\u7531\u65bc\u76ee\u524d ",(0,a.kt)("inlineCode",{parentName:"li"},"minikube")," \u4e3b\u63a8 ",(0,a.kt)("inlineCode",{parentName:"li"},"kubeadm")," \u4e26\u4e14\u4e5f\u8aaa\u660e\u672a\u4f86\u6703\u62cb\u68c4 ",(0,a.kt)("inlineCode",{parentName:"li"},"localkube"),"\uff0c\u56e0\u6b64\u6211\u5011\u7684\u90e8\u5c6c\u65b9\u5f0f\u6c7a\u5b9a\u63a1\u7528 ",(0,a.kt)("inlineCode",{parentName:"li"},"kubeadm"),"."),(0,a.kt)("li",{parentName:"ol"},"\u7531\u65bc ",(0,a.kt)("inlineCode",{parentName:"li"},"kubeadm")," \u672c\u8eab\u6703\u4f9d\u8cf4 ",(0,a.kt)("inlineCode",{parentName:"li"},"systemd")," \u53bb\u9032\u884c\u76f8\u95dc\u7684 ",(0,a.kt)("inlineCode",{parentName:"li"},"systemd service")," \u904b\u884c\uff0c\u800c ",(0,a.kt)("inlineCode",{parentName:"li"},"Ubuntu 14.04")," \u9810\u8a2d\u4f9d\u7136\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"li"},"upstart")," \u800c\u975e ",(0,a.kt)("inlineCode",{parentName:"li"},"systemd"),"\uff0c\u56e0\u6b64\u6211\u5011\u5fc5\u9808\u8981\u6a19\u660e\u6211\u5011\u5e0c\u671b\u4f7f\u7528\u7684 ",(0,a.kt)("inlineCode",{parentName:"li"},"OS")," \u662f ",(0,a.kt)("inlineCode",{parentName:"li"},"Ubuntu 16.04(xenial)"))),(0,a.kt)("p",null,"\u6709\u4e86\u9019\u5e7e\u500b\u57fa\u672c\u6ce8\u610f\u4e8b\u9805\u5f8c\uff0c\u6211\u5011\u53ef\u4ee5\u64b0\u5beb\u4e00\u500b ",(0,a.kt)("inlineCode",{parentName:"p"},".travis.yml")," \u4f86\u7b26\u5408\u6211\u5011\u7684\u9700\u6c42"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yml"},'language: go\n\nsudo: required\ndist: xenial\nservices:\n  - docker\n\nenv:\n  - CHANGE_MINIKUBE_NONE_USER=true\n\nbefore_install:\n  - go get -u github.com/kardianos/govendor\n\nbefore_script:\n  - sudo mount --make-rshared /\n  - curl -Lo kubectl https://storage.googleapis.com/kubernetes-release/release/v1.9.0/bin/linux/amd64/kubectl && chmod +x kubectl && sudo mv kubectl /usr/local/bin/\n  - curl -Lo minikube https://github.com/kubernetes/minikube/releases/download/v0.28.1/minikube-linux-amd64 && chmod +x minikube && sudo mv minikube /usr/local/bin/\n  - sudo minikube -v 9 start --vm-driver=none --bootstrapper=kubeadm --kubernetes-version=v1.10.0 --extra-config=apiserver.authorization-mode=RBAC\n  - minikube update-context\n  - until kubectl get nodes minikube | grep " Ready";do kubectl get nodes; sleep 1; done\n  - until kubectl -n kube-system get pods -lk8s-app=kube-dns -o jsonpath="{.items[0].status.phase}" | grep "Running" ;do sleep 1;echo "waiting for kube-addon-manager to be available"; kubectl get pods --all-namespaces; done\n\nscript:\n  - go test -v ./...\n')),(0,a.kt)("p",null,"\u4e0a\u8ff0\u6a94\u6848\u5167\uff0c\u8ddf ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u6709\u95dc\u7684\u90e8\u5206\u843d\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"dist"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"env")," \u4ee5\u53ca ",(0,a.kt)("inlineCode",{parentName:"p"},"before_script")," \u9019\u4e09\u5927\u5340\u584a\u5167\u3002"),(0,a.kt)("h3",{id:"dist"},"Dist"),(0,a.kt)("p",null,"\u5c31\u5982\u540c\u4e0a\u9762\u8aaa\u660e\uff0c\u5e0c\u671b ",(0,a.kt)("inlineCode",{parentName:"p"},"TravisCI")," \u6240\u914d\u7f6e\u7684\u6a5f\u5668\u662f\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"Ubuntu 16.04"),", \u514d\u9664\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"Systemd")," \u76f8\u95dc\u4f9d\u8cf4\u7684\u81ea\u884c\u5b89\u88dd\u624b\u7e8c"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u4e8b\u5be6\u4e0a\u975e\u5e38\u96e3\u88dd\u4e14\u6709\u6eff\u591a\u554f\u984c\uff0c\u6c92\u5fc3\u529b\u4e0d\u8981\u5617\u8a66\u5728 14.04 \u5167\u53bb\u900f\u904e systemd/kubeadm \u5b89\u88dd kubernetes")),(0,a.kt)("h3",{id:"env"},"Env"),(0,a.kt)("p",null,"\u9019\u908a\u7279\u5225\u8a2d\u7f6e\u4e00\u500b\u74b0\u5883\u8b8a\u6578\u662f\u7d66 ",(0,a.kt)("inlineCode",{parentName:"p"},"minikube")," \u4f7f\u7528\u7684\uff0c\u56e0\u70ba\u4e00\u908a\u900f\u904e ",(0,a.kt)("inlineCode",{parentName:"p"},"kubectl")," \u64cd\u4f5c ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u96c6\u7fa4\u5be6\u969b\u4e0a\u662f\u900f\u904e ",(0,a.kt)("inlineCode",{parentName:"p"},"$HOME/.kube/config(default)")," \u5167\u7684\u8a2d\u8a08\u53bb\u8ddf\u96c6\u7fa4\u7372\u5f97\u6388\u6b0a\u4f86\u64cd\u4f5c\uff0c\u90a3\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"minikube")," \u7684\u74b0\u5883\u4e2d\uff0c\u6211\u5011\u900f\u904e ",(0,a.kt)("inlineCode",{parentName:"p"},"CHANGE_MINIKUBE_NONE_USER=true")," \u9019\u500b\u74b0\u5883\u8b8a\u6578\u53ef\u4ee5\u8b93\u7522\u751f\u51fa\u4f86\u7684\u53ef\u4ee5\u88ab\u4efb\u4f55\u4f7f\u7528\u8005\u5e33\u865f\u8b80\u53d6\u4f7f\u7528\uff0c\u5426\u5247\u9810\u8a2d\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"root:root")," \u624d\u6709\u6b0a\u9650\u5b58\u53d6"),(0,a.kt)("h3",{id:"before_script"},"Before_Script"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u9019\u908a\u5148\u91dd\u5c0d ",(0,a.kt)("inlineCode",{parentName:"li"},"/")," \u9019\u500b ",(0,a.kt)("inlineCode",{parentName:"li"},"Mount Point")," \u8a2d\u5b9a\u6210 ",(0,a.kt)("inlineCode",{parentName:"li"},"rshard"),"\uff0c\u4f9b ",(0,a.kt)("inlineCode",{parentName:"li"},"kube-dns")," \u4f7f\u7528",(0,a.kt)("blockquote",{parentName:"li"},(0,a.kt)("p",{parentName:"blockquote"},"\u60f3\u77ad\u89e3 ",(0,a.kt)("inlineCode",{parentName:"p"},"rshard")," \u53ef\u4ee5\u53c3\u8003 ",(0,a.kt)("a",{parentName:"p",href:"https://medium.com/kokster/kubernetes-mount-propagation-5306c36a4a2d"},"Kubernetes Mount Propagation")," \u9019\u7bc7\u6587\u7ae0\uff0c\u6709\u8a73\u7d30\u7684\u8aaa\u660e Volume \u9593\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"rshard/rslave")," \u4ee5\u53ca\u5f8c\u4f86\u65b0\u7684 feature volume bidirectional \u7684\u4ecb\u7d39"))),(0,a.kt)("li",{parentName:"ol"},"\u63a5\u4e0b\u4f86\u5c31\u662f\u4e0b\u8f09 ",(0,a.kt)("inlineCode",{parentName:"li"},"kubectl")," \u4ee5\u53ca ",(0,a.kt)("inlineCode",{parentName:"li"},"minikube")," \u5169\u500b\u76f8\u95dc\u7684\u57f7\u884c\u6a94"),(0,a.kt)("li",{parentName:"ol"},"\u63a5\u8005\u900f\u904e ",(0,a.kt)("inlineCode",{parentName:"li"},"minikube")," \u4f86\u5275\u5efa\u672c\u5730\u7684 ",(0,a.kt)("inlineCode",{parentName:"li"},"kubernetes")," \u96c6\u7fa4",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-v 9")," \u662f\u986f\u793a\u66f4\u591a\u7684 log\uff0c\u53ef\u4ee5\u65b9\u4fbf\u5b89\u88dd\u671f\u9593\u5075\u932f"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"--vm-driver=none")," \u63a1\u7528 docker \u7684\u65b9\u5f0f\u800c\u4e0d\u662f VM \u7684\u65b9\u5f0f\u4f86\u5275\u5efa ",(0,a.kt)("inlineCode",{parentName:"li"},"kubernetes")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"--bootstrapper=kubeadm")," \u6307\u5b9a\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"li"},"kubeadm")," \u9032\u884c ",(0,a.kt)("inlineCode",{parentName:"li"},"kubernetes")," \u53e2\u96c6\u7684\u5b89\u88dd"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"--kubernetes-version=v1.10.0")," \u9019\u908a\u5247\u662f\u6307\u5b9a ",(0,a.kt)("inlineCode",{parentName:"li"},"kubernetes")," \u7684\u7248\u672c"))),(0,a.kt)("li",{parentName:"ol"},"\u6700\u5f8c\u662f\u9810\u8a2d\u5c07\u6388\u6b0a\u7684\u65b9\u5f0f\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"li"},"RBAC"),", \u76f8\u95dc\u7684 ",(0,a.kt)("inlineCode",{parentName:"li"},"issue")," \u53ef\u4ee5\u53c3\u95b1 ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/kubernetes/minikube/issues/1722"},"minikube issue #1722")),(0,a.kt)("li",{parentName:"ol"},"\u5230\u4e86\u9019\u4e00\u6b65\u5f8c\u6211\u5011\u7684 ",(0,a.kt)("inlineCode",{parentName:"li"},"kubernetes")," \u96c6\u7fa4\u5c31\u6b63\u5f0f\u555f\u52d5\u4e86\uff0c\u4f46\u662f\u56e0\u70ba\u4e00\u4e9b\u6838\u5fc3\u7684\u670d\u52d9\uff0c\u5982 ",(0,a.kt)("inlineCode",{parentName:"li"},"kube-dns")," \u7b49\u53ef\u80fd\u9084\u6c92\u6709\u6b63\u5e38\u904b\u4f5c\uff0c\u9019\u908a\u5c31\u6839\u64da\u4f60\u7684\u9700\u6c42\u770b\u770b\u662f\u5426\u9700\u8981\u78ba\u8a8d\u8a72\u670d\u52d9\u5df2\u7d93\u555f\u52d5\u5f8c\u624d\u9032\u884c\u61c9\u7528\u7a0b\u5f0f\u7684\u6e2c\u8a66"),(0,a.kt)("li",{parentName:"ol"},"\u5f8c\u7e8c\u7684\u90e8\u5206\u90fd\u662f\u900f\u904e\u4e00\u4e9b\u8173\u672c\u8a9e\u8a00\u7684\u65b9\u5f0f\u78ba\u8a8d ",(0,a.kt)("inlineCode",{parentName:"li"},"kubernetes")," \u96c6\u7fa4\u5df2\u7d93\u6b63\u5e38\u904b\u4f5c\uff0c\u9019\u90e8\u5206\u6709\u5f88\u591a\u5beb\u6cd5\uff0c\u4f9d\u7167\u81ea\u5df1\u559c\u597d\u5373\u53ef\u3002")),(0,a.kt)("h3",{id:"script"},"script"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u7576\u4e0a\u8ff0\u7684\u8173\u672c\u90fd\u57f7\u884c\u5b8c\u7562\u5f8c\uff0c\u610f\u5473\u8005\u96c6\u7fa4\u53ef\u4ee5\u958b\u59cb\u904b\u884c\uff0c\u6211\u5011\u53ef\u4ee5\u9032\u884c\u81ea\u5df1\u61c9\u7528\u7a0b\u5f0f\u7684\u6e2c\u8a66"),(0,a.kt)("li",{parentName:"ol"},"\u8a72\u6e2c\u8a66\u5247\u6703\u771f\u7684\u5c0d\u525b\u5275\u7acb\u7684 ",(0,a.kt)("inlineCode",{parentName:"li"},"kubernetes")," \u96c6\u7fa4\u9032\u884c ",(0,a.kt)("inlineCode",{parentName:"li"},"Pod "),"\u7684\u5275\u7acb/\u67e5\u8a62/\u522a\u9664 \u7b49\u884c\u70ba\u3002")),(0,a.kt)("h1",{id:"\u76f8\u95dc\u6e2c\u8a66"},"\u76f8\u95dc\u6e2c\u8a66"),(0,a.kt)("p",null,"\u91dd\u5c0d\u4e0a\u8ff0\u4f7f\u7528\u7684\u793a\u7bc4\u5c08\u6848\u4ee5\u53ca\u76f8\u95dc\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"TravisCI"),", \u9996\u5148\u6211\u5011\u5148\u4f86\u770b\u6d88\u8017\u6642\u9593\uff0c\u7562\u7adf\u5982\u679c\u6bcf\u6b21\u6e2c\u8a66\u90fd\u82b1\u4e0a\u592a\u591a\u6642\u9593\uff0c\u5176\u5be6\u4e5f\u662f\u6703\u6d88\u78e8\u5927\u5bb6\u7684\u8010\u5fc3\u7684"),(0,a.kt)("p",null,"\u9019\u908a\u76f4\u63a5\u64f7\u53d6 ",(0,a.kt)("inlineCode",{parentName:"p"},"TravisCI")," \u7684",(0,a.kt)("a",{parentName:"p",href:"https://travis-ci.org/hwchiu/kubeTravisDemo/builds/406523654"},"\u6e2c\u8a66\u5831\u544a"),", \u8a72\u6e2c\u8a66\u7e3d\u5171\u82b1\u8cbb\u7684\u6642\u9593\u662f ",(0,a.kt)("inlineCode",{parentName:"p"}," 2 min 48 sec")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://i.imgur.com/x8615aH.png",alt:null})),(0,a.kt)("p",null,"\u5de6\u908a\u986f\u793a\u7684\u662f\u76f8\u95dc\u6307\u4ee4\uff0c\u800c\u53f3\u908a\u5247\u662f\u986f\u793a\u8a72\u6307\u4ee4\u82b1\u8cbb\u7684\u6642\u9593\u3002"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u82b1\u8cbb\u4e86\u5c07\u8fd1 ",(0,a.kt)("inlineCode",{parentName:"li"},"50")," \u79d2\u5728\u9032\u884c go \u76f8\u95dc library \u7684\u5b89\u88dd\uff0c\u9019\u662f\u61c9\u7528\u7a0b\u5f0f\u9700\u8981\u7684\uff0c\u8ddf `kubernetes \u7121\u95dc"),(0,a.kt)("li",{parentName:"ol"},"\u5b89\u88dd kubectl/minikube \u7b49\u76f8\u95dc\u5de5\u5177\uff0c\u9019\u908a\u82b1\u8cbb\u4e86\u5927\u6982 ",(0,a.kt)("inlineCode",{parentName:"li"},"13")," \u79d2\u5de6\u53f3`"),(0,a.kt)("li",{parentName:"ol"},"\u555f\u52d5 ",(0,a.kt)("inlineCode",{parentName:"li"},"minikube")," \u5927\u6982\u82b1\u8cbb\u4e86 ",(0,a.kt)("inlineCode",{parentName:"li"},"53")," \u79d2"),(0,a.kt)("li",{parentName:"ol"},"\u6700\u5f8c\u7b49\u5f85 ",(0,a.kt)("inlineCode",{parentName:"li"},"kubernetes"),"\u53ca\u96c6\u7fa4\u4e2d\u7684 ",(0,a.kt)("inlineCode",{parentName:"li"},"kube-dsn")," \u555f\u52d5\u5247\u82b1\u8cbb\u4e86 ",(0,a.kt)("inlineCode",{parentName:"li"},"23")," \u79d2\u5de6\u53f3.")),(0,a.kt)("p",null,"\u96f6\u96f6\u7e3d\u7e3d\u7b97\u4e00\u4e0b\uff0c\u5927\u6982\u7e3d\u5171\u6709 ",(0,a.kt)("inlineCode",{parentName:"p"},"90")," \u79d2\u7684\u6642\u9593\u518d\u555f\u52d5\u4e00\u500b ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes")," \u7684\u96c6\u7fa4\uff0c\u76ee\u524d\u5927\u6982\u662f\u8017\u8cbb\u4e86\u6574\u9ad4\u6e2c\u8a66\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"90/168"),"=",(0,a.kt)("inlineCode",{parentName:"p"},"53%"),"\n\u4f46\u662f\u9019\u500b\u6642\u9593\u662f\u56fa\u5b9a\u7684\uff0c\u57fa\u672c\u4e0a\u7576\u672c\u9ad4\u7684\u61c9\u7528\u7a0b\u5f0f\u6e2c\u8a66\u7684\u6642\u9593\u6108\u8907\u96dc\uff0c\u82b1\u8cbb\u7684\u6642\u9593\u6108\u4e45\uff0c\u9019\u500b\u5275\u7acb\u96c6\u7fa4\u82b1\u7684\u6642\u9593\u4e5f\u5c31\u5fae\u4e0d\u8db3\u9053\u4e86\u3002"),(0,a.kt)("h1",{id:"\u5176\u4ed6"},"\u5176\u4ed6"),(0,a.kt)("p",null,"Q: \u6211\u5c31\u611b\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"ubuntu-14.04")," \u5c31\u662f\u6c92\u6709 ",(0,a.kt)("inlineCode",{parentName:"p"},"systemd")," \u8a72\u600e\u9ebc\u8fa6?\nA: \u70ba\u4e86\u751f\u547d\u826f\u597d\uff0c\u5148\u6539\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"bootstrapper=localkube")),(0,a.kt)("p",null,"Q: \u53ea\u80fd\u7528\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"TravisCI")," \u55ce? \u5176\u4ed6\u7684\u6e2c\u8a66\u670d\u52d9\u5982 ",(0,a.kt)("inlineCode",{parentName:"p"},"CircleCI"),",",(0,a.kt)("inlineCode",{parentName:"p"},"Jenkins")," \u80fd\u4e0d\u80fd\u9019\u6a23?\nA: \u57fa\u672c\u4e0a\u6982\u5ff5\u4e00\u6a23\uff0c\u4f60\u53ef\u4ee5\u7528\u5404\u7a2e\u65b9\u5f0f\u53bb\u5b89\u88dd",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes"),"\u96c6\u7fa4\uff0c\u4e8b\u5be6\u4e0a\u6211\u4e5f\u6709\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"Jenkins")," \u505a\u904e\u985e\u4f3c\u7684\u4e8b\u60c5\uff0c\u6b64\u5916\u9664\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"minikube")," \u5916\u4f60\u53ef\u4e5f\u53ef\u4ee5\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"Vagrant + kubeadm + Jenkins")," \u53bb\u505a\u5230\u985e\u4f3c\u7684\u4e8b\u60c5"),(0,a.kt)("p",null,"Q: \u6211\u7684\u6e2c\u8a66\u529f\u80fd\u53ef\u80fd\u6703\u8981\u6709\u66f4\u8907\u96dc\u7684\u9700\u6c42\u8ddf\u66f4\u8907\u96dc\u7684\u74b0\u5883\uff0c\u53ef\u4ee5\u600e\u9ebc\u8fa6\nA: ",(0,a.kt)("inlineCode",{parentName:"p"},"TravisCI")," \u672c\u8eab\u865b\u64ec\u51fa\u4f86\u7684\u74b0\u5883\u9084\u662f\u6bd4\u8f03\u6b7b\uff0c\u4e0d\u5920\u9748\u6d3b\uff0c\u53ef\u4ee5\u6539\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"Jenkins")," \u7b49\u81ea\u5df1\u6709\u8fa6\u6cd5\u638c\u63e1\u865b\u64ec\u6a5f\u5668\u5167\u5bb9\u7684\u670d\u52d9"),(0,a.kt)("p",null,"Q: \u6709\u8fa6\u6cd5\u652f\u63f4 ",(0,a.kt)("inlineCode",{parentName:"p"},"kubernetes")," v1.11.0 \u55ce\nA: \u9019\u8981\u4f9d\u8cf4 ",(0,a.kt)("inlineCode",{parentName:"p"},"minikube")," \u5b98\u65b9\u7684\u652f\u63f4"),(0,a.kt)("h1",{id:"\u53c3\u8003"},"\u53c3\u8003"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"https://blog.travis-ci.com/2017-10-26-running-kubernetes-on-travis-ci-with-minikube"},"https://blog.travis-ci.com/2017-10-26-running-kubernetes-on-travis-ci-with-minikube")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/travis-ci/travis-ci/issues/7260"},"https://github.com/travis-ci/travis-ci/issues/7260"))))}m.isMDXComponent=!0}}]);